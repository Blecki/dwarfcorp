var codeplex;(function(a){(function(b){var a=function(){function a(){}a.SCROLL_BAR_WIDTH=18;return a}();b.Constants=a})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));var codeplex;(function(a){(function(b){var a=function(){function a(){}a.registerContentChange=function(b){a._contentChangeCallbacks.push(b)};a.prototype.triggerContentChange=function(){a._triggerContentChange()};a._triggerContentChange=function(){for(var b=0;b<a._contentChangeCallbacks.length;b++)a._contentChangeCallbacks[b]()};a.getOptions=function(d){var b,f,c,e;c=d.data(a._OPTIONS_DATA);if(c===undefined){b=d.children("script."+a.OPTIONS_CLASS_NAME+":first");if(b.length===0){e=d.data(a._OPTIONS_ID_DATA_NAME);if(e!=undefined)b=$("#"+e)}if(b.length!=0){f=b.eq(0).html();c=$.parseJSON(f);d.data(a._OPTIONS_DATA,c);b.remove()}}return c};a.OPTIONS_CLASS_NAME="options";a._OPTIONS_ID_DATA_NAME="options-id";a._OPTIONS_DATA="_options_data";a._contentChangeCallbacks=[];return a}();b.BaseEnhancement=a})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){$(document).ajaxSuccess(function(c,b,a){a&&!a.noContentChange&&window.setTimeout(function(){codeplex.ui.BaseEnhancement._triggerContentChange()},0)});codeplex.ui.BaseEnhancement._triggerContentChange();$.fn.checkContent=function(){codeplex.ui.BaseEnhancement._triggerContentChange()}});var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this.options={};this.justPopped=false;this.forcedSync=false}a.prototype.queryUIElements=function(){this.header=$(".floating_header",this.element);this.splitView=$("#splitView",this.element);this.directoryView=$("#DirectoryView",this.element);this.rightPane=$("#rightPane",this.element);this.leftPane=$("#leftPane",this.element);this.footer=$("#footer",this.element);this.fileView=$(".FileView",this.element);this.fileList=$(".FileList",this.element);this.fileListView=$(".FileListView",this.element);this.fileContentView=$("#FileContentView",this.element)};a.prototype._attachFloatingScrollbar=function(){this.element.floatingScrollbar({attachedScrollSelector:this.attachedScrollSelector,attachedContentSelector:this.attachedContentSelector,attachedHeightSelector:this.attachedHeightSelector,extraLeftOffset:this.extraLeftOffsetForScrollbar,extraBottomOffset:this.extraBottomOffsetForScrollbar})};a.prototype._handleSplitterMove=function(a){if(a){$(window).bind("mousemove.diff",this,function(a){a.data._syncView()});$(window).bind("mouseup.diff",this,function(a){a.data._handleSplitterMove(false)})}else{$(window).unbind("mousemove.diff");$(window).unbind("mouseup.diff")}};a.prototype._enableTheSplitter=function(){if(!this.options.syncEnabled)return;$(".vsplitbar").length<1&&this.splitView.splitter({minRight:550,sizeLeft:true,resizeToWidth:true,cookie:"sourceCodeBrowserSplitter",cookiePath:"/"})};a.prototype._showLoading=function(){CodePlex.UpdateProgress.show()};a.prototype._hideLoading=function(){CodePlex.UpdateProgress.hide()};a.prototype._isSplitViewShorterThanWindow=function(){var c=$(".FileView",this.element),a=Math.max(this.directoryView.offset().top,0),b=$(window).height()-a-this.footer.height()-38;return c.height()<=b};a.prototype._syncShortFileView=function(){var a=Math.max(this.directoryView.offset().top,0),b=$(window).height()-a-this.footer.height()-38,c=Math.max(b,$("#FileContentView").height());this._sizeCodeViewContainers(c)};a.prototype._syncLongFileView=function(){var a=$(".FileView",this.element),b=$("#FileViewContainer"),k=a.length>0?Math.max(a.offset().top,0)+a.height():0,g=Math.max(this.directoryView.offset().top,0),j=this.directoryView.css("position")=="fixed",i=j?parseInt(this.directoryView.css("top")):g-$(window).scrollTop(),m=b.length>0?b.width():0,c=m>a.width(),d=Math.max($(window).scrollTop()+$(window).height()-k,0),e=$(window).height()-d-i-(c?0:16)+(!c&&d==0?16:0),f=$("#DiffHeader").length>0&&$("#DiffHeader").css("position")!="fixed",h=f?12:0,l=Math.max(e,a.height())+h;this._sizeCodeViewContainers(l);this.directoryView.height(e)};a.prototype._sizeCodeViewContainers=function(a){$("#sourceBrowserContainer").css("height",a-25);$(".vsplitbar").height(a);$(this.splitView).height(a);this.fileList.height(a);this.directoryView.height(a);this.directoryView.css("width",this.leftPane.width());this.directoryView.scrollLeft(0)};a.prototype._syncView=function(){var b=$("#FileViewContainer").length==0&&!$("#beginInstructions").is(":visible"),a=!$(".no_results_message").is(":visible");if(!this.options.syncEnabled||b&&a)return;else if(this._isSplitViewShorterThanWindow())this._syncShortFileView();else this._syncLongFileView();$(this.splitView).trigger("resize");this.element.floatingScrollbar("syncView");this.forcedSync=true;$(document).floatingViewport("syncView")};a.prototype._enableTheFloatingViewport=function(){var a=this;$(document).floatingViewport({splitter:$(".vsplitbar",a.element),selectorForHeaderOffset:this.theSelectorForHeaderOffset,floatingElements:[{element:a.fileListView,getWidth:function(){return a.fileList.width()}},{element:$("#FileInfoHeading",a.element),height:$("#FileInfoHeading",a.element).height(),getWidth:function(){return $(".FileView",a.element).outerWidth()}}],repaint:function(){if(a.forcedSync){a.forcedSync=false;return}a._syncView()}})};return a}(a.BaseEnhancement);a.CodeBrowser=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(b){var a=function(b){__extends(a,b);function a(){b.apply(this,arguments)}a.prototype._setup=function(b,a){$(this).bind("scroll.scroll-events-"+a,b);return true};a.prototype._teardown=function(a){$(this).unbind("scroll.scroll-events-"+a);return true};a.prototype.setup=function(){throw"Derived classes must implement the setup method.";};a.prototype.teardown=function(){throw"Derived classes must implement the teardown method.";};a.latency=100;return a}(b.BaseEnhancement);b.ScrollEvent=a;var c=function(c){__extends(b,c);function b(){c.apply(this,arguments)}b.prototype.setup=function(){var d=this,b=null;return c.prototype._setup.call(this,function(e){var c=arguments;if(b)clearTimeout(b);else{e.type="scrollstart";$.event.handle.apply(d,c)}b=setTimeout(function(){b=null},a.latency)},"scroll-start")};b.prototype.teardown=function(){return c.prototype._teardown.call(this,"scroll-start")};return b}(a);b.ScrollStartEvent=c;var d=function(c){__extends(b,c);function b(){c.apply(this,arguments)}b.prototype.setup=function(){var d=this,b=null;return c.prototype._setup.call(this,function(e){var c=arguments;b&&clearTimeout(b);b=setTimeout(function(){b=null;e.type="scrollstop";$.event.handle.apply(d,c)},a.latency)},"scroll-stop")};b.prototype.teardown=function(){return c.prototype._teardown.call(this,"scroll-stop")};return b}(a);b.ScrollStopEvent=d})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.event.special.scrollstart=new codeplex.ui.ScrollStartEvent;$.event.special.scrollstop=new codeplex.ui.ScrollStopEvent;(function(a){var b={tagType:"Project"};a.fn.autocomplete=function(c){c=$.extend({},b,c);return this.each(function(){new a.autocomplete(this,c)})};a.autocomplete=function(b,c){this.options=c;this.input=a(b);this.results=a('<div style="position:absolute;z-index:100;display:none;width:205px;"></div>').addClass("AutoCompletePanel").hide();this.isVisible=false;this.selectedIndex=-1;this.data=[];this.init()};a.autocomplete.fn=a.autocomplete.prototype={};a.autocomplete.fn.extend=a.autocomplete.extend=a.extend;a.autocomplete.fn.extend({init:function(){var b=this;this.input.bind("keyup",function(a){b.handleKeyUp(a)}).bind("keydown",function(a){b.handleKeyDown(a)}).bind("keypress",function(a){b.handleKeyPress(a)}).bind("blur",function(a){b.handleBlur(a)});a(window).bind("resize",function(){b.reposition()});this.results.appendTo("body")},handleKeyUp:function(a){if(!a)a=window.event;switch(a.keyCode){case 38:this.handleUpArrowKey();return;case 40:this.handleDownArrowKey();return;case 13:return}if(a.keyCode==9||this.input.val().length==0)this.reset();else{var b=this;$.ajax({type:"POST",url:"/Services/TaggingService.asmx/GetTagAutoCompleteInfo",data:JSON.stringify({prefixText:"'"+this.input.val().replace("'","\\'")+"'",count:"10",tagType:"'"+this.options.tagType+"'"}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){b.dataCallback(a.d,b)}})}},handleKeyDown:function(a){if(!a)a=window.event;switch(a.keyCode){case 9:if(this.selectedIndex!=-1){this.handleTabKey();return false}case 13:if(this.isVisible&&this.selectedIndex>-1){this.handleEnterKey();this.preventFurtherAction(a)}}return true},handleKeyPress:function(a){if(!a)a=window.event;if(a.keyCode==13&&this.isVisible)return this.preventFurtherAction(a)},handleUpArrowKey:function(){if(this.selectedIndex>0)this.selectedIndex--;this.updateSelectedStyles()},handleDownArrowKey:function(){if(this.selectedIndex<this.results.children().length-1)this.selectedIndex++;this.updateSelectedStyles()},handleTabKey:function(){this.selectedIndex!=-1&&this.input.val(this.data[this.selectedIndex].TagName);this.input.focus();this.reset()},handleBlur:function(a){this.reset()},handleEnterKey:function(){this.selectTag(a.browser.mozilla)},handleMouseOver:function(c){var b=a(c.target);if(!b.hasClass("Row"))b=b.parent();c.data.selectedIndex=b.attr("index");c.data.updateSelectedStyles()},handleMouseDown:function(c){var b=a(c.target);if(!b.hasClass("Row"))b=b.parent();c.data.selectTag(false)},reset:function(){this.data=[];this.selectedIndex=-1;this.results.hide();this.isVisible=false},dataCallback:function(b,a){a.data=b?b:[];if(a.data.length>0){a.dataBind();a.reposition();a.results.show();a.isVisible=true}else a.reset()},dataBind:function(){this.results.empty();if(this.data.length>0)for(var b=0;b<this.data.length;b++){var d=this.data[b],c=d.Popularity;c+=c>1?" usages":" usage";var e=this._bindMouseEvents(a("<div></div>").addClass("Row").attr("index",b).appendTo(this.results)),f=this._bindMouseEvents(a("<div></div>").text(c).css("float","right").appendTo(e)),g=this._bindMouseEvents(a("<span></span>").text(d.TagName).appendTo(e))}},_bindMouseEvents:function(b){var a=this;return b.bind("mouseover",a,a.handleMouseOver).bind("mousedown",a,a.handleMouseDown)},selectTag:function(b){if(this.data==null)return;var a=this.data[this.selectedIndex];if(a){this.input.val(a.TagName);!b&&this.reset();this.input.focus()}},updateSelectedStyles:function(){var a=this;this.results.children().each(function(){if($(this).attr("index")==a.selectedIndex)$(this).addClass("Selected");else $(this).removeClass("Selected")})},preventFurtherAction:function(b){var a=b.rawEvent?b.rawEvent:b;a.preventDefault&&a.preventDefault();a.stopPropagation&&a.stopPropagation();this.reset();return false},encodeHTML:function(c,b){var a=document.createElement("div");a.appendChild(document.createTextNode(c));return(b?a.innerHTML.split('"').join("&quot;"):a.innerHTML).split(" ").join("&nbsp;")},reposition:function(){var a=this.input.offset();this.results.css("left",a.left).css("top",a.top+this.input.outerHeight())}})})(jQuery);(function(a){a.cookie=function(c,b,d){if(b===undefined)return getCookie(c);else{var e=new Date((new Date).setDate(d.expires)),f=document.domain.substring(document.domain.indexOf("."));setCookie(c,b,e,d.path,f)}return a}})(jQuery);var canvasBounced,fixWidthElementList=[];function $goToLinkHref(b){var a=$("#"+b);if(a.length>0)location.href=a.attr("href")}function $getQuerystring(b,a){if(a==null)a="";b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var d=new RegExp("[\\?&]"+b+"=([^&#]*)","i"),c=d.exec(window.location.href);if(c==null)return a;else return c[1]}function $setControlFocus(a){if(a){a.scrollIntoView();a.focus()}}function $keyCode(a){var b=0;if(!a)a=window.event;if(a.keyCode)b=a.keyCode;else if(a.which)b=a.which;else if(a.charCode)b=a.charCode;return b}function $isFormValid(a){var b=true;if(a==undefined||a)b=MvcValidation_Validate();return b}function $submitForm(a,c){var b=$isFormValid(c);if(b&&a){$("#"+a).val("true");$("#"+a)[0].form.submit()}else if(b)return true;return false}function $submitFormElement(b,a){$isFormValid(a)&&b.form.submit();return false}function $submitKeyPress(a,b){if($keyCode(b)==13)return $submitForm(a)}function $submitKeyPressElement(a,b){if($keyCode(b)==13)return $submitFormElement(a)}function addFixWidthElement(a){a&&fixWidthElementList.push(a)}function masterLoad(){if(!self.logoImageLoaded)document.body.className+=" NoImages";else logoImageLoaded=null;CodePlex.UpdateProgress.initialize("UpdateProgressPanel");canvasBounced=false;typeof SmartDate_Load=="function"&&SmartDate_Load();if(window.onbeforeunload_suppressed)window.onbeforeunload=window.onbeforeunload_suppressed;fixWikiContentWidth();fixWidthElementList=[]}function canvasBounce(){if(!canvasBounced){CodePlex.UI.bounceFullHeightElement($("#Canvas").get(0));canvasBounced=true}}function fixWidth(e,b){if(!b&&!CodePlex.UI.isIE)return;var f={html:1,body:1,form:1,tbody:!b,table:!b,td:!b},d=$("#CanvasContent").get(0),a=e||d;while(a&&a.tagName){if(!f[a.tagName.toLowerCase()]&&a.scrollWidth>(a.clientWidth||a.offsetWidth))if(CodePlex.UI.isIE7){var c=a.scrollWidth;if(a.className=="CanvasIEWidthFix")c=c-7;if(c>(a.clientWidth||a.offsetWidth))a.style.width=c+"px"}else a.style.width=a.scrollWidth+"px";a=a.parentNode}if(!e){if(CodePlex.UI.isOpera)if(document.body.offsetHeight>d.scrollHeight)d.style.height=document.body.offsetHeight+"px";CodePlex.UpdateProgress.reset()}}function fixWikiContentWidth(){if(CodePlex.UI.isIE){for(i=0;i<fixWidthElementList.length;i++)fixWidth(fixWidthElementList[i],true);fixWidth(null,true)}else{for(i=0;i<fixWidthElementList.length;i++)if(CodePlex.UI.isFF3)fixWidthElementList[i].style.width=fixWidthElementList[i].scrollWidth-17+"px";else fixWidthElementList[i].style.width=fixWidthElementList[i].scrollWidth+"px";fixWidthElementList.length>0&&canvasBounce()}}function getResizeHandler(b){var a=0;return function(){a&&clearTimeout(a);a=setTimeout(fixWidth,1)}}function EnterKeyFormSubmitHandler(c,a,b){if(a.keyCode==13){a.returnValue=false;a.Cancel=true;document.getElementById(getFullIdForControl(c,b)).click()}}function getElementByClass(a,b){var c=a.length;for(i=0;i<c;i++)if(a[i].className==b)return a[i];return null}function expandAndCollapseDivs(h,b,d,c){var a=document.all?document.all:document.getElementsByTagName("*"),i=getElementByClass(a,h),f=getCookie(b);if(f=="expanded"){var g=getElementByClass(a,d);displayContentDisplay(g,"collapseButton",b)}else{var e=getElementByClass(a,c);hideContentDisplay(e,"expandButton",b)}}function displayAllContentInlineDisplay(k,j,m,l,n,o){for(var b=document.getElementsByTagName("div"),c=document.getElementsByTagName("img"),e=[],d=[],g=[],f=[],a=0;a<b.length;a++)if(b[a].className==k)e.push(b[a]);else b[a].className==j&&d.push(b[a]);for(var a=0;a<c.length;a++)if(c[a].className==m)g.push(c[a]);else c[a].className==l&&f.push(c[a]);for(var a=0;a<e.length;a++)e[a].style.display="inline";for(var a=0;a<d.length;a++)d[a].style.display="none";for(var a=0;a<g.length;a++)g[a].style.display="inline";for(var a=0;a<f.length;a++)f[a].style.display="none";var h=document.getElementById(n);if(h)h.style.display="inline";var i=document.getElementById(o);if(i)i.style.display="none"}function getFullIdForControl(a,b){var c=a.id.substring(0,a.id.lastIndexOf("_")+1)+b;return c}function displayContentDisplay(a,d,b){var e=document.getElementById(getFullIdForControl(a,b)),c=document.getElementById(getFullIdForControl(a,d));a.style.display="none";c.style.display="inline";e.style.display="block";setCookie(b,"expanded")}function hideContentDisplay(a,d,b){var e=document.getElementById(getFullIdForControl(a,b)),c=document.getElementById(getFullIdForControl(a,d));a.style.display="none";c.style.display="inline";e.style.display="none";setCookie(b,"collapsed")}function displayContentInlineDisplay(a,d,g,f){var e=document.getElementById(getFullIdForControl(a,g)),c=document.getElementById(getFullIdForControl(a,f)),b=document.getElementById(getFullIdForControl(a,d));a.style.display="none";b.style.display="inline";e.style.display="inline";c.style.display="none"}function setCookie(f,e,a,c,b,d){document.cookie=f+"="+escape(e)+(a?"; expires="+a.toGMTString():"")+(c?"; path="+c:"")+(b?"; domain="+b:"")+(d?"; secure":"")}function getCookie(a){var b=document.cookie.indexOf(a+"="),d=b+a.length+1;if(!b&&a!=document.cookie.substring(0,a.length))return null;if(b==-1)return null;var c=document.cookie.indexOf(";",d);if(c==-1)c=document.cookie.length;return unescape(document.cookie.substring(d,c))}function deleteCookie(b,c,a){if(getCookie(b))document.cookie=b+"="+(c?"; path="+c:"")+(a?"; domain="+a:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}function getChildNodes(a,g,c,e,f){var d=[];if(a&&a.childNodes)for(var b=0;b<a.childNodes.length;b++){if(a.childNodes[b].nodeType!=1)continue;if((!g||a.childNodes[b].tagName.toLowerCase()==g.toLowerCase())&&(!c||!f&&a.childNodes[b][c]==e||f&&a.childNodes[b][c]&&a.childNodes[b][c].indexOf(e)>-1))d[d.length]=a.childNodes[b];else d=d.concat(getChildNodes(a.childNodes[b],g,c,e,f))}return d}function getParentNode(g,e,b,c,d){var f=null,a=g.parentNode;while(a){if((!e||a.tagName.toLowerCase()==e.toLowerCase())&&(!b||!d&&a[b]==c||d&&a[b]&&a[b].indexOf(c)>-1)){f=a;break}a=a.parentNode}return f}function createNode(c,a,d){var b=document.createElement(d?d:"div");if(a)for(var e in a)b[e]=a[e];c&&c.appendChild(b);return b}var CodePlex={};CodePlex.UI=new function(){this.isIE=document.documentElement.className.indexOf("IE")>-1;this.isIE6=document.documentElement.className.indexOf("IE6")>-1;this.isIE7=document.documentElement.className.indexOf("IE7")>-1;this.isFF=document.documentElement.className.indexOf("FF")>-1;this.isFF3=document.documentElement.className.indexOf("FF3")>-1;this.isSafari=document.documentElement.className.indexOf("Safari")>-1;this.isOpera=document.documentElement.className.indexOf("Opera")>-1;this.Browser=document.documentElement.className.replace(/IE /,"");this.Point=function(a,b){this.x=a;this.y=b};this.getElementPosition=function(a){var b=0,c=0;while(a.offsetParent){b+=a.offsetLeft;c+=a.offsetTop;a=a.offsetParent}b+=a.offsetLeft;c+=a.offsetTop;return new CodePlex.UI.Point(b,c)};this.focus=function(a){if(!a)return false;try{a.focus();return true}catch(b){return false}};var b=null;this.encodeHtml=function(c,a){if(!b)b=document.createElement("div");b.innerHTML="";b.appendChild(document.createTextNode(c));return(a?b.innerHTML.split('"').join("&quot;"):b.innerHTML).split(" ").join("&nbsp;")};var a=0;this.bounceElement=function(b,c){if(!b)return;var d=b.style.width;b.style.width=d!="auto"?"auto":"100%";a&&clearTimeout(a);a=setTimeout(function(){b.style.width=d;typeof c=="function"&&c()},1)};this.bounceFullHeightElement=function(b,c){if(!b)return;b.style.height="99.9%";a&&clearTimeout(a);a=setTimeout(function(){b.style.height="100%";typeof c=="function"&&c()},1)}};function createDelegate(a,b){return function(){b.apply(a)}}if(typeof originalRegularExpressionValidatorEvaluateIsValid=="undefined"&&typeof RegularExpressionValidatorEvaluateIsValid=="function"){originalRegularExpressionValidatorEvaluateIsValid=RegularExpressionValidatorEvaluateIsValid;RegularExpressionValidatorEvaluateIsValid=function(a){if(a.invalidinIEifonlywhitespace)if(a.invalidinIEifonlywhitespace=="true"){var b=ValidatorGetValue(a.controltovalidate);if(b.replace(/\s*/g,"").length==0&&b.length>0)return false;return originalRegularExpressionValidatorEvaluateIsValid(a)}return originalRegularExpressionValidatorEvaluateIsValid(a)}}function suppressUnsavedData(){window.onbeforeunload_suppressed=window.onbeforeunload;window.onbeforeunload=null}function allowUnsavedDataAlert(){if(window.onbeforeunload_suppressed&&!window.onbeforeunload)window.onbeforeunload=window.onbeforeunload_suppressed}function disableUnsavedData(){window.onbeforeunload=null;window.onbeforeunload_suppressed=null}function setupUnsavedData(){$("input, textarea, select").each(function(c,b){var a=$(b);if(a.data("suppress")===true)return;a.change(appendUnsavedDataPrompt)});$("a.YesNoSelect").click(appendUnsavedDataPrompt)}function appendUnsavedDataPrompt(){if(window.onbeforeunload===null)window.onbeforeunload=function(){return"You are navigating away from this page. Your changes will be lost."}}function promptUnsavedData(){if(window.onbeforeunload!==null)return confirm(window.onbeforeunload()+"\r\nAre you sure you want to leave this page?");return true}function OpenDialog(a,e,g,h,d,f,b,c){if($(a)&&!e){$(a).dialog("close");return}if(!c)c=true;try{$(a).dialog("destroy")}catch(i){}$(a).dialog({autoOpen:false,open:f,close:b,dialogClass:h,width:g,modal:c});$(a).click(function(c){if($(c.target).is('a.close, input[type="button"]')){$(a).dialog("close");b&&b()}});if($(a)&&e){if(d)$(a).parent().appendTo(d);else $(a).parent().appendTo("form:last");$(a).dialog("open").show().focus();$("div.ui-widget-overlay.loading").removeClass("loading")}}function OpenDialogNonModal(d,f,e,g,c,b,a){OpenDialog(d,f,e,g,c,b,a,false)}function GetHashValue(a,d){var b=null;if(path.match("#")){var c=path.split("#")[1];a=a.toLowerCase();if(!d)a+="=";if(c.toLowerCase().indexOf(a)>=0)if(!d)b=c.split("=")[1];else b=c}return b}function HashValueExist(a,b){if(location.hash!=""){var c=location.hash.substr(1);a=a.toLowerCase();if(b!=undefined&&!b)a+="=";if(c.toLowerCase().indexOf(a)>=0)return true;else return false}}function BindButtonHover(c,b,a){$("#"+c).bind("mouseover",function(){$(this).attr("src",b)}).bind("mouseout",function(){$(this).attr("src",a)})}function $breakWords(a,d){if(a.length<=d)return $encodeIt(a);var e="",c=0;eval("var regex = /([^\\s]{"+d+"})(?=[^\\s])/g");var b=regex.exec(a);while(b!=null){if(b.index-c>0)e+=$encodeIt(a.substr(c,b.index-c));e+=$encodeIt(b[0])+"<wbr></wbr>";c=b.index+d;b=regex.exec(a)}return e+$encodeIt(a.substr(c))}function $encodeIt(a){$("#sampleEncode").length==0&&$("body").append('<div id="sampleEncode" style="display:none;"></div>');return $("#sampleEncode").text(a).html()}function $normalizeText(a){a=$.trim(a);if(a.indexOf("\r")>-1){if(a.indexOf("\r\n")>-1)a=a.split("\r\n").join("\n");if(a.indexOf("\r")>-1)a=a.split("\r").join("\n")}return a}function $replaceNewLines(a){return a.replace(/\r?\n/g,"<br />")}function logError(b){var c=codeplex.ui.UrlGenerator.errorReportingUrl(),a=$("html").attr("class");$.ajax({url:c,type:"POST",data:{msg:b,browserInfo:a,url:location.href},noContentChange:true})}function $loadScript(b,a){$(function(){var d=document.getElementsByTagName("head")[0]||document.documentElement,c,e=false;function f(){if(!e&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){e=true;$.isFunction(a)&&a();c.onload=c.onreadystatechange=null;d&&c.parentNode&&d.removeChild(c)}}c=document.createElement("script");c.src=b;c.onload=c.onreadystatechange=f;d.insertBefore(c,d.firstChild)})}function getInt(b){var a=parseInt(b);if(isNaN(a))return 0;return a}String.prototype.startsWith=function(a){return this.substring(0,a.length)===a};String.prototype.parseBool=function(){switch(this.toLowerCase()){case"true":case"yes":case"1":return true;case"false":case"no":case"0":case null:return false;default:return Boolean(this)}};function resizeProjectTabs(){var c=$("#page_box_links"),a=$("li",c),b=0;a.each(function(){b+=$(this).width()});var d=(c.width()-b)/a.length;a.each(function(){var a=$(this);a.css({width:parseInt(a.width()-17+d)+"px"})})}function $createFileLoadError(b,a){return'<div class="no_results_message no_results_padding">We encountered a problem loading &quot;'+$encodeIt(b)+'&quot;. If you continuously encounter this issue, please <a href="'+a+'">contact us</a>.</div>'}(function(a){a.fn.applyLastClassToList=function(b){if(b==null||b.length==0)return a("li:last",this).addClass("last");else return a("li."+b+":last",this).addClass("last")}})(jQuery);$.fn.scrollTo=function(){var a=this.offset().top,d=CodePlex.UI.isSafari?document.body.scrollTop:$("html,body")[0].scrollTop,b=d+document.body.clientHeight,c=this.outerHeight();if(a+c>b&&c<b)window.scrollBy(0,a+this.outerHeight()-b);else a<d&&$("html,body").animate({scrollTop:a},"fast");return this};$(function(){masterLoad();resizeProjectTabs();jQuery.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase())});function showSummaryValidator(a,b){for(i=0;i<Page_Validators.length;i++)if(Page_Validators[i].validationGroup==a.validationGroup&&Page_Validators[i].id!=a.id){ValidatorValidate(Page_Validators[i]);if(Page_Validators[i].isvalid==false){b.IsValid=false;break}}};var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.apply(this,arguments);this.updatingText=false}b.prototype._init=function(){var c=a.BaseEnhancement.getOptions(this.element);this.options=$.extend({},b._defaults,c,this.options);this.options.limit=Math.max(this.options.limit,0);this.textArea=this.element;this.multiline=$(this.element).is("textarea");this.defaultButton=$("#"+this.options.defaultButtonId);this.textArea.text=this.options.text;if(this.options.showUnsavedDataAlert)if(this.options.hiddenFieldValue=="true"){$(window).bind("onbeforeunload",function(){return"You are navigating away from the page you were editing; Your changes may be lost."});$("#"+this.options.hiddenFieldId).val("true")}this.errorMsg=$("<div>").css("clear","both").addClass("ErrorMessage").hide();this.textArea.after(this.errorMsg);this.initTextArea()};b.prototype.initTextArea=function(){this.textArea.bind("keydown",this,this.onKeyDown).bind("keyup",this,this.onKeyUp).bind("keypress",this,this.onKeyPress).bind("change",this,this.onChange).bind("enlarge",this,this.onEnlarge);this.populateTextArea()};b.prototype.populateTextArea=function(){if(!this.textArea)return;this.textArea.attr("disabled",false);!$.browser.mozilla&&this.textArea.css("display","block")};b.prototype.autoEnlargeTextBox=function(a,b){var c=5;if(a&&a.rows)if(document.all){while(a.scrollHeight>a.clientHeight&&this.isLessThanMaxRows(b))a.rows+=c;a.scrollTop=0}else{var d=this.countLineBreaks(a.value),e=a.getAttribute("wrap");if(d>parseInt(a.rows))while(d>parseInt(a.rows)&&this.isLessThanMaxRows(b))a.rows+=c;else if(e.toLowerCase()=="soft"||e.toLowerCase()=="hard")while(parseInt(a.rows)*parseInt(a.cols)<=a.value.length&&this.isLessThanMaxRows(b))a.rows+=c}};b.prototype.updateCounter=function(a,b){if(!this.options.showCounter)return;if(!this.options.limit)return this.setCounter(a.length,b);return this.setCounter(a.length<this.options.limit?this.options.limit-a.length:0,b)};b.prototype.setCounter=function(b,d){var a=$("#"+this.options.counterId),c=a.html();if(!a.length)return;if(d&&c-b<10)return;a.html(b)};b.prototype.countLineBreaks=function(a){return a.split("\n").length-1};b.prototype.isLessThanMaxRows=function(a){if(!a)return true;return parseInt(this.textArea.get(0).rows)<a};b.prototype.isLessThanLimit=function(b){if(!this.options.limit)return true;var a=this.textArea.val();return a.length<this.options.limit||(b||this.normalize(a).length)<this.options.limit};b.prototype.isGreaterThanLimit=function(b){if(!this.options.limit)return false;var a=this.textArea.val();return a.length>this.options.limit&&(b||this.normalize(a).length>this.options.limit)};b.prototype.normalize=function(a){return $normalizeText(a)};b.prototype.getSelection=function(){var a=this.textArea.get(0);if(typeof a.createTextRange!="undefined"){var b=document.selection&&document.activeElement==a?document.selection.createRange():null;return b?b.text:""}if(typeof a.selectionStart!="undefined")return this.textArea.val().substring(a.selectionStart,a.selectionEnd);return""};b.prototype.textAreaChanged=function(){if(!this.textArea||this.updatingText)return;var a=this.normalize(this.textArea.val());this.isLessThanLimit(a)&&$(this.errorMsg).hide();if(this.isGreaterThanLimit(a)){this.showLimitExceedMsg();a=a.substring(0,this.options.limit||Infinity);this.updatingText=true;try{this.textArea.val(a)}finally{this.updatingText=false}}this.updateCounter(a);this.options.autoEnlarge&&this.autoEnlargeTextBox(this.textArea);this.textArea.trigger("textChangedComplete")};b.prototype.showLimitExceedMsg=function(){this.options.isShowErrorMsg&&this._showErrorMessage(this.options.overflowMsg)};b.prototype._showErrorMessage=function(a){this.errorMsg.html("").text(a).show()};b.prototype.cancelEvent=function(a){a&&a.preventDefault&&a.preventDefault();a&&a.stopPropagation&&a.stopPropagation();return false};b.prototype.onKeyDown=function(a){a.data.updateCounter(a.data.normalize(a.data.textArea.value),1);if(a.data.showUnsavedDataAlert){$("#"+a.data.options.hiddenFieldId).val("true");window.onbeforeunload=function(){return"You are navigating away from the page you were editing; Your changes may be lost."}}};b.prototype.onKeyUp=function(a){a.data.keyTimer&&clearTimeout(a.data.keyTimer);a.data.keyTimer=setTimeout(function(){a.data.onChange(a)},250);$(a.data.textArea).trigger("textChanged")};b.prototype.onKeyPress=function(a){var b=false;if(a.data.multiline)b=!a.data.onKeyPress_MultiLine(a);else b=!a.data.onKeyPress_SingleLine(a);if(b){a.data.showLimitExceedMsg();return a.data.cancelEvent(a)}};b.prototype.onKeyPress_SingleLine=function(a){var b=a.keyCode;if(b==13&&a.data.defaultButton){a.data.click();return false}return true};b.prototype.onKeyPress_MultiLine=function(a){var b=a.keyCode;$.browser.mozilla&&b==13&&a&&a.stopPropagation&&a.stopPropagation();if(!a.data.options.limit)return true;if(a.ctrlKey||a.shiftKey||a.altKey)return true;var c={8:true,34:true,33:true,35:true,36:true,37:true,38:true,39:true,40:true,46:true};if(c[b])return true;if(a.data.getSelection().length)return true;return a.data.isLessThanLimit()};b.prototype.onChange=function(a){a.data.textAreaChanged()};b.prototype.onEnlarge=function(b,a){b.data.enlarge(a)};b._defaults={limit:150,counterId:"charCounter",showCounter:true,autoEnlarge:false,isShowErrorMsg:false,maxAutoEnlarge:0,defaultButtonID:"",overflowMsg:"",showUnsavedDataAlert:true,text:""};return b}(a.BaseEnhancement);a.EnhancedTextBox=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.enhancedTextBox",new codeplex.ui.EnhancedTextBox);$.fn.selectEntireSelectedLine=function(){var b=this[0],a,g,e,h,i,d,c,f;this.focus();if(typeof b.selectionStart!="number"||typeof b.selectionEnd!="number"){d=b.value;c=document.selection.createRange();f=c.length;g=a=this.getCursorPosition();e=this.getCursorPosition()+c.text.length;while(a-->0&&b.value.charAt(a-1)!="\r")c.moveStart("character",-1);a=e;while(a++<d.length&&b.value.charAt(a)!="\n")c.moveEnd("character",1);c.select()}else{a=b.selectionStart;while(a>0&&b.value.charAt(a-1)!="\n")a=a-1;b.selectionStart=a;a=b.selectionEnd;while(a<b.value.length&&b.value.charAt(a)!="\n")a=a+1;b.selectionEnd=a}this.focus()};$.fn.seekCursorToStartOfLine=function(){var b=this[0],a,e,c,d;this.focus();if(typeof b.selectionStart!="number"||typeof b.selectionEnd!="number"){e=b.value;c=document.selection.createRange();d=c.length;a=this.getCursorPosition();while(a>0&&b.value.charAt(a-1)!="\n")a=a-1;c.collapse(true);c.moveStart("character",-1*a);c.moveEnd("character",-1*a+d);c.select()}else{a=b.selectionStart;while(a>0&&b.value.charAt(a-1)!="\n")a=a-1;b.selectionStart=b.selectionEnd=a}this.focus()};$.fn.seekCursorToEndOfLine=function(){var b=this[0],a,e,c,d;this.focus();if(typeof b.selectionStart!="number"||typeof b.selectionEnd!="number"){e=b.value;c=document.selection.createRange();d=c.length;a=this.getCursorPosition();while(a<e.length&&b.value.charAt(a)!="\n")a=a+1;c.collapse(true);c.moveStart("character",a+d);c.moveEnd("character",a);c.select()}else{a=b.selectionStart;while(a<b.value.length&&b.value.charAt(a+1)!="\n")a=a+1;b.selectionStart=b.selectionEnd=a}this.focus()};$.fn.getCursorPosition=function(){var b=this[0],a;this.focus();if(typeof b.selectionStart!="number"||typeof b.selectionEnd!="number"){a=document.selection.createRange();var c=a.duplicate();c.moveToElementText(b);c.setEndPoint("EndToEnd",a);return c.text.length-a.text.length}else return b.selectionStart};$.fn.insertTextAtStartOfEachLine=function(d){var a=this[0],c,e,b,f,g;this.focus();if(typeof a.selectionStart!="number"||typeof a.selectionEnd!="number"){this.selectEntireSelectedLine();e=document.selection.createRange();g=this.getCursorPosition();c=d+e.text.replace(/\n/g,"\n"+d);e.text=c;this.highlightText(g+c.length,g+c.length)}else{this.selectEntireSelectedLine();b=a.selectionStart;f=a.selectionEnd;while(b>0&&a.value.charAt(b-1)!="\n")b=b-1;c=d+a.value.substring(b,f).replace(/\n/g,"\n"+d);a.value=a.value.substring(0,b)+c+a.value.substring(f,a.value.length);a.selectionStart=a.selectionEnd=b+c.length}this.focus()};$.fn.insertTextAtLineStart=function(c){var a=this[0],f,e,b,d;this.focus();if(typeof a.selectionStart!="number"||typeof a.selectionEnd!="number"){f=a.value;e=document.selection.createRange();b=this.getCursorPosition();while(b>0&&a.value.charAt(b-1)!="\n")b=b-1;a.value=a.value.substring(0,b)+c+a.value.substring(b,a.value.length)}else{b=a.selectionStart;d=a.selectionEnd;while(b>=0&&a.value.charAt(b-1)!="\n")b=b-1;a.value=a.value.substring(0,b)+c+a.value.substring(b,a.value.length);a.selectionStart=a.selectionEnd=d+c.length}this.focus()};$.fn.highlightText=function(c,d){var b=this[0],e,a;this.focus();if(typeof b.selectionStart!="number"||typeof b.selectionEnd!="number"){e=this.getCursorPosition();a=b.createTextRange();a.collapse(true);a.moveEnd("character",d);a.moveStart("character",c);a.select()}else{b.selectionStart=c;b.selectionEnd=d}this.focus()};$.fn.insertTextAtCaret=function(f,g,h,i){if(typeof i==="undefined")i=true;var a,j,c,l,n,m,k,b,e,d=this[0];this.focus();if(!h)h="";if(typeof d.selectionStart!="number"||typeof d.selectionEnd!="number"){a=document.selection.createRange();c=a.text.length;if(i){if(a.text[0]==" "){f=" "+f;a=a.substring(1,c);c--}if(a.text[c-1]==" "){g=g+" ";a=a.substring(0,c-1);c--}}if(c==0){a.text=f+h+g;if(h.length==0){b=e=this.getCursorPosition()-g.length;this.highlightText(b,e)}else{e=this.getCursorPosition()-g.length;b=e-h.length;this.highlightText(b,e)}}else{a.text=f+a.text+g;b=this.getCursorPosition()+f.length;e=b+f.length+c-1;this.highlightText(b,e)}this.focus();return e}else{b=d.selectionStart;e=d.selectionEnd;k=d.scrollTop;a=d.value.substring(b,e);c=a.length;if(i){if(a[0]==" "){f=" "+f;a=a.substring(1,c)}if(a[c-1]==" "){g=g+" ";a=a.substring(0,c-1)}}if(b==e)j=h;else j=a;d.value=d.value.substring(0,b)+f+j+g+d.value.substring(e,d.value.length);this.highlightText(b+f.length,b+f.length+j.length);d.scrollTop=k;this.focus();return d.selectionEnd}};CodePlexPaging=new function(){var a,c,b;this.initialize=function(b,a){this._parameterCallbackMethod=b;this._useIndex0=a===undefined?false:a};this.gotoPage=function(c,b){var a=this._getParameters().replace(/(?:\?|&)?page=\d+/g,""),d=this._getQuerystringSeparator(a);CodePlex.UpdateProgress.delayShow();if(b>0||this._useIndex0)location.href=c+a+d+"page="+b;else location.href=c+a};this.loadPage=function(a,d,c){var b=this._getParameters(),e=this._getQuerystringSeparator(b);CodePlex.UpdateProgress.delayShow();if(c>0||this._useIndex0)a=a+b+e+"page="+c;else a=a+b;$("#"+d).load(a,null,function(){CodePlex.UpdateProgress.hide()})};this.gotoPageSize=function(d,c){var a=this._getParameters().replace(/(?:\?|&)?(?:page|size)=\d+/g,""),b=this._getQuerystringSeparator(a);CodePlex.UpdateProgress.delayShow();location.href=d+a+b+"size="+c};this._getParameters=function(){this._parameters="";if(this._parameterCallbackMethod!=null)eval("this._parameters = "+this._parameterCallbackMethod+"();");return this._parameters};this._getQuerystringSeparator=function(b){var a="?";if(b.length>0)a="&";return a}};MultiFileUpload=function(b,a){this._namePrefix=b;this._iconPathFormat=a};MultiFileUpload.prototype={render:function(a){this.baseContainer=a;var b=document.createElement("tr");this._renderToTableRow(a.appendChild(b),this._namePrefix)},_renderToTableRow:function(b,a){var d=b.insertCell(0),e=b.insertCell(1),c=b.insertCell(2);this._renderFilenameTemplate(d,a);var f=this._renderLocationTemplate(c,a),g=this._renderRecommendedTemplate(c,a);this._renderTypeTemplate(e,a);$(f).change(function(){$("#IsClickOnce:checked").length==0&&$(g).css("display","inline")})},_renderRecommendedTemplate:function(d,c){var b=$('<a href="#" onclick="return MultiFileUpload.toggleMarkNewAsRecommended(this);" class="RecommendedLink" style="display: none;">Mark as Recommended</a>');b[0].id=b[0].name=c+"_MarkAsRecommended";var a=document.createElement("input");a.id=a.name=c+"_Recommended";a.setAttribute("type","hidden");a.className="RecommendedValue";a.setAttribute("value","false");d.appendChild(b[0]);d.appendChild(a);return b},_renderFilenameTemplate:function(c,b){var a=document.createElement("input");a.setAttribute("type","text");a.id=a.name=b+"_Filename";a.className="MutiFileHeight";a.maxLength=80;c.appendChild(a)},_renderLocationTemplate:function(f,a){var b=$('<input type="file" />');b.attr("id",a+"_Location");b.attr("name",a+"_Location");if(CodePlex.UI.isIE){$(f).append(b);return b}var d=$('<input type="text" readonly="readonly" />');d.attr("id",a+"_Location_text");d.attr("name",a+"_Location_text");d.bind("click",function(){$("#"+a+"_Location").click()});b.bind("change",function(){$("#"+a+"_Location_text").val($(this).val())});var e=$('<div style="height:0;width:0;overflow:hidden;"></div>');e.append(b);var c=$('<input type="button" class="ok" value="browse..." />');c.attr("id",a+"_Location_button");c.attr("name",a+"_Location_button");c.bind("click",function(){$("#"+a+"_Location").click()});var g=$('<div class="file_input"></div>').append(d).append(e).append(c).append($('<div class="clear"></div>'));$(f).append(g);return b},_renderTypeTemplate:function(c,b){var a=this.typeSelect=document.createElement("select");a.multiple=false;a.id=a.name=b+"_Type";a.className="MultiFileHeight";a.onchange=createDelegate(this,this._renderTypeIconTemplate);this._renderTypeItem(a,"Application (Runtime Binary)","RuntimeBinary");this._renderTypeItem(a,"Source Code","SourceCode");this._renderTypeItem(a,"Documentation","Documentation");this._renderTypeItem(a,"Example","Example");c.appendChild(a)},_renderTypeItem:function(b,d,c){var a=document.createElement("option");a.text=d;a.value=c;b.options.add(a)}};MultiFileUpload._fileCount=1;MultiFileUpload.getFileCount=function(){return MultiFileUpload._fileCount};MultiFileUpload.getNextNamePrefix=function(a){return a+"_"+MultiFileUpload.getFileCount()};MultiFileUpload.addFileToTable=function(b,d,c){var a;if(b)a=$("#"+b)[0];if(a){if(a.tBodies&&a.tBodies.length)a=a.tBodies[0];MultiFileUpload._fileCount++;var e=new MultiFileUpload(d,c);e.render(a)}};MultiFileUpload.init=function(){$("#MultiFileUpload_0_Location").change(function(){$("#IsClickOnce:checked").length==0&&$("#MultiFileUpload_0_MarkAsRecommended").css("display","inline")});if(this.noUploadedFiles()){$(".RecommendedLink").html("Remove as Default");$(".RecommendedValue").val("true")}$("#IsClickOnce").click(function(){if($("#IsClickOnce:checked").length>0){$(".RecommendedValue").val("false");$(".RecommendedLink").text("Mark as Recommended").hide();$(".markAsRecommendedContainer").hide().children("a").text("Mark as Recommended");$(".currentRecommendedContainer").hide();$("#MarkedAsRecommended").val("")}else if($("#CurrentRecommendedFile").length===1){$(".markAsRecommendedContainer").show();$("#MarkedAsRecommended").val($("#CurrentRecommendedFile").val());var a=$(".markAsRecommendedContainer[fileId='"+$("#CurrentRecommendedFile").val()+"']");a.parents("div.FileListItemDiv").children(".currentRecommendedContainer").css("display","inline").attr("d:isCurrent","true");a.children("a").html("Remove as Default")}else $('.file_input input[type="text"]').each(function(c,b){var a=$(b);if(c==1&&$(".FileListItemDiv").length<2){a.parent().parent().children(".RecommendedValue").val("true");a.parent().parent().children(".RecommendedLink").text("Remove as Default")}a.val().length>1&&a.parent().parent().children(".RecommendedLink").css("display","inline")})})};MultiFileUpload.noUploadedFiles=function(){return $(".FileListItemDiv").length+$("#IsClickOnce:checked").length<1};MultiFileUpload.markFileForDeletion=function(e,b,d){var a=$(e).parents("div.FileListItemDiv");if(a.hasClass("FileListItemDeleted"))return false;a.attr("d:EditMode")==="true"&&this.toggleUploadVersionState(a.find("a.Replace"),b,d);var c=$("#MarkedForDeletion");if(c.val().indexOf(b)<0){c.val(c.val().replace(/,$/,"")+b);a.addClass("FileListItemDeleted")}return false};MultiFileUpload.toggleMarkAsRecommended=function(d){var a=$(d),c=a.parents("div.FileListItemDiv").children(".currentRecommendedContainer").attr("d:isCurrent");this.setAllFilesNotRecommended();if(c=="true"){$("#MarkedAsRecommended").val("");$("#CurrentRecommendedFile").val("")}else{a.parents("div.FileListItemDiv").children(".currentRecommendedContainer").css("display","inline").attr("d:isCurrent","true");a.html("Remove as Default");var b=a.parents().attr("fileId");$("#MarkedAsRecommended").val(b);$("#CurrentRecommendedFile").val(b)}return false};MultiFileUpload.setAllFilesNotRecommended=function(){$(".markAsRecommendedContainer").children("a").html("Mark as Recommended");$(".currentRecommendedContainer").css("display","none").attr("d:isCurrent","false");var a=$(".RecommendedValue");$(".RecommendedLink").html("Mark as Recommended");$(".RecommendedValue").val("false")};MultiFileUpload.toggleMarkNewAsRecommended=function(d){var b=$(d),a=b.parent().children(".RecommendedValue"),c=a.val();this.setAllFilesNotRecommended();if(c!=="true"){b.html("Remove as Default");a.val("true");$("#MarkedAsRecommended").val("")}return false};MultiFileUpload.toggleUploadVersionState=function(k,t,s){var b=$(k).parents("div.FileListItemDiv");if(b.hasClass("FileListItemDeleted"))return false;var y=b.attr("id").match(/.+(\d+)/),j=y[1],m="#editItemInfo"+j,q=b.attr("d:EditMode"),p=b.children("img.FileTypeImage"),h=b.children("a.FileNameLink"),f=b.children("span.currentRecommendedContainer"),g=b.find("span.FileListItemInfo"),l=$("#markAsRecommended"+j),o=$("#delete"+j);if(q===undefined||q==="false"){$(k).text("Cancel");p.hide();h.hide();f.hide();g.hide();l.hide();o.hide();var a=h.attr("id");$(m).addClass("linkPosition");var w=$('<input type="hidden" name="'+a+'_Type" value="'+s+'" class="dynamic" />'),x=$('<input type="hidden" name="'+a+'_ID" value="'+t+'" class="dynamic" />'),r=$('<div class="MultiFileUpload dynamic" />'),u=$('<table border="0" cellpadding="0" cellspacing="0" style="float:left;"><tr><th>Name</th><th>Location</th></tr></table>').appendTo(r),v=$("<input type='text' maxlength='80' />").attr("id",a+"_Filename").attr("name",a+"_Filename"),e=$('<input type="text" readonly="readonly" />');e.attr("id",a+"_Location_text");e.attr("name",a+"_Location_text");e.bind("click",function(){$("#"+a+"_Location").click()});var c=$('<input type="file" />');c.attr("id",a+"_Location");c.attr("name",a+"_Location");var i;if(!CodePlex.UI.isIE){c.bind("change",function(){$("#"+a+"_Location_text").val($(this).val())});var n=$('<div style="height:0;width:0;overflow:hidden;"></div>');n.append(c);var d=$('<input type="button" class="ok" value="browse..." />');d.attr("id",a+"_Location_button");d.attr("name",a+"_Location_button");d.bind("click",function(){$("#"+a+"_Location").click()});i=$('<div class="file_input"></div>').append(e).append(n).append(d).append($('<div class="clear"></div>'))}else i=c;$("<tr />").append($("<td />").append(v)).append($("<td />").append(i)).appendTo(u);g.parent().prepend(r).prepend(x).prepend(w);b.attr("d:EditMode","true")}else{$(k).text("Replace");$(b).find(".dynamic").remove();p.show();h.show();l.show();o.show();$(m).removeClass("linkPosition");f.attr("d:isCurrent")==="true"&&f.show();g.show();b.attr("d:EditMode","false")}return false};(function(a){a.fn.promptBox=function(b){return this.each(function(){new a.promptBox(this,b)})};a.promptBox=function(b,a){this.textBox=b;this.watermarkText=a;this.init()};a.promptBox.fn=a.promptBox.prototype={};a.promptBox.fn.extend=a.promptBox.extend=a.extend;a.promptBox.fn.extend({init:function(){this.css="EmptyTextBox";this.initTextBox();this.registerEvents()},initTextBox:function(){$(this.textBox).addClass(this.css);$(this.textBox).val(this.watermarkText)},focusHandler:function(a){!a.data.dirty&&$(a.data.textBox).val("");$(a.data.textBox).removeClass(a.data.css)},blurHandler:function(a){var b=$(a.data.textBox).val();a.data.dirty=b.length>0&&b!=a.data.watermarkText;$(a.data.textBox).attr("dirty",a.data.dirty);!a.data.dirty&&a.data.initTextBox()},submitHandler:function(a){$keyCode(a)==13&&!a.data.dirty&&$(a.data.textBox).val("")},keyHandler:function(a){switch(a.keyCode){case 13:a.data.blurHandler(a);break;case 27:$(a.data.textBox).val("");$(a.data.textBox).blur();break}},registerEvents:function(){$(this.textBox).bind("focus",this,this.focusHandler).bind("blur",this,this.blurHandler).bind("keydown",this,this.keyHandler).bind("keypress",this,this.submitHandler)}})})(jQuery);function TimezoneCookieExists(){var b=false,c=new Date,a=getCookie("TimezoneOffset");if(a!=null&&a==c.getTimezoneOffset()/60*-1&&!firstTimeSetTimezoneCookie)b=true;return b}function SmartDate_Load(){if(TimezoneCookieExists())return;for(var f=document.getElementsByTagName("abbr"),d=new Array(f.length),a=0;a<f.length;a++)d[a]=f[a].parentNode;for(var a=0;a<d.length;a++){for(var c=d[a].className.split(" "),k=false,b=0;b<c.length;b++)if(c[b]=="smartDate"){k=true;break}if(k){for(var i=false,e=false,j=false,l=false,b=0;b<c.length;b++){if(c[b]=="full"){i=true;break}if(c[b]=="dateOnly"){e=true;break}if(c[b]=="timeOnly"){j=true;break}if(c[b]=="dateOnlyNoShort"){e=true;l=true}}var m=parseInt(d[a].attributes.LocalTimeTicks.value);if(m!=Number.NaN){var h=false,g=false;if(d[a].getAttribute("BreakDateTime"))h=true;if(d[a].getAttribute("BreakAfterAtDateTime"))g=true;d[a].innerHTML=SmartDate_FormatTimestamp(m,i,e,j,l,h,g)}}}var f=null,d=null}function SmartDate_FormatTimestamp(k,b,h,i,j,g,f){var e=new Date(k*1e3),d=SmartDate_FormatTime(e,b),c=SmartDate_FormatDate(e,b,j),a="";if(c.length>0)a=c;if(h)return a;if(i)a="";if(d.length>0){if(a.length>0){if(g)a+="<br />";a+=" at ";if(f)a+="<br />"}a+=d}return a}function SmartDate_FormatTime(b,e){var a=b.getHours(),d=b.getMinutes(),c=a<12?"AM":"PM";if(a==0&&d==0&&b.getSeconds()==0&&b.getMilliseconds()==0)return"";if(a>12)a=a-12;if(a==0)a=12;return a+":"+SmartDate_ZeroPadNumber(b.getMinutes(),2)+" "+c}function SmartDate_FormatDate(f,j,k){var e=f.getFullYear(),d=f.getMonth(),b=f.getDate(),i=f.getDay(),h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(j)return h[i]+" "+g[d]+" "+b+" "+e;else{var a=new Date,c="";if(!k){if(a.getFullYear()==e&&a.getMonth()==d&&a.getDate()==b)c="Today";else if(a.getFullYear()==e&&a.getMonth()==d&&(a.getDate()>b&&a.getDate()-6<b||b>a.getDate()&&b-6<a.getDate()))c=h[i];else if(a.getFullYear()==e)c=g[d]+" "+b;else c=g[d]+" "+b+" "+e;return c}c=g[d]+" "+b+" "+e;return c}}function SmartDate_ZeroPadNumber(d,c){for(var a=""+d+"",b=0;b<c-a.length;b++)a="0"+a;return a}function SmartDate_AjaxLoad(){var a=$object("_PageRequestManager");a.propertyChanged.add(SmartDate_RequestManagerPropertyChanged)}function SmartDate_RequestManagerPropertyChanged(a,b){b.get_propertyName()=="inPostBack"&&!a.get_inPostBack()&&SmartDate_Load()};var UpdateProgress_Hide,UpdateProgress_DelayTimer,DefaultText="Working...";CodePlex.UpdateProgress=new function(){var u,j,v,t,b,e,w,a;this.initialize=function(c){if(e===c)return;u=this;a=[];e=c;v=$.browser.mozilla;j=$.browser.msie&&$.browser.version<7;t=!j&&typeof document.documentElement.scrollLeft!="undefined"?document.documentElement:document.body;if(d()){n();h.apply(b,[null])}};this.show=f;this.reset=l;this.displayPanelAndDisableControls=k;this.delayShow=r;this.hidePanelAndEnableControls=o;this.hide=g;this.showWithCustomText=m;function o(d,e){g();for(var b=0;b<a.length;b++)if(a[b]){if(a[b].disabled)a[b].disabled=false;var c=a[b].saveClick;if(c){a[b].onclick=c;a[b].saveClick=null}}}function k(d){c(d);f(true);for(var b=1;b<arguments.length;b++)try{if(arguments[b]){arguments[b].disabled=true;if(arguments[b].onclick){arguments[b].saveClick=arguments[b].onclick;arguments[b].onclick=function(){return false}}a[b-1]=arguments[b]}}catch(e){}}function r(a){if(!a||a<=0)a=2e3;if(UpdateProgress_DelayTimer!=null){window.clearTimeout(UpdateProgress_DelayTimer);UpdateProgress_DelayTimer=null}c(DefaultText);UpdateProgress_DelayTimer=window.setTimeout(this.show,a)}function g(){if(UpdateProgress_DelayTimer!=null){window.clearTimeout(UpdateProgress_DelayTimer);UpdateProgress_DelayTimer=null}f(false);c(DefaultText)}function c(a){$("#UpdateProgressText").html(a)}function f(a){c(DefaultText);h();if(d())if(a||arguments.length==0){b.dialog("open");$(".ui-widget-overlay").addClass("loading")}else{b.dialog("close");$(".ui-widget-overlay").removeClass("loading")}$("#animatedLoadingIcon").detach().appendTo("#animatedLoadingIconContainer")}function m(a,b){c(b);f(a)}function d(){if(!e)return false;if(!b)b=$("#"+e).dialog({autoOpen:false,modal:true,closeOnEscape:false});return!!b}function h(a,b,c){i(a,b,c)}function l(a,b){g();i(a);if(!d())return}function p(c,b,a){return function(){for(var d=0;d<arguments.length;d++)a[a.length]=arguments[d];if(b)return b.apply(c,a)}}function i(e){if(typeof e!="function")return;for(var a=[],c=1;c<arguments.length;c++)a[a.length]=arguments[c];d()&&p(b,e,a)()}function s(d,a){if(!a||!a.nodeType)return null;for(var b=0;b<a.childNodes.length;b++){if(a.childNodes[b].id==d)return a.childNodes[b];var c=s(d,a.childNodes[b]);if(c)return c}return null}function n(){$(document).bind("keydown",q)}function q(a){if(d()&&b.is(":visible")){a.preventDefault&&a.preventDefault();a.stopPropagation&&a.stopPropagation();return a.returnValue=false}}};function openPreviewWikiWindow(a){newWindow=window.open(a,"Print","toolbar=0, menubar=0, location=0, status=0, scrollbars=1, resizable=1")}function printWiki(){parent.print()}function closeWiki(){try{parent.focus();parent.close()}catch(a){}}(function(a){var b={allowJsonSave:false,allowEmpty:false,version:0,initialParentWikiTitle:"Home",cancelRedirectUrl:"",wikiActionUrl:"",saveActionUrl:"",initialWikiContent:"",emptyErrorMessage:"Wiki content cannot be empty. Please enter content for the wiki page.",emptyTitleErrorMessage:"Wiki page title cannot be empty. Please enter a title.",tooManyCharactersInTitleErrorMessage:"Wiki page title cannot have more than 255 characters.",invalidCharactersInTitleErrorMessage:"Wiki page title cannot contain the # or | characters."};a.fn.wikiContent=function(c){c=a.extend({},b,c);return this.each(function(){new a.wikiContent(this,c)})};a.wikiContent=function(b,a){this.element=b;this.settings=a;this.init()};a.wikiContent.fn=a.wikiContent.prototype={};a.wikiContent.fn.extend=a.wikiContent.extend=a.extend;a.wikiContent.fn.extend({init:function(){this.initContent();a(this.element).bind("editPersonalStatement",this,function(a){a.data.editPersonalStatement()});a(this.element).bind("saveWiki",this,function(a){a.data.save()});a(this.element).bind("cancelWiki",this,function(a){a.data.cancel()});this.bindContainerEvents()},initContent:function(){this.wikiContent=this.settings.initialWikiContent;this.parentWikiTitle=this.settings.initialParentWikiTitle},editPersonalStatement:function(){this.post("Edit",false,function(a){this.sourceObject.onPersonalStatementLoad(a)})},onPersonalStatementLoad:function(b){this.updatePersonalStatement(b);a(".tab_control").enhanceTabs()},updatePersonalStatement:function(b){a("#personalStatement").html(b);this.bindContainerEvents();this.completeSuccess()},onUpdatePreview:function(a){this.sourceObject.updatePreview(a)},updatePreview:function(c){var b=a("#preview_tab_content");a(b).html(c.Message);this.bindContainerEvents();this.completeSuccess()},onPreviewFailure:function(){a("#preview_tab_content").html("Preview not available at this time.");CodePlex.UpdateProgress.hide()},completeSuccess:function(){CodePlex.UpdateProgress.hide()},bindContainerEvents:function(){a("#previewLink",a(this.element)).unbind("click.post").bind("click.post",this,function(a){a.data.preview(a)});a("#saveWikiButton").unbind("click.post").bind("click.post",this,function(b){suppressUnsavedData();a(b.data.element).trigger("saveWiki");return false});a("#cancelWikiButton").unbind("click.post").bind("click.post",this,function(b){suppressUnsavedData();a(b.data.element).trigger("cancelWiki");return false})},preview:function(b){if(a("#preview_tab_content").is(":visible"))return;if(this.validate(true))this.post("Preview");else b.stopPropagation()},validate:function(c){this.updateContentFromForm();var b=true;if(!this.settings.allowEmpty){a("#wikiTitleError").hide();a("#wikiError").hide();if((this.editType===null||this.editType==="Wiki")&&a.trim(this.wikiContent).length===0){a("#wikiError").html(this.settings.emptyErrorMessage).show();b=false}if(this.editType==="Html"&&a.trim(this.htmlContent).length===0){a("#wikiError").html(this.settings.emptyErrorMessage).show();b=false}if(!c&&a.trim(this.wikiPageTitle).length>255){a("#wikiTitleError").html(this.settings.tooManyCharactersInTitleErrorMessage).show();b=false}if(!c&&/[\#\|]/.test(this.wikiPageTitle)){a("#wikiTitleError").html(this.settings.invalidCharactersInTitleErrorMessage).show();b=false}if(!c&&this.settings.isNewPage&&(!this.wikiPageTitle||a.trim(this.wikiPageTitle).length===0)){a("#wikiTitleError").html(this.settings.emptyTitleErrorMessage).show();b=false}return b}return true},updateContentFromForm:function(){var c=a("#inputText",a(this.element)).val();if(c!=undefined)this.wikiContent=c;if(typeof tinymce!="undefined"&&tinymce.activeEditor!==null)this.htmlContent=tinymce.activeEditor.getContent();var d=a('input[name="EditType"]:checked').val();if(d!=undefined)this.editType=d;var b=a("#parentWikiTitle").val();if(b&&b.length)this.parentWikiTitle=b;var e=a("#WikiPageTitle").val();if(e!=undefined)this.wikiPageTitle=e},post:function(b,e,c){var d,f,g;if(e===undefined)e=false;if(this.settings.allowJsonSave&&b==="Save"||b==="Preview")d="json";else d="html";g=this.settings.wikiActionUrl;if(this.settings.allowJsonSave&&b==="Save")g=this.settings.saveActionUrl;if(c===undefined)c=this.onUpdatePreview;CodePlex.UpdateProgress.show();f={WikiAction:b,IsNewPage:this.settings.isNewPage,Version:this.settings.version,EditType:this.editType,WikiContent:this.wikiContent,HtmlContent:this.htmlContent,ParentWikiTitle:this.parentWikiTitle,ForceOverwrite:e};if(this.wikiPageTitle)f.title=this.wikiPageTitle;a.ajax({data:f,type:"POST",url:g,success:c,error:this.onPreviewFailure,sourceObject:this,dataType:d})},save:function(b){if(b===undefined)b=false;a("#wikiError").hide();this.validate()&&this.post("Save",b,function(a){this.sourceObject.saveSuccess(a)})},saveSuccess:function(b){if(typeof b==="object"){this.completeSuccess();if(b.IsError)if(/page title/.test(b.Message))a("#wikiTitleError").text(b.Message).show();else a("#wikiError").text(b.Message).show();else if(b.RequireConcurrencyPrompt)confirm("You are not editing the latest version of this page. If you continue, you will overwrite the latest version. Are you sure you want to overwrite the changes?")&&this.save(true);else{disableUnsavedData();location.href=b.RedirectUrl}}else this.updatePersonalStatement(b)},cancel:function(){if(this.settings.cancelRedirectUrl&&this.settings.cancelRedirectUrl.length){disableUnsavedData();location.href=this.settings.cancelRedirectUrl}else{this.post("View",false,function(a){this.sourceObject.onPersonalStatementLoad(a)});this.initContent()}}})})(jQuery);if(!document.createElement("canvas").getContext){(function(){var z=Math;var K=z.round;var J=z.sin;var U=z.cos;var b=z.abs;var k=z.sqrt;var D=10;var F=D/2;function T(){return this.context_||(this.context_=new W(this))}var O=Array.prototype.slice;function G(i,j,m){var Z=O.call(arguments,2);return function(){return i.apply(j,Z.concat(O.call(arguments)))}}function AD(Z){return String(Z).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function r(i){if(!i.namespaces.g_vml_){i.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML")}if(!i.namespaces.g_o_){i.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML")}if(!i.styleSheets.ex_canvas_){var Z=i.createStyleSheet();Z.owningElement.id="ex_canvas_";Z.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}r(document);var E={init:function(Z){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var i=Z||document;i.createElement("canvas");i.attachEvent("onreadystatechange",G(this.init_,this,i))}},init_:function(m){var j=m.getElementsByTagName("canvas");for(var Z=0;Z<j.length;Z++){this.initElement(j[Z])}},initElement:function(i){if(!i.getContext){i.getContext=T;r(i.ownerDocument);i.innerHTML="";i.attachEvent("onpropertychange",S);i.attachEvent("onresize",w);var Z=i.attributes;if(Z.width&&Z.width.specified){i.style.width=Z.width.nodeValue+"px"}else{i.width=i.clientWidth}if(Z.height&&Z.height.specified){i.style.height=Z.height.nodeValue+"px"}else{i.height=i.clientHeight}}return i}};function S(i){var Z=i.srcElement;switch(i.propertyName){case"width":Z.getContext().clearRect();Z.style.width=Z.attributes.width.nodeValue+"px";Z.firstChild.style.width=Z.clientWidth+"px";break;case"height":Z.getContext().clearRect();Z.style.height=Z.attributes.height.nodeValue+"px";Z.firstChild.style.height=Z.clientHeight+"px";break}}function w(i){var Z=i.srcElement;if(Z.firstChild){Z.firstChild.style.width=Z.clientWidth+"px";Z.firstChild.style.height=Z.clientHeight+"px"}}E.init();var I=[];for(var AC=0;AC<16;AC++){for(var AB=0;AB<16;AB++){I[AC*16+AB]=AC.toString(16)+AB.toString(16)}}function V(){return[[1,0,0],[0,1,0],[0,0,1]]}function d(m,j){var i=V();for(var Z=0;Z<3;Z++){for(var AF=0;AF<3;AF++){var p=0;for(var AE=0;AE<3;AE++){p+=m[Z][AE]*j[AE][AF]}i[Z][AF]=p}}return i}function Q(i,Z){Z.fillStyle=i.fillStyle;Z.lineCap=i.lineCap;Z.lineJoin=i.lineJoin;Z.lineWidth=i.lineWidth;Z.miterLimit=i.miterLimit;Z.shadowBlur=i.shadowBlur;Z.shadowColor=i.shadowColor;Z.shadowOffsetX=i.shadowOffsetX;Z.shadowOffsetY=i.shadowOffsetY;Z.strokeStyle=i.strokeStyle;Z.globalAlpha=i.globalAlpha;Z.font=i.font;Z.textAlign=i.textAlign;Z.textBaseline=i.textBaseline;Z.arcScaleX_=i.arcScaleX_;Z.arcScaleY_=i.arcScaleY_;Z.lineScale_=i.lineScale_}var B={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"};function g(i){var m=i.indexOf("(",3);var Z=i.indexOf(")",m+1);var j=i.substring(m+1,Z).split(",");if(j.length==4&&i.substr(3,1)=="a"){alpha=Number(j[3])}else{j[3]=1}return j}function C(Z){return parseFloat(Z)/100}function N(i,j,Z){return Math.min(Z,Math.max(j,i))}function c(AF){var j,i,Z;h=parseFloat(AF[0])/360%360;if(h<0){h++}s=N(C(AF[1]),0,1);l=N(C(AF[2]),0,1);if(s==0){j=i=Z=l}else{var m=l<0.5?l*(1+s):l+s-l*s;var AE=2*l-m;j=A(AE,m,h+1/3);i=A(AE,m,h);Z=A(AE,m,h-1/3)}return"#"+I[Math.floor(j*255)]+I[Math.floor(i*255)]+I[Math.floor(Z*255)]}function A(i,Z,j){if(j<0){j++}if(j>1){j--}if(6*j<1){return i+(Z-i)*6*j}else{if(2*j<1){return Z}else{if(3*j<2){return i+(Z-i)*(2/3-j)*6}else{return i}}}}function Y(Z){var AE,p=1;Z=String(Z);if(Z.charAt(0)=="#"){AE=Z}else{if(/^rgb/.test(Z)){var m=g(Z);var AE="#",AF;for(var j=0;j<3;j++){if(m[j].indexOf("%")!=-1){AF=Math.floor(C(m[j])*255)}else{AF=Number(m[j])}AE+=I[N(AF,0,255)]}p=m[3]}else{if(/^hsl/.test(Z)){var m=g(Z);AE=c(m);p=m[3]}else{AE=B[Z]||Z}}}return{color:AE,alpha:p}}var L={style:"normal",variant:"normal",weight:"normal",size:10,family:"sans-serif"};var f={};function X(Z){if(f[Z]){return f[Z]}var m=document.createElement("div");var j=m.style;try{j.font=Z}catch(i){}return f[Z]={style:j.fontStyle||L.style,variant:j.fontVariant||L.variant,weight:j.fontWeight||L.weight,size:j.fontSize||L.size,family:j.fontFamily||L.family}}function P(j,i){var Z={};for(var AF in j){Z[AF]=j[AF]}var AE=parseFloat(i.currentStyle.fontSize),m=parseFloat(j.size);if(typeof j.size=="number"){Z.size=j.size}else{if(j.size.indexOf("px")!=-1){Z.size=m}else{if(j.size.indexOf("em")!=-1){Z.size=AE*m}else{if(j.size.indexOf("%")!=-1){Z.size=(AE/100)*m}else{if(j.size.indexOf("pt")!=-1){Z.size=m/0.75}else{Z.size=AE}}}}}Z.size*=0.981;return Z}function AA(Z){return Z.style+" "+Z.variant+" "+Z.weight+" "+Z.size+"px "+Z.family}function t(Z){switch(Z){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function W(i){this.m_=V();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=D*1;this.globalAlpha=1;this.font="10px sans-serif";this.textAlign="left";this.textBaseline="alphabetic";this.canvas=i;var Z=i.ownerDocument.createElement("div");Z.style.width=i.clientWidth+"px";Z.style.height=i.clientHeight+"px";Z.style.overflow="hidden";Z.style.position="absolute";i.appendChild(Z);this.element_=Z;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var M=W.prototype;M.clearRect=function(){if(this.textMeasureEl_){this.textMeasureEl_.removeNode(true);this.textMeasureEl_=null}this.element_.innerHTML=""};M.beginPath=function(){this.currentPath_=[]};M.moveTo=function(i,Z){var j=this.getCoords_(i,Z);this.currentPath_.push({type:"moveTo",x:j.x,y:j.y});this.currentX_=j.x;this.currentY_=j.y};M.lineTo=function(i,Z){var j=this.getCoords_(i,Z);this.currentPath_.push({type:"lineTo",x:j.x,y:j.y});this.currentX_=j.x;this.currentY_=j.y};M.bezierCurveTo=function(j,i,AI,AH,AG,AE){var Z=this.getCoords_(AG,AE);var AF=this.getCoords_(j,i);var m=this.getCoords_(AI,AH);e(this,AF,m,Z)};function e(Z,m,j,i){Z.currentPath_.push({type:"bezierCurveTo",cp1x:m.x,cp1y:m.y,cp2x:j.x,cp2y:j.y,x:i.x,y:i.y});Z.currentX_=i.x;Z.currentY_=i.y}M.quadraticCurveTo=function(AG,j,i,Z){var AF=this.getCoords_(AG,j);var AE=this.getCoords_(i,Z);var AH={x:this.currentX_+2/3*(AF.x-this.currentX_),y:this.currentY_+2/3*(AF.y-this.currentY_)};var m={x:AH.x+(AE.x-this.currentX_)/3,y:AH.y+(AE.y-this.currentY_)/3};e(this,AH,m,AE)};M.arc=function(AJ,AH,AI,AE,i,j){AI*=D;var AN=j?"at":"wa";var AK=AJ+U(AE)*AI-F;var AM=AH+J(AE)*AI-F;var Z=AJ+U(i)*AI-F;var AL=AH+J(i)*AI-F;if(AK==Z&&!j){AK+=0.125}var m=this.getCoords_(AJ,AH);var AG=this.getCoords_(AK,AM);var AF=this.getCoords_(Z,AL);this.currentPath_.push({type:AN,x:m.x,y:m.y,radius:AI,xStart:AG.x,yStart:AG.y,xEnd:AF.x,yEnd:AF.y})};M.rect=function(j,i,Z,m){this.moveTo(j,i);this.lineTo(j+Z,i);this.lineTo(j+Z,i+m);this.lineTo(j,i+m);this.closePath()};M.strokeRect=function(j,i,Z,m){var p=this.currentPath_;this.beginPath();this.moveTo(j,i);this.lineTo(j+Z,i);this.lineTo(j+Z,i+m);this.lineTo(j,i+m);this.closePath();this.stroke();this.currentPath_=p};M.fillRect=function(j,i,Z,m){var p=this.currentPath_;this.beginPath();this.moveTo(j,i);this.lineTo(j+Z,i);this.lineTo(j+Z,i+m);this.lineTo(j,i+m);this.closePath();this.fill();this.currentPath_=p};M.createLinearGradient=function(i,m,Z,j){var p=new v("gradient");p.x0_=i;p.y0_=m;p.x1_=Z;p.y1_=j;return p};M.createRadialGradient=function(m,AE,j,i,p,Z){var AF=new v("gradientradial");AF.x0_=m;AF.y0_=AE;AF.r0_=j;AF.x1_=i;AF.y1_=p;AF.r1_=Z;return AF};M.drawImage=function(AO,j){var AH,AF,AJ,AV,AM,AK,AQ,AX;var AI=AO.runtimeStyle.width;var AN=AO.runtimeStyle.height;AO.runtimeStyle.width="auto";AO.runtimeStyle.height="auto";var AG=AO.width;var AT=AO.height;AO.runtimeStyle.width=AI;AO.runtimeStyle.height=AN;if(arguments.length==3){AH=arguments[1];AF=arguments[2];AM=AK=0;AQ=AJ=AG;AX=AV=AT}else{if(arguments.length==5){AH=arguments[1];AF=arguments[2];AJ=arguments[3];AV=arguments[4];AM=AK=0;AQ=AG;AX=AT}else{if(arguments.length==9){AM=arguments[1];AK=arguments[2];AQ=arguments[3];AX=arguments[4];AH=arguments[5];AF=arguments[6];AJ=arguments[7];AV=arguments[8]}else{throw Error("Invalid number of arguments")}}}var AW=this.getCoords_(AH,AF);var m=AQ/2;var i=AX/2;var AU=[];var Z=10;var AE=10;AU.push(" <g_vml_:group",' coordsize="',D*Z,",",D*AE,'"',' coordorigin="0,0"',' style="width:',Z,"px;height:",AE,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var p=[];p.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",K(AW.x/D),",","Dy=",K(AW.y/D),"");var AS=AW;var AR=this.getCoords_(AH+AJ,AF);var AP=this.getCoords_(AH,AF+AV);var AL=this.getCoords_(AH+AJ,AF+AV);AS.x=z.max(AS.x,AR.x,AP.x,AL.x);AS.y=z.max(AS.y,AR.y,AP.y,AL.y);AU.push("padding:0 ",K(AS.x/D),"px ",K(AS.y/D),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",p.join(""),", sizingmethod='clip');")}else{AU.push("top:",K(AW.y/D),"px;left:",K(AW.x/D),"px;")}AU.push(' ">','<g_vml_:image src="',AO.src,'"',' style="width:',D*AJ,"px;"," height:",D*AV,'px"',' cropleft="',AM/AG,'"',' croptop="',AK/AT,'"',' cropright="',(AG-AM-AQ)/AG,'"',' cropbottom="',(AT-AK-AX)/AT,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",AU.join(""))};M.stroke=function(AM){var m=10;var AN=10;var AE=5000;var AG={x:null,y:null};var AL={x:null,y:null};for(var AH=0;AH<this.currentPath_.length;AH+=AE){var AK=[];var AF=false;AK.push("<g_vml_:shape",' filled="',!!AM,'"',' style="position:absolute;width:',m,"px;height:",AN,'px;"',' coordorigin="0,0"',' coordsize="',D*m,",",D*AN,'"',' stroked="',!AM,'"',' path="');var AO=false;for(var AI=AH;AI<Math.min(AH+AE,this.currentPath_.length);AI++){if(AI%AE==0&&AI>0){AK.push(" m ",K(this.currentPath_[AI-1].x),",",K(this.currentPath_[AI-1].y))}var Z=this.currentPath_[AI];var AJ;switch(Z.type){case"moveTo":AJ=Z;AK.push(" m ",K(Z.x),",",K(Z.y));break;case"lineTo":AK.push(" l ",K(Z.x),",",K(Z.y));break;case"close":AK.push(" x ");Z=null;break;case"bezierCurveTo":AK.push(" c ",K(Z.cp1x),",",K(Z.cp1y),",",K(Z.cp2x),",",K(Z.cp2y),",",K(Z.x),",",K(Z.y));break;case"at":case"wa":AK.push(" ",Z.type," ",K(Z.x-this.arcScaleX_*Z.radius),",",K(Z.y-this.arcScaleY_*Z.radius)," ",K(Z.x+this.arcScaleX_*Z.radius),",",K(Z.y+this.arcScaleY_*Z.radius)," ",K(Z.xStart),",",K(Z.yStart)," ",K(Z.xEnd),",",K(Z.yEnd));break}if(Z){if(AG.x==null||Z.x<AG.x){AG.x=Z.x}if(AL.x==null||Z.x>AL.x){AL.x=Z.x}if(AG.y==null||Z.y<AG.y){AG.y=Z.y}if(AL.y==null||Z.y>AL.y){AL.y=Z.y}}}AK.push(' ">');if(!AM){R(this,AK)}else{a(this,AK,AG,AL)}AK.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",AK.join(""))}};function R(j,AE){var i=Y(j.strokeStyle);var m=i.color;var p=i.alpha*j.globalAlpha;var Z=j.lineScale_*j.lineWidth;if(Z<1){p*=Z}AE.push("<g_vml_:stroke",' opacity="',p,'"',' joinstyle="',j.lineJoin,'"',' miterlimit="',j.miterLimit,'"',' endcap="',t(j.lineCap),'"',' weight="',Z,'px"',' color="',m,'" />')}function a(AO,AG,Ah,AP){var AH=AO.fillStyle;var AY=AO.arcScaleX_;var AX=AO.arcScaleY_;var Z=AP.x-Ah.x;var m=AP.y-Ah.y;if(AH instanceof v){var AL=0;var Ac={x:0,y:0};var AU=0;var AK=1;if(AH.type_=="gradient"){var AJ=AH.x0_/AY;var j=AH.y0_/AX;var AI=AH.x1_/AY;var Aj=AH.y1_/AX;var Ag=AO.getCoords_(AJ,j);var Af=AO.getCoords_(AI,Aj);var AE=Af.x-Ag.x;var p=Af.y-Ag.y;AL=Math.atan2(AE,p)*180/Math.PI;if(AL<0){AL+=360}if(AL<0.000001){AL=0}}else{var Ag=AO.getCoords_(AH.x0_,AH.y0_);Ac={x:(Ag.x-Ah.x)/Z,y:(Ag.y-Ah.y)/m};Z/=AY*D;m/=AX*D;var Aa=z.max(Z,m);AU=2*AH.r0_/Aa;AK=2*AH.r1_/Aa-AU}var AS=AH.colors_;AS.sort(function(Ak,i){return Ak.offset-i.offset});var AN=AS.length;var AR=AS[0].color;var AQ=AS[AN-1].color;var AW=AS[0].alpha*AO.globalAlpha;var AV=AS[AN-1].alpha*AO.globalAlpha;var Ab=[];for(var Ae=0;Ae<AN;Ae++){var AM=AS[Ae];Ab.push(AM.offset*AK+AU+" "+AM.color)}AG.push('<g_vml_:fill type="',AH.type_,'"',' method="none" focus="100%"',' color="',AR,'"',' color2="',AQ,'"',' colors="',Ab.join(","),'"',' opacity="',AV,'"',' g_o_:opacity2="',AW,'"',' angle="',AL,'"',' focusposition="',Ac.x,",",Ac.y,'" />')}else{if(AH instanceof u){if(Z&&m){var AF=-Ah.x;var AZ=-Ah.y;AG.push("<g_vml_:fill",' position="',AF/Z*AY*AY,",",AZ/m*AX*AX,'"',' type="tile"',' src="',AH.src_,'" />')}}else{var Ai=Y(AO.fillStyle);var AT=Ai.color;var Ad=Ai.alpha*AO.globalAlpha;AG.push('<g_vml_:fill color="',AT,'" opacity="',Ad,'" />')}}}M.fill=function(){this.stroke(true)};M.closePath=function(){this.currentPath_.push({type:"close"})};M.getCoords_=function(j,i){var Z=this.m_;return{x:D*(j*Z[0][0]+i*Z[1][0]+Z[2][0])-F,y:D*(j*Z[0][1]+i*Z[1][1]+Z[2][1])-F}};M.save=function(){var Z={};Q(this,Z);this.aStack_.push(Z);this.mStack_.push(this.m_);this.m_=d(V(),this.m_)};M.restore=function(){if(this.aStack_.length){Q(this.aStack_.pop(),this);this.m_=this.mStack_.pop()}};function H(Z){return isFinite(Z[0][0])&&isFinite(Z[0][1])&&isFinite(Z[1][0])&&isFinite(Z[1][1])&&isFinite(Z[2][0])&&isFinite(Z[2][1])}function y(i,Z,j){if(!H(Z)){return }i.m_=Z;if(j){var p=Z[0][0]*Z[1][1]-Z[0][1]*Z[1][0];i.lineScale_=k(b(p))}}M.translate=function(j,i){var Z=[[1,0,0],[0,1,0],[j,i,1]];y(this,d(Z,this.m_),false)};M.rotate=function(i){var m=U(i);var j=J(i);var Z=[[m,j,0],[-j,m,0],[0,0,1]];y(this,d(Z,this.m_),false)};M.scale=function(j,i){this.arcScaleX_*=j;this.arcScaleY_*=i;var Z=[[j,0,0],[0,i,0],[0,0,1]];y(this,d(Z,this.m_),true)};M.transform=function(p,m,AF,AE,i,Z){var j=[[p,m,0],[AF,AE,0],[i,Z,1]];y(this,d(j,this.m_),true)};M.setTransform=function(AE,p,AG,AF,j,i){var Z=[[AE,p,0],[AG,AF,0],[j,i,1]];y(this,Z,true)};M.drawText_=function(AK,AI,AH,AN,AG){var AM=this.m_,AQ=1000,i=0,AP=AQ,AF={x:0,y:0},AE=[];var Z=P(X(this.font),this.element_);var j=AA(Z);var AR=this.element_.currentStyle;var p=this.textAlign.toLowerCase();switch(p){case"left":case"center":case"right":break;case"end":p=AR.direction=="ltr"?"right":"left";break;case"start":p=AR.direction=="rtl"?"right":"left";break;default:p="left"}switch(this.textBaseline){case"hanging":case"top":AF.y=Z.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":AF.y=-Z.size/2.25;break}switch(p){case"right":i=AQ;AP=0.05;break;case"center":i=AP=AQ/2;break}var AO=this.getCoords_(AI+AF.x,AH+AF.y);AE.push('<g_vml_:line from="',-i,' 0" to="',AP,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!AG,'" stroked="',!!AG,'" style="position:absolute;width:1px;height:1px;">');if(AG){R(this,AE)}else{a(this,AE,{x:-i,y:0},{x:AP,y:Z.size})}var AL=AM[0][0].toFixed(3)+","+AM[1][0].toFixed(3)+","+AM[0][1].toFixed(3)+","+AM[1][1].toFixed(3)+",0,0";var AJ=K(AO.x/D)+","+K(AO.y/D);AE.push('<g_vml_:skew on="t" matrix="',AL,'" ',' offset="',AJ,'" origin="',i,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',AD(AK),'" style="v-text-align:',p,";font:",AD(j),'" /></g_vml_:line>');this.element_.insertAdjacentHTML("beforeEnd",AE.join(""))};M.fillText=function(j,Z,m,i){this.drawText_(j,Z,m,i,false)};M.strokeText=function(j,Z,m,i){this.drawText_(j,Z,m,i,true)};M.measureText=function(j){if(!this.textMeasureEl_){var Z='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",Z);this.textMeasureEl_=this.element_.lastChild}var i=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(i.createTextNode(j));return{width:this.textMeasureEl_.offsetWidth}};M.clip=function(){};M.arcTo=function(){};M.createPattern=function(i,Z){return new u(i,Z)};function v(Z){this.type_=Z;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}v.prototype.addColorStop=function(i,Z){Z=Y(Z);this.colors_.push({offset:i,color:Z.color,alpha:Z.alpha})};function u(i,Z){q(i);switch(Z){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=Z;break;default:n("SYNTAX_ERR")}this.src_=i.src;this.width_=i.width;this.height_=i.height}function n(Z){throw new o(Z)}function q(Z){if(!Z||Z.nodeType!=1||Z.tagName!="IMG"){n("TYPE_MISMATCH_ERR")}if(Z.readyState!="complete"){n("INVALID_STATE_ERR")}}function o(Z){this.code=this[Z];this.message=Z+": DOM Exception "+this.code}var x=o.prototype=new Error;x.INDEX_SIZE_ERR=1;x.DOMSTRING_SIZE_ERR=2;x.HIERARCHY_REQUEST_ERR=3;x.WRONG_DOCUMENT_ERR=4;x.INVALID_CHARACTER_ERR=5;x.NO_DATA_ALLOWED_ERR=6;x.NO_MODIFICATION_ALLOWED_ERR=7;x.NOT_FOUND_ERR=8;x.NOT_SUPPORTED_ERR=9;x.INUSE_ATTRIBUTE_ERR=10;x.INVALID_STATE_ERR=11;x.SYNTAX_ERR=12;x.INVALID_MODIFICATION_ERR=13;x.NAMESPACE_ERR=14;x.INVALID_ACCESS_ERR=15;x.VALIDATION_ERR=16;x.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=E;CanvasRenderingContext2D=W;CanvasGradient=v;CanvasPattern=u;DOMException=o})()};(function(){jQuery.color={};jQuery.color.make=function(c,d,f,e){var b={};b.r=c||0;b.g=d||0;b.b=f||0;b.a=e!=null?e:1;b.add=function(g,h){for(var j=0;j<g.length;++j){b[g.charAt(j)]+=h}return b.normalize()};b.scale=function(g,h){for(var j=0;j<g.length;++j){b[g.charAt(j)]*=h}return b.normalize()};b.toString=function(){if(b.a>=1){return"rgb("+[b.r,b.g,b.b].join(",")+")"}else{return"rgba("+[b.r,b.g,b.b,b.a].join(",")+")"}};b.normalize=function(){function g(j,h,k){return h<j?j:(h>k?k:h)}b.r=g(0,parseInt(b.r),255);b.g=g(0,parseInt(b.g),255);b.b=g(0,parseInt(b.b),255);b.a=g(0,b.a,1);return b};b.clone=function(){return jQuery.color.make(b.r,b.b,b.g,b.a)};return b.normalize()};jQuery.color.extract=function(c,d){var b;do{b=c.css(d).toLowerCase();if(b!=""&&b!="transparent"){break}c=c.parent()}while(!jQuery.nodeName(c.get(0),"body"));if(b=="rgba(0, 0, 0, 0)"){b="transparent"}return jQuery.color.parse(b)};jQuery.color.parse=function(b){var c,e=jQuery.color.make;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b)){return e(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10))}if(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b)){return e(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10),parseFloat(c[4]))}if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b)){return e(parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55)}if(c=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b)){return e(parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55,parseFloat(c[4]))}if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b)){return e(parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16))}if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b)){return e(parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16))}var d=jQuery.trim(b).toLowerCase();if(d=="transparent"){return e(255,255,255,0)}else{c=a[d];return e(c[0],c[1],c[2])}};var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})();(function(c){function b(N,z,A,e){var p=[],J={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},q=null,al=null,am=null,B=null,av=null,ao=[],T=[],H={left:0,right:0,top:0,bottom:0},ah=0,s=0,h=0,aa=0,m={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[]},f=this;f.setData=I;f.setupGrid=M;f.draw=at;f.getPlaceholder=function(){return N};f.getCanvas=function(){return q};f.getPlotOffset=function(){return H};f.width=function(){return h};f.height=function(){return aa};f.offset=function(){var aw=am.offset();aw.left+=H.left;aw.top+=H.top;return aw};f.getData=function(){return p};f.getAxis=function(ax,ay){var aw=(ax==x?ao:T)[ay-1];if(aw&&!aw.used){aw=null}return aw};f.getAxes=function(){var ax={},aw;for(aw=0;aw<ao.length;++aw){ax["x"+(aw?(aw+1):"")+"axis"]=ao[aw]||{}}for(aw=0;aw<T.length;++aw){ax["y"+(aw?(aw+1):"")+"axis"]=T[aw]||{}}if(!ax.x2axis){ax.x2axis={n:2}}if(!ax.y2axis){ax.y2axis={n:2}}return ax};f.getXAxes=function(){return ao};f.getYAxes=function(){return T};f.getUsedAxes=Y;f.c2p=V;f.p2c=O;f.getOptions=function(){return J};f.highlight=an;f.unhighlight=ag;f.triggerRedrawOverlay=U;f.pointOffset=function(aw){return{left:parseInt(ao[v(aw,"x")-1].p2c(+aw.x)+H.left),top:parseInt(T[v(aw,"y")-1].p2c(+aw.y)+H.top)}};f.hooks=m;E(f);X(A);F();I(z);M();at();ar();function C(ay,aw){aw=[f].concat(aw);for(var ax=0;ax<ay.length;++ax){ay[ax].apply(this,aw)}}function E(){for(var aw=0;aw<e.length;++aw){var ax=e[aw];ax.init(f);if(ax.options){c.extend(true,J,ax.options)}}}function X(ax){var aw;c.extend(true,J,ax);if(J.xaxis.color==null){J.xaxis.color=J.grid.color}if(J.yaxis.color==null){J.yaxis.color=J.grid.color}if(J.xaxis.tickColor==null){J.xaxis.tickColor=J.grid.tickColor}if(J.yaxis.tickColor==null){J.yaxis.tickColor=J.grid.tickColor}if(J.grid.borderColor==null){J.grid.borderColor=J.grid.color}if(J.grid.tickColor==null){J.grid.tickColor=c.color.parse(J.grid.color).scale("a",0.22).toString()}for(aw=0;aw<Math.max(1,J.xaxes.length);++aw){J.xaxes[aw]=c.extend(true,{},J.xaxis,J.xaxes[aw])}for(aw=0;aw<Math.max(1,J.yaxes.length);++aw){J.yaxes[aw]=c.extend(true,{},J.yaxis,J.yaxes[aw])}if(J.xaxis.noTicks&&J.xaxis.ticks==null){J.xaxis.ticks=J.xaxis.noTicks}if(J.yaxis.noTicks&&J.yaxis.ticks==null){J.yaxis.ticks=J.yaxis.noTicks}if(J.x2axis){J.x2axis.position="top";J.xaxes[1]=J.x2axis}if(J.y2axis){if(J.y2axis.autoscaleMargin===undefined){J.y2axis.autoscaleMargin=0.02}J.y2axis.position="right";J.yaxes[1]=J.y2axis}if(J.grid.coloredAreas){J.grid.markings=J.grid.coloredAreas}if(J.grid.coloredAreasColor){J.grid.markingsColor=J.grid.coloredAreasColor}if(J.lines){c.extend(true,J.series.lines,J.lines)}if(J.points){c.extend(true,J.series.points,J.points)}if(J.bars){c.extend(true,J.series.bars,J.bars)}if(J.shadowSize){J.series.shadowSize=J.shadowSize}for(aw=0;aw<J.xaxes.length;++aw){K(ao,aw+1).options=J.xaxes[aw]}for(aw=0;aw<J.yaxes.length;++aw){K(T,aw+1).options=J.yaxes[aw]}for(var ay in m){if(J.hooks[ay]&&J.hooks[ay].length){m[ay]=m[ay].concat(J.hooks[ay])}}C(m.processOptions,[J])}function I(aw){p=n(aw);w();P()}function n(az){var ax=[];for(var aw=0;aw<az.length;++aw){var ay=c.extend(true,{},J.series);if(az[aw].data){ay.data=az[aw].data;delete az[aw].data;c.extend(true,ay,az[aw]);az[aw].data=ay.data}else{ay.data=az[aw]}ax.push(ay)}return ax}function v(ax,ay){var aw=ax[ay+"axis"];if(typeof aw=="object"){aw=aw.n}if(typeof aw!="number"){aw=1}return aw}function V(az){var ax={},aw,ay;for(aw=0;aw<ao.length;++aw){ay=ao[aw];if(ay&&ay.used){ax["x"+ay.n]=ay.c2p(az.left)}}for(aw=0;aw<T.length;++aw){ay=T[aw];if(ay&&ay.used){ax["y"+ay.n]=ay.c2p(az.top)}}if(ax.x1!==undefined){ax.x=ax.x1}if(ax.y1!==undefined){ax.y=ax.y1}return ax}function O(aA){var ay={},ax,az,aw;for(ax=0;ax<ao.length;++ax){az=ao[ax];if(az&&az.used){aw="x"+az.n;if(aA[aw]==null&&az.n==1){aw="x"}if(aA[aw]){ay.left=az.p2c(aA[aw]);break}}}for(ax=0;ax<T.length;++ax){az=T[ax];if(az&&az.used){aw="y"+az.n;if(aA[aw]==null&&az.n==1){aw="y"}if(aA[aw]){ay.top=az.p2c(aA[aw]);break}}}return ay}function Y(){var ax=[],aw,ay;for(aw=0;aw<ao.length;++aw){ay=ao[aw];if(ay&&ay.used){ax.push(ay)}}for(aw=0;aw<T.length;++aw){ay=T[aw];if(ay&&ay.used){ax.push(ay)}}return ax}function K(ax,aw){if(!ax[aw-1]){ax[aw-1]={n:aw,direction:ax==ao?"x":"y",options:c.extend(true,{},ax==ao?J.xaxis:J.yaxis)}}return ax[aw-1]}function w(){var aB;var aH=p.length,aw=[],az=[];for(aB=0;aB<p.length;++aB){var aE=p[aB].color;if(aE!=null){--aH;if(typeof aE=="number"){az.push(aE)}else{aw.push(c.color.parse(p[aB].color))}}}for(aB=0;aB<az.length;++aB){aH=Math.max(aH,az[aB]+1)}var ax=[],aA=0;aB=0;while(ax.length<aH){var aD;if(J.colors.length==aB){aD=c.color.make(100,100,100)}else{aD=c.color.parse(J.colors[aB])}var ay=aA%2==1?-1:1;aD.scale("rgb",1+ay*Math.ceil(aA/2)*0.2);ax.push(aD);++aB;if(aB>=J.colors.length){aB=0;++aA}}var aC=0,aI;for(aB=0;aB<p.length;++aB){aI=p[aB];if(aI.color==null){aI.color=ax[aC].toString();++aC}else{if(typeof aI.color=="number"){aI.color=ax[aI.color].toString()}}if(aI.lines.show==null){var aG,aF=true;for(aG in aI){if(aI[aG]&&aI[aG].show){aF=false;break}}if(aF){aI.lines.show=true}}aI.xaxis=K(ao,v(aI,"x"));aI.yaxis=K(T,v(aI,"y"))}}function P(){var aJ=Number.POSITIVE_INFINITY,aD=Number.NEGATIVE_INFINITY,aP,aN,aM,aI,ay,aE,aO,aK,aC,aB,ax,aV,aS,aG;function aw(aW,aX){if(!aW){return}aW.datamin=aJ;aW.datamax=aD;aW.used=false}function aA(aY,aX,aW){if(aX<aY.datamin){aY.datamin=aX}if(aW>aY.datamax){aY.datamax=aW}}for(aP=0;aP<ao.length;++aP){aw(ao[aP])}for(aP=0;aP<T.length;++aP){aw(T[aP])}for(aP=0;aP<p.length;++aP){aE=p[aP];aE.datapoints={points:[]};C(m.processRawData,[aE,aE.data,aE.datapoints])}for(aP=0;aP<p.length;++aP){aE=p[aP];var aU=aE.data,aR=aE.datapoints.format;if(!aR){aR=[];aR.push({x:true,number:true,required:true});aR.push({y:true,number:true,required:true});if(aE.bars.show||(aE.lines.show&&aE.lines.fill)){aR.push({y:true,number:true,required:false,defaultValue:0});if(aE.bars.horizontal){delete aR[aR.length-1].y;aR[aR.length-1].x=true}}aE.datapoints.format=aR}if(aE.datapoints.pointsize!=null){continue}aE.datapoints.pointsize=aR.length;aK=aE.datapoints.pointsize;aO=aE.datapoints.points;insertSteps=aE.lines.show&&aE.lines.steps;aE.xaxis.used=aE.yaxis.used=true;for(aN=aM=0;aN<aU.length;++aN,aM+=aK){aG=aU[aN];var az=aG==null;if(!az){for(aI=0;aI<aK;++aI){aV=aG[aI];aS=aR[aI];if(aS){if(aS.number&&aV!=null){aV=+aV;if(isNaN(aV)){aV=null}}if(aV==null){if(aS.required){az=true}if(aS.defaultValue!=null){aV=aS.defaultValue}}}aO[aM+aI]=aV}}if(az){for(aI=0;aI<aK;++aI){aV=aO[aM+aI];if(aV!=null){aS=aR[aI];if(aS.x){aA(aE.xaxis,aV,aV)}if(aS.y){aA(aE.yaxis,aV,aV)}}aO[aM+aI]=null}}else{if(insertSteps&&aM>0&&aO[aM-aK]!=null&&aO[aM-aK]!=aO[aM]&&aO[aM-aK+1]!=aO[aM+1]){for(aI=0;aI<aK;++aI){aO[aM+aK+aI]=aO[aM+aI]}aO[aM+1]=aO[aM-aK+1];aM+=aK}}}}for(aP=0;aP<p.length;++aP){aE=p[aP];C(m.processDatapoints,[aE,aE.datapoints])}for(aP=0;aP<p.length;++aP){aE=p[aP];aO=aE.datapoints.points,aK=aE.datapoints.pointsize;var aF=aJ,aL=aJ,aH=aD,aQ=aD;for(aN=0;aN<aO.length;aN+=aK){if(aO[aN]==null){continue}for(aI=0;aI<aK;++aI){aV=aO[aN+aI];aS=aR[aI];if(!aS){continue}if(aS.x){if(aV<aF){aF=aV}if(aV>aH){aH=aV}}if(aS.y){if(aV<aL){aL=aV}if(aV>aQ){aQ=aV}}}}if(aE.bars.show){var aT=aE.bars.align=="left"?0:-aE.bars.barWidth/2;if(aE.bars.horizontal){aL+=aT;aQ+=aT+aE.bars.barWidth}else{aF+=aT;aH+=aT+aE.bars.barWidth}}aA(aE.xaxis,aF,aH);aA(aE.yaxis,aL,aQ)}c.each(Y(),function(aW,aX){if(aX.datamin==aJ){aX.datamin=null}if(aX.datamax==aD){aX.datamax=null}})}function F(){function aw(ay,ax){var az=document.createElement("canvas");az.width=ay;az.height=ax;if(!az.getContext){az=window.G_vmlCanvasManager.initElement(az)}return az}ah=N.width();s=N.height();N.html("");if(N.css("position")=="static"){N.css("position","relative")}if(ah<=0||s<=0){throw"Invalid dimensions for plot, width = "+ah+", height = "+s}if(window.G_vmlCanvasManager){window.G_vmlCanvasManager.init_(document)}q=c(aw(ah,s)).appendTo(N).get(0);B=q.getContext("2d");al=c(aw(ah,s)).css({position:"absolute",left:0,top:0}).appendTo(N).get(0);av=al.getContext("2d");av.stroke()}function ar(){am=c([al,q]);if(J.grid.hoverable){am.mousemove(d)}if(J.grid.clickable){am.click(G)}C(m.bindEvents,[am])}function l(aB){function ax(aC){return aC}var aA,aw,ay=aB.options.transform||ax,az=aB.options.inverseTransform;if(aB.direction=="x"){aA=aB.scale=h/(ay(aB.max)-ay(aB.min));aw=ay(aB.min);if(ay==ax){aB.p2c=function(aC){return(aC-aw)*aA}}else{aB.p2c=function(aC){return(ay(aC)-aw)*aA}}if(!az){aB.c2p=function(aC){return aw+aC/aA}}else{aB.c2p=function(aC){return az(aw+aC/aA)}}}else{aA=aB.scale=aa/(ay(aB.max)-ay(aB.min));aw=ay(aB.max);if(ay==ax){aB.p2c=function(aC){return(aw-aC)*aA}}else{aB.p2c=function(aC){return(aw-ay(aC))*aA}}if(!az){aB.c2p=function(aC){return aw-aC/aA}}else{aB.c2p=function(aC){return az(aw-aC/aA)}}}}function W(ay){if(!ay){return}var aw=ay.options,aA,aE=ay.ticks||[],aD=[],az,aF=aw.labelWidth,aB=aw.labelHeight,ax;function aC(aH,aG){return c('<div style="position:absolute;top:-10000px;'+aG+'font-size:smaller"><div class="'+ay.direction+"Axis "+ay.direction+ay.n+'Axis">'+aH.join("")+"</div></div>").appendTo(N)}if(ay.direction=="x"){if(aF==null){aF=Math.floor(ah/(aE.length>0?aE.length:1))}if(aB==null){aD=[];for(aA=0;aA<aE.length;++aA){az=aE[aA].label;if(az){aD.push('<div class="tickLabel" style="float:left;width:'+aF+'px">'+az+"</div>")}}if(aD.length>0){aD.push('<div style="clear:left"></div>');ax=aC(aD,"width:10000px;");aB=ax.height();ax.remove()}}}else{if(aF==null||aB==null){for(aA=0;aA<aE.length;++aA){az=aE[aA].label;if(az){aD.push('<div class="tickLabel">'+az+"</div>")}}if(aD.length>0){ax=aC(aD,"");if(aF==null){aF=ax.children().width()}if(aB==null){aB=ax.find("div.tickLabel").height()}ax.remove()}}}if(aF==null){aF=0}if(aB==null){aB=0}ay.labelWidth=aF;ay.labelHeight=aB}function Z(ay){if(!ay||(!ay.used&&!(ay.labelWidth||ay.labelHeight))){return}var ax=ay.labelWidth,aG=ay.labelHeight,aC=ay.options.position,aA=ay.options.tickLength,aB=J.grid.axisMargin,aE=J.grid.labelMargin,aF=ay.direction=="x"?ao:T,az;var aw=c.grep(aF,function(aI){return aI&&aI.options.position==aC&&(aI.labelHeight||aI.labelWidth)});if(c.inArray(ay,aw)==aw.length-1){aB=0}if(aA==null){aA="full"}var aD=c.grep(aF,function(aI){return aI&&(aI.labelHeight||aI.labelWidth)});var aH=c.inArray(ay,aD)==0;if(!aH&&aA=="full"){aA=5}if(!isNaN(+aA)){aE+=+aA}if(ay.direction=="x"){aG+=aE;if(aC=="bottom"){H.bottom+=aG+aB;ay.box={top:s-H.bottom,height:aG}}else{ay.box={top:H.top+aB,height:aG};H.top+=aG+aB}}else{ax+=aE;if(aC=="left"){ay.box={left:H.left+aB,width:ax};H.left+=ax+aB}else{H.right+=ax+aB;ay.box={left:ah-H.right,width:ax}}}ay.position=aC;ay.tickLength=aA;ay.box.padding=aE;ay.innermost=aH}function ab(aw){if(aw.direction=="x"){aw.box.left=H.left;aw.box.width=h}else{aw.box.top=H.top;aw.box.height=aa}}function M(){var aB=Y(),ay,ax;for(ax=0;ax<aB.length;++ax){k(aB[ax])}H.left=H.right=H.top=H.bottom=0;if(J.grid.show){for(ax=0;ax<aB.length;++ax){aq(aB[ax]);S(aB[ax]);r(aB[ax],aB[ax].ticks)}for(ay=0;ay<ao.length;++ay){W(ao[ay])}for(ay=0;ay<T.length;++ay){W(T[ay])}for(ay=ao.length-1;ay>=0;--ay){Z(ao[ay])}for(ay=T.length-1;ay>=0;--ay){Z(T[ay])}var aA=0;for(var az=0;az<p.length;++az){aA=Math.max(aA,2*(p[az].points.radius+p[az].points.lineWidth/2))}for(var aw in H){H[aw]+=J.grid.borderWidth;H[aw]=Math.max(aA,H[aw])}}h=ah-H.left-H.right;aa=s-H.bottom-H.top;for(ax=0;ax<aB.length;++ax){l(aB[ax])}if(J.grid.show){for(ax=0;ax<aB.length;++ax){ab(aB[ax])}ae()}au()}function k(az){var aA=az.options,ay=+(aA.min!=null?aA.min:az.datamin),aw=+(aA.max!=null?aA.max:az.datamax),aC=aw-ay;if(aC==0){var ax=aw==0?1:0.01;if(aA.min==null){ay-=ax}if(aA.max==null||aA.min!=null){aw+=ax}}else{var aB=aA.autoscaleMargin;if(aB!=null){if(aA.min==null){ay-=aC*aB;if(ay<0&&az.datamin!=null&&az.datamin>=0){ay=0}}if(aA.max==null){aw+=aC*aB;if(aw>0&&az.datamax!=null&&az.datamax<=0){aw=0}}}}az.min=ay;az.max=aw}function aq(aB){var aH=aB.options;var aC;if(typeof aH.ticks=="number"&&aH.ticks>0){aC=aH.ticks}else{if(aB.direction=="x"){aC=0.3*Math.sqrt(ah)}else{aC=0.3*Math.sqrt(s)}}var aO=(aB.max-aB.min)/aC,aJ,aw,aI,aM,aN,aL,aD;if(aH.mode=="time"){var aE={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,year:365.2425*24*60*60*1000};var aF=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var ax=0;if(aH.minTickSize!=null){if(typeof aH.tickSize=="number"){ax=aH.tickSize}else{ax=aH.minTickSize[0]*aE[aH.minTickSize[1]]}}for(var aN=0;aN<aF.length-1;++aN){if(aO<(aF[aN][0]*aE[aF[aN][1]]+aF[aN+1][0]*aE[aF[aN+1][1]])/2&&aF[aN][0]*aE[aF[aN][1]]>=ax){break}}aJ=aF[aN][0];aI=aF[aN][1];if(aI=="year"){aL=Math.pow(10,Math.floor(Math.log(aO/aE.year)/Math.LN10));aD=(aO/aE.year)/aL;if(aD<1.5){aJ=1}else{if(aD<3){aJ=2}else{if(aD<7.5){aJ=5}else{aJ=10}}}aJ*=aL}aB.tickSize=aH.tickSize||[aJ,aI];aw=function(aS){var aX=[],aV=aS.tickSize[0],aY=aS.tickSize[1],aW=new Date(aS.min);var aR=aV*aE[aY];if(aY=="second"){aW.setUTCSeconds(a(aW.getUTCSeconds(),aV))}if(aY=="minute"){aW.setUTCMinutes(a(aW.getUTCMinutes(),aV))}if(aY=="hour"){aW.setUTCHours(a(aW.getUTCHours(),aV))}if(aY=="month"){aW.setUTCMonth(a(aW.getUTCMonth(),aV))}if(aY=="year"){aW.setUTCFullYear(a(aW.getUTCFullYear(),aV))}aW.setUTCMilliseconds(0);if(aR>=aE.minute){aW.setUTCSeconds(0)}if(aR>=aE.hour){aW.setUTCMinutes(0)}if(aR>=aE.day){aW.setUTCHours(0)}if(aR>=aE.day*4){aW.setUTCDate(1)}if(aR>=aE.year){aW.setUTCMonth(0)}var a0=0,aZ=Number.NaN,aT;do{aT=aZ;aZ=aW.getTime();aX.push(aZ);if(aY=="month"){if(aV<1){aW.setUTCDate(1);var aQ=aW.getTime();aW.setUTCMonth(aW.getUTCMonth()+1);var aU=aW.getTime();aW.setTime(aZ+a0*aE.hour+(aU-aQ)*aV);a0=aW.getUTCHours();aW.setUTCHours(0)}else{aW.setUTCMonth(aW.getUTCMonth()+aV)}}else{if(aY=="year"){aW.setUTCFullYear(aW.getUTCFullYear()+aV)}else{aW.setTime(aZ+aR)}}}while(aZ<aS.max&&aZ!=aT);return aX};aM=function(aQ,aT){var aV=new Date(aQ);if(aH.timeformat!=null){return c.plot.formatDate(aV,aH.timeformat,aH.monthNames)}var aR=aT.tickSize[0]*aE[aT.tickSize[1]];var aS=aT.max-aT.min;var aU=(aH.twelveHourClock)?" %p":"";if(aR<aE.minute){fmt="%h:%M:%S"+aU}else{if(aR<aE.day){if(aS<2*aE.day){fmt="%h:%M"+aU}else{fmt="%b %d %h:%M"+aU}}else{if(aR<aE.month){fmt="%b %d"}else{if(aR<aE.year){if(aS<aE.year){fmt="%b"}else{fmt="%b %y"}}else{fmt="%y"}}}}return c.plot.formatDate(aV,fmt,aH.monthNames)}}else{var aP=aH.tickDecimals;var aK=-Math.floor(Math.log(aO)/Math.LN10);if(aP!=null&&aK>aP){aK=aP}aL=Math.pow(10,-aK);aD=aO/aL;if(aD<1.5){aJ=1}else{if(aD<3){aJ=2;if(aD>2.25&&(aP==null||aK+1<=aP)){aJ=2.5;++aK}}else{if(aD<7.5){aJ=5}else{aJ=10}}}aJ*=aL;if(aH.minTickSize!=null&&aJ<aH.minTickSize){aJ=aH.minTickSize}aB.tickDecimals=Math.max(0,aP!=null?aP:aK);aB.tickSize=aH.tickSize||aJ;aw=function(aS){var aU=[];var aV=a(aS.min,aS.tickSize),aR=0,aQ=Number.NaN,aT;do{aT=aQ;aQ=aV+aR*aS.tickSize;aU.push(aQ);++aR}while(aQ<aS.max&&aQ!=aT);return aU};aM=function(aQ,aR){return aQ.toFixed(aR.tickDecimals)}}if(aH.alignTicksWithAxis!=null){var aA=(aB.direction=="x"?ao:T)[aH.alignTicksWithAxis-1];if(aA&&aA.used&&aA!=aB){var aG=aw(aB);if(aG.length>0){if(aH.min==null){aB.min=Math.min(aB.min,aG[0])}if(aH.max==null&&aG.length>1){aB.max=Math.max(aB.max,aG[aG.length-1])}}aw=function(aS){var aT=[],aQ,aR;for(aR=0;aR<aA.ticks.length;++aR){aQ=(aA.ticks[aR].v-aA.min)/(aA.max-aA.min);aQ=aS.min+aQ*(aS.max-aS.min);aT.push(aQ)}return aT};if(aB.mode!="time"&&aH.tickDecimals==null){var az=Math.max(0,-Math.floor(Math.log(aO)/Math.LN10)+1),ay=aw(aB);if(!(ay.length>1&&/\..*0$/.test((ay[1]-ay[0]).toFixed(az)))){aB.tickDecimals=az}}}}aB.tickGenerator=aw;if(c.isFunction(aH.tickFormatter)){aB.tickFormatter=function(aQ,aR){return""+aH.tickFormatter(aQ,aR)}}else{aB.tickFormatter=aM}}function S(aA){aA.ticks=[];var aC=aA.options.ticks,aB=null;if(aC==null||(typeof aC=="number"&&aC>0)){aB=aA.tickGenerator(aA)}else{if(aC){if(c.isFunction(aC)){aB=aC({min:aA.min,max:aA.max})}else{aB=aC}}}var az,aw;for(az=0;az<aB.length;++az){var ax=null;var ay=aB[az];if(typeof ay=="object"){aw=ay[0];if(ay.length>1){ax=ay[1]}}else{aw=ay}if(ax==null){ax=aA.tickFormatter(aw,aA)}aA.ticks[az]={v:aw,label:ax}}}function r(aw,ax){if(aw.options.autoscaleMargin!=null&&ax.length>0){if(aw.options.min==null){aw.min=Math.min(aw.min,ax[0].v)}if(aw.options.max==null&&ax.length>1){aw.max=Math.max(aw.max,ax[ax.length-1].v)}}}function at(){B.clearRect(0,0,ah,s);var ax=J.grid;if(ax.show&&!ax.aboveData){u()}for(var aw=0;aw<p.length;++aw){C(m.drawSeries,[B,p[aw]]);aj(p[aw])}C(m.draw,[B]);if(ax.show&&ax.aboveData){u()}}function o(aw,aD){var az,aC,aB,aA,ay;aA=Y();for(i=0;i<aA.length;++i){az=aA[i];if(az.direction==aD){ay=aD+az.n+"axis";if(!aw[ay]&&az.n==1){ay=aD+"axis"}if(aw[ay]){aC=aw[ay].from;aB=aw[ay].to;break}}}if(!aw[ay]){az=aD=="x"?ao[0]:T[0];aC=aw[aD+"1"];aB=aw[aD+"2"]}if(aC!=null&&aB!=null&&aC>aB){var ax=aC;aC=aB;aB=ax}return{from:aC,to:aB,axis:az}}function u(){var aA;B.save();B.translate(H.left,H.top);if(J.grid.backgroundColor){B.fillStyle=t(J.grid.backgroundColor,aa,0,"rgba(255, 255, 255, 0)");B.fillRect(0,0,h,aa)}var aC=J.grid.markings;if(aC){if(c.isFunction(aC)){var aF=f.getAxes();aF.xmin=aF.xaxis.min;aF.xmax=aF.xaxis.max;aF.ymin=aF.yaxis.min;aF.ymax=aF.yaxis.max;aC=aC(aF)}for(aA=0;aA<aC.length;++aA){var ay=aC[aA],ax=o(ay,"x"),aD=o(ay,"y");if(ax.from==null){ax.from=ax.axis.min}if(ax.to==null){ax.to=ax.axis.max}if(aD.from==null){aD.from=aD.axis.min}if(aD.to==null){aD.to=aD.axis.max}if(ax.to<ax.axis.min||ax.from>ax.axis.max||aD.to<aD.axis.min||aD.from>aD.axis.max){continue}ax.from=Math.max(ax.from,ax.axis.min);ax.to=Math.min(ax.to,ax.axis.max);aD.from=Math.max(aD.from,aD.axis.min);aD.to=Math.min(aD.to,aD.axis.max);if(ax.from==ax.to&&aD.from==aD.to){continue}ax.from=ax.axis.p2c(ax.from);ax.to=ax.axis.p2c(ax.to);aD.from=aD.axis.p2c(aD.from);aD.to=aD.axis.p2c(aD.to);if(ax.from==ax.to||aD.from==aD.to){B.beginPath();B.strokeStyle=ay.color||J.grid.markingsColor;B.lineWidth=ay.lineWidth||J.grid.markingsLineWidth;B.moveTo(ax.from,aD.from);B.lineTo(ax.to,aD.to);B.stroke()}else{B.fillStyle=ay.color||J.grid.markingsColor;B.fillRect(ax.from,aD.to,ax.to-ax.from,aD.from-aD.to)}}}var aF=Y(),aH=J.grid.borderWidth;for(var az=0;az<aF.length;++az){var aw=aF[az],aB=aw.box,aL=aw.tickLength,aI,aG,aK,aE;B.strokeStyle=aw.options.tickColor||c.color.parse(aw.options.color).scale("a",0.22).toString();B.lineWidth=1;if(aw.direction=="x"){aI=0;if(aL=="full"){aG=(aw.position=="top"?0:aa)}else{aG=aB.top-H.top+(aw.position=="top"?aB.height:0)}}else{aG=0;if(aL=="full"){aI=(aw.position=="left"?0:h)}else{aI=aB.left-H.left+(aw.position=="left"?aB.width:0)}}if(!aw.innermost){B.beginPath();aK=aE=0;if(aw.direction=="x"){aK=h}else{aE=aa}if(B.lineWidth==1){aI=Math.floor(aI)+0.5;aG=Math.floor(aG)+0.5}B.moveTo(aI,aG);B.lineTo(aI+aK,aG+aE);B.stroke()}B.beginPath();for(aA=0;aA<aw.ticks.length;++aA){var aJ=aw.ticks[aA].v;aK=aE=0;if(aJ<aw.min||aJ>aw.max||(aL=="full"&&aH>0&&(aJ==aw.min||aJ==aw.max))){continue}if(aw.direction=="x"){aI=aw.p2c(aJ);aE=aL=="full"?-aa:aL;if(aw.position=="top"){aE=-aE}}else{aG=aw.p2c(aJ);aK=aL=="full"?-h:aL;if(aw.position=="left"){aK=-aK}}if(B.lineWidth==1){if(aw.direction=="x"){aI=Math.floor(aI)+0.5}else{aG=Math.floor(aG)+0.5}}B.moveTo(aI,aG);B.lineTo(aI+aK,aG+aE)}B.stroke()}if(aH){B.lineWidth=aH;B.strokeStyle=J.grid.borderColor;B.strokeRect(-aH/2,-aH/2,h+aH,aa+aH)}B.restore()}function ae(){N.find(".tickLabels").remove();var aB=['<div class="tickLabels" style="font-size:smaller">'];var aE=Y();for(var ay=0;ay<aE.length;++ay){var ax=aE[ay],aA=ax.box;aB.push('<div class="'+ax.direction+"Axis "+ax.direction+ax.n+'Axis" style="color:'+ax.options.color+'">');for(var az=0;az<ax.ticks.length;++az){var aC=ax.ticks[az];if(!aC.label||aC.v<ax.min||aC.v>ax.max){continue}var aF={},aD;if(ax.direction=="x"){aD="center";aF.left=Math.round(H.left+ax.p2c(aC.v)-ax.labelWidth/2);if(ax.position=="bottom"){aF.top=aA.top+aA.padding}else{aF.bottom=s-(aA.top+aA.height-aA.padding)}}else{aF.top=Math.round(H.top+ax.p2c(aC.v)-ax.labelHeight/2);if(ax.position=="left"){aF.right=ah-(aA.left+aA.width-aA.padding);aD="right"}else{aF.left=aA.left+aA.padding;aD="left"}}aF.width=ax.labelWidth;var aw=["position:absolute","text-align:"+aD];for(var aG in aF){aw.push(aG+":"+aF[aG]+"px")}aB.push('<div class="tickLabel" style="'+aw.join(";")+'">'+aC.label+"</div>")}aB.push("</div>")}aB.push("</div>");N.append(aB.join(""))}function aj(aw){if(aw.lines.show){D(aw)}if(aw.bars.show){Q(aw)}if(aw.points.show){R(aw)}}function D(az){function ay(aK,aL,aD,aP,aO){var aQ=aK.points,aE=aK.pointsize,aI=null,aH=null;B.beginPath();for(var aJ=aE;aJ<aQ.length;aJ+=aE){var aG=aQ[aJ-aE],aN=aQ[aJ-aE+1],aF=aQ[aJ],aM=aQ[aJ+1];if(aG==null||aF==null){continue}if(aN<=aM&&aN<aO.min){if(aM<aO.min){continue}aG=(aO.min-aN)/(aM-aN)*(aF-aG)+aG;aN=aO.min}else{if(aM<=aN&&aM<aO.min){if(aN<aO.min){continue}aF=(aO.min-aN)/(aM-aN)*(aF-aG)+aG;aM=aO.min}}if(aN>=aM&&aN>aO.max){if(aM>aO.max){continue}aG=(aO.max-aN)/(aM-aN)*(aF-aG)+aG;aN=aO.max}else{if(aM>=aN&&aM>aO.max){if(aN>aO.max){continue}aF=(aO.max-aN)/(aM-aN)*(aF-aG)+aG;aM=aO.max}}if(aG<=aF&&aG<aP.min){if(aF<aP.min){continue}aN=(aP.min-aG)/(aF-aG)*(aM-aN)+aN;aG=aP.min}else{if(aF<=aG&&aF<aP.min){if(aG<aP.min){continue}aM=(aP.min-aG)/(aF-aG)*(aM-aN)+aN;aF=aP.min}}if(aG>=aF&&aG>aP.max){if(aF>aP.max){continue}aN=(aP.max-aG)/(aF-aG)*(aM-aN)+aN;aG=aP.max}else{if(aF>=aG&&aF>aP.max){if(aG>aP.max){continue}aM=(aP.max-aG)/(aF-aG)*(aM-aN)+aN;aF=aP.max}}if(aG!=aI||aN!=aH){B.moveTo(aP.p2c(aG)+aL,aO.p2c(aN)+aD)}aI=aF;aH=aM;B.lineTo(aP.p2c(aF)+aL,aO.p2c(aM)+aD)}B.stroke()}function aA(aD,aL,aK){var aR=aD.points,aQ=aD.pointsize,aI=Math.min(Math.max(0,aK.min),aK.max),aS=0,aP,aO=false,aH=1,aG=0,aM=0;while(true){if(aQ>0&&aS>aR.length+aQ){break}aS+=aQ;var aU=aR[aS-aQ],aF=aR[aS-aQ+aH],aT=aR[aS],aE=aR[aS+aH];if(aO){if(aQ>0&&aU!=null&&aT==null){aM=aS;aQ=-aQ;aH=2;continue}if(aQ<0&&aS==aG+aQ){B.fill();aO=false;aQ=-aQ;aH=1;aS=aG=aM+aQ;continue}}if(aU==null||aT==null){continue}if(aU<=aT&&aU<aL.min){if(aT<aL.min){continue}aF=(aL.min-aU)/(aT-aU)*(aE-aF)+aF;aU=aL.min}else{if(aT<=aU&&aT<aL.min){if(aU<aL.min){continue}aE=(aL.min-aU)/(aT-aU)*(aE-aF)+aF;aT=aL.min}}if(aU>=aT&&aU>aL.max){if(aT>aL.max){continue}aF=(aL.max-aU)/(aT-aU)*(aE-aF)+aF;aU=aL.max}else{if(aT>=aU&&aT>aL.max){if(aU>aL.max){continue}aE=(aL.max-aU)/(aT-aU)*(aE-aF)+aF;aT=aL.max}}if(!aO){B.beginPath();B.moveTo(aL.p2c(aU),aK.p2c(aI));aO=true}if(aF>=aK.max&&aE>=aK.max){B.lineTo(aL.p2c(aU),aK.p2c(aK.max));B.lineTo(aL.p2c(aT),aK.p2c(aK.max));continue}else{if(aF<=aK.min&&aE<=aK.min){B.lineTo(aL.p2c(aU),aK.p2c(aK.min));B.lineTo(aL.p2c(aT),aK.p2c(aK.min));continue}}var aJ=aU,aN=aT;if(aF<=aE&&aF<aK.min&&aE>=aK.min){aU=(aK.min-aF)/(aE-aF)*(aT-aU)+aU;aF=aK.min}else{if(aE<=aF&&aE<aK.min&&aF>=aK.min){aT=(aK.min-aF)/(aE-aF)*(aT-aU)+aU;aE=aK.min}}if(aF>=aE&&aF>aK.max&&aE<=aK.max){aU=(aK.max-aF)/(aE-aF)*(aT-aU)+aU;aF=aK.max}else{if(aE>=aF&&aE>aK.max&&aF<=aK.max){aT=(aK.max-aF)/(aE-aF)*(aT-aU)+aU;aE=aK.max}}if(aU!=aJ){B.lineTo(aL.p2c(aJ),aK.p2c(aF))}B.lineTo(aL.p2c(aU),aK.p2c(aF));B.lineTo(aL.p2c(aT),aK.p2c(aE));if(aT!=aN){B.lineTo(aL.p2c(aT),aK.p2c(aE));B.lineTo(aL.p2c(aN),aK.p2c(aE))}}}B.save();B.translate(H.left,H.top);B.lineJoin="round";var aB=az.lines.lineWidth,aw=az.shadowSize;if(aB>0&&aw>0){B.lineWidth=aw;B.strokeStyle="rgba(0,0,0,0.1)";var aC=Math.PI/18;ay(az.datapoints,Math.sin(aC)*(aB/2+aw/2),Math.cos(aC)*(aB/2+aw/2),az.xaxis,az.yaxis);B.lineWidth=aw/2;ay(az.datapoints,Math.sin(aC)*(aB/2+aw/4),Math.cos(aC)*(aB/2+aw/4),az.xaxis,az.yaxis)}B.lineWidth=aB;B.strokeStyle=az.color;var ax=y(az.lines,az.color,0,aa);if(ax){B.fillStyle=ax;aA(az.datapoints,az.xaxis,az.yaxis)}if(aB>0){ay(az.datapoints,0,0,az.xaxis,az.yaxis)}B.restore()}function R(az){function aC(aI,aH,aP,aF,aN,aO,aL,aE){var aM=aI.points,aD=aI.pointsize;for(var aG=0;aG<aM.length;aG+=aD){var aK=aM[aG],aJ=aM[aG+1];if(aK==null||aK<aO.min||aK>aO.max||aJ<aL.min||aJ>aL.max){continue}B.beginPath();aK=aO.p2c(aK);aJ=aL.p2c(aJ)+aF;if(aE=="circle"){B.arc(aK,aJ,aH,0,aN?Math.PI:Math.PI*2,false)}else{aE(B,aK,aJ,aH,aN)}B.closePath();if(aP){B.fillStyle=aP;B.fill()}B.stroke()}}B.save();B.translate(H.left,H.top);var aB=az.points.lineWidth,ax=az.shadowSize,aw=az.points.radius,aA=az.points.symbol;if(aB>0&&ax>0){var ay=ax/2;B.lineWidth=ay;B.strokeStyle="rgba(0,0,0,0.1)";aC(az.datapoints,aw,null,ay+ay/2,true,az.xaxis,az.yaxis,aA);B.strokeStyle="rgba(0,0,0,0.2)";aC(az.datapoints,aw,null,ay/2,true,az.xaxis,az.yaxis,aA)}B.lineWidth=aB;B.strokeStyle=az.color;aC(az.datapoints,aw,y(az.points,az.color),0,false,az.xaxis,az.yaxis,aA);B.restore()}function ak(aI,aH,aQ,aD,aL,aA,ay,aG,aF,aP,aM,ax){var az,aO,aE,aK,aB,aw,aJ,aC,aN;if(aM){aC=aw=aJ=true;aB=false;az=aQ;aO=aI;aK=aH+aD;aE=aH+aL;if(aO<az){aN=aO;aO=az;az=aN;aB=true;aw=false}}else{aB=aw=aJ=true;aC=false;az=aI+aD;aO=aI+aL;aE=aQ;aK=aH;if(aK<aE){aN=aK;aK=aE;aE=aN;aC=true;aJ=false}}if(aO<aG.min||az>aG.max||aK<aF.min||aE>aF.max){return}if(az<aG.min){az=aG.min;aB=false}if(aO>aG.max){aO=aG.max;aw=false}if(aE<aF.min){aE=aF.min;aC=false}if(aK>aF.max){aK=aF.max;aJ=false}az=aG.p2c(az);aE=aF.p2c(aE);aO=aG.p2c(aO);aK=aF.p2c(aK);if(ay){aP.beginPath();aP.moveTo(az,aE);aP.lineTo(az,aK);aP.lineTo(aO,aK);aP.lineTo(aO,aE);aP.fillStyle=ay(aE,aK);aP.fill()}if(ax>0&&(aB||aw||aJ||aC)){aP.beginPath();aP.moveTo(az,aE+aA);if(aB){aP.lineTo(az,aK+aA)}else{aP.moveTo(az,aK+aA)}if(aJ){aP.lineTo(aO,aK+aA)}else{aP.moveTo(aO,aK+aA)}if(aw){aP.lineTo(aO,aE+aA)}else{aP.moveTo(aO,aE+aA)}if(aC){aP.lineTo(az,aE+aA)}else{aP.moveTo(az,aE+aA)}aP.stroke()}}function Q(ay){function ax(aE,aD,aG,aB,aF,aI,aH){var aJ=aE.points,aA=aE.pointsize;for(var aC=0;aC<aJ.length;aC+=aA){if(aJ[aC]==null){continue}ak(aJ[aC],aJ[aC+1],aJ[aC+2],aD,aG,aB,aF,aI,aH,B,ay.bars.horizontal,ay.bars.lineWidth)}}B.save();B.translate(H.left,H.top);B.lineWidth=ay.bars.lineWidth;B.strokeStyle=ay.color;var aw=ay.bars.align=="left"?0:-ay.bars.barWidth/2;var az=ay.bars.fill?function(aA,aB){return y(ay.bars,ay.color,aA,aB)}:null;ax(ay.datapoints,aw,aw+ay.bars.barWidth,0,az,ay.xaxis,ay.yaxis);B.restore()}function y(ay,aw,ax,aA){var az=ay.fill;if(!az){return null}if(ay.fillColor){return t(ay.fillColor,ax,aA,aw)}var aB=c.color.parse(aw);aB.a=typeof az=="number"?az:0.4;aB.normalize();return aB.toString()}function au(){N.find(".legend").remove();if(!J.legend.show){return}var aC=[],aA=false,aI=J.legend.labelFormatter,aH,aE;for(var az=0;az<p.length;++az){aH=p[az];aE=aH.label;if(!aE){continue}if(az%J.legend.noColumns==0){if(aA){aC.push("</tr>")}aC.push("<tr>");aA=true}if(aI){aE=aI(aE,aH)}aC.push('<td class="legendColorBox"><div style="border:1px solid '+J.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+aH.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+aE+"</td>")}if(aA){aC.push("</tr>")}if(aC.length==0){return}var aG='<table style="font-size:smaller;color:'+J.grid.color+'">'+aC.join("")+"</table>";if(J.legend.container!=null){c(J.legend.container).html(aG)}else{var aD="",ax=J.legend.position,ay=J.legend.margin;if(ay[0]==null){ay=[ay,ay]}if(ax.charAt(0)=="n"){aD+="top:"+(ay[1]+H.top)+"px;"}else{if(ax.charAt(0)=="s"){aD+="bottom:"+(ay[1]+H.bottom)+"px;"}}if(ax.charAt(1)=="e"){aD+="right:"+(ay[0]+H.right)+"px;"}else{if(ax.charAt(1)=="w"){aD+="left:"+(ay[0]+H.left)+"px;"}}var aF=c('<div class="legend">'+aG.replace('style="','style="position:absolute;'+aD+";")+"</div>").appendTo(N);if(J.legend.backgroundOpacity!=0){var aB=J.legend.backgroundColor;if(aB==null){aB=J.grid.backgroundColor;if(aB&&typeof aB=="string"){aB=c.color.parse(aB)}else{aB=c.color.extract(aF,"background-color")}aB.a=1;aB=aB.toString()}var aw=aF.children();c('<div style="position:absolute;width:'+aw.width()+"px;height:"+aw.height()+"px;"+aD+"background-color:"+aB+';"> </div>').prependTo(aF).css("opacity",J.legend.backgroundOpacity)}}}var af=[],j=null;function ap(aD,aB,ay){var aJ=J.grid.mouseActiveRadius,aV=aJ*aJ+1,aT=null,aM=false,aR,aP;for(aR=p.length-1;aR>=0;--aR){if(!ay(p[aR])){continue}var aK=p[aR],aC=aK.xaxis,aA=aK.yaxis,aQ=aK.datapoints.points,aO=aK.datapoints.pointsize,aL=aC.c2p(aD),aI=aA.c2p(aB),ax=aJ/aC.scale,aw=aJ/aA.scale;if(aK.lines.show||aK.points.show){for(aP=0;aP<aQ.length;aP+=aO){var aF=aQ[aP],aE=aQ[aP+1];if(aF==null){continue}if(aF-aL>ax||aF-aL<-ax||aE-aI>aw||aE-aI<-aw){continue}var aH=Math.abs(aC.p2c(aF)-aD),aG=Math.abs(aA.p2c(aE)-aB),aN=aH*aH+aG*aG;if(aN<aV){aV=aN;aT=[aR,aP/aO]}}}if(aK.bars.show&&!aT){var az=aK.bars.align=="left"?0:-aK.bars.barWidth/2,aS=az+aK.bars.barWidth;for(aP=0;aP<aQ.length;aP+=aO){var aF=aQ[aP],aE=aQ[aP+1],aU=aQ[aP+2];if(aF==null){continue}if(p[aR].bars.horizontal?(aL<=Math.max(aU,aF)&&aL>=Math.min(aU,aF)&&aI>=aE+az&&aI<=aE+aS):(aL>=aF+az&&aL<=aF+aS&&aI>=Math.min(aU,aE)&&aI<=Math.max(aU,aE))){aT=[aR,aP/aO]}}}}if(aT){aR=aT[0];aP=aT[1];aO=p[aR].datapoints.pointsize;return{datapoint:p[aR].datapoints.points.slice(aP*aO,(aP+1)*aO),dataIndex:aP,series:p[aR],seriesIndex:aR}}return null}function d(aw){if(J.grid.hoverable){g("plothover",aw,function(ax){return ax.hoverable!=false})}}function G(aw){g("plotclick",aw,function(ax){return ax.clickable!=false})}function g(ax,aw,ay){var az=am.offset(),aC=aw.pageX-az.left-H.left,aA=aw.pageY-az.top-H.top,aE=V({left:aC,top:aA});aE.pageX=aw.pageX;aE.pageY=aw.pageY;var aF=ap(aC,aA,ay);if(aF){aF.pageX=parseInt(aF.series.xaxis.p2c(aF.datapoint[0])+az.left+H.left);aF.pageY=parseInt(aF.series.yaxis.p2c(aF.datapoint[1])+az.top+H.top)}if(J.grid.autoHighlight){for(var aB=0;aB<af.length;++aB){var aD=af[aB];if(aD.auto==ax&&!(aF&&aD.series==aF.series&&aD.point==aF.datapoint)){ag(aD.series,aD.point)}}if(aF){an(aF.series,aF.datapoint,ax)}}N.trigger(ax,[aE,aF])}function U(){if(!j){j=setTimeout(ad,30)}}function ad(){j=null;av.save();av.clearRect(0,0,ah,s);av.translate(H.left,H.top);var ax,aw;for(ax=0;ax<af.length;++ax){aw=af[ax];if(aw.series.bars.show){ai(aw.series,aw.point)}else{ac(aw.series,aw.point)}}av.restore();C(m.drawOverlay,[av])}function an(ay,aw,aA){if(typeof ay=="number"){ay=p[ay]}if(typeof aw=="number"){var az=ay.datapoints.pointsize;aw=ay.datapoints.points.slice(az*aw,az*(aw+1))}var ax=L(ay,aw);if(ax==-1){af.push({series:ay,point:aw,auto:aA});U()}else{if(!aA){af[ax].auto=false}}}function ag(ay,aw){if(ay==null&&aw==null){af=[];U()}if(typeof ay=="number"){ay=p[ay]}if(typeof aw=="number"){aw=ay.data[aw]}var ax=L(ay,aw);if(ax!=-1){af.splice(ax,1);U()}}function L(ay,az){for(var aw=0;aw<af.length;++aw){var ax=af[aw];if(ax.series==ay&&ax.point[0]==az[0]&&ax.point[1]==az[1]){return aw}}return -1}function ac(az,ay){var ax=ay[0],aD=ay[1],aC=az.xaxis,aB=az.yaxis;if(ax<aC.min||ax>aC.max||aD<aB.min||aD>aB.max){return}var aA=az.points.radius+az.points.lineWidth/2;av.lineWidth=aA;av.strokeStyle=c.color.parse(az.color).scale("a",0.5).toString();var aw=1.5*aA,ax=aC.p2c(ax),aD=aB.p2c(aD);av.beginPath();if(az.points.symbol=="circle"){av.arc(ax,aD,aw,0,2*Math.PI,false)}else{az.points.symbol(av,ax,aD,aw,false)}av.closePath();av.stroke()}function ai(az,aw){av.lineWidth=az.bars.lineWidth;av.strokeStyle=c.color.parse(az.color).scale("a",0.5).toString();var ay=c.color.parse(az.color).scale("a",0.5).toString();var ax=az.bars.align=="left"?0:-az.bars.barWidth/2;ak(aw[0],aw[1],aw[2]||0,ax,ax+az.bars.barWidth,0,function(){return ay},az.xaxis,az.yaxis,av,az.bars.horizontal,az.bars.lineWidth)}function t(aE,aw,aC,ax){if(typeof aE=="string"){return aE}else{var aD=B.createLinearGradient(0,aC,0,aw);for(var az=0,ay=aE.colors.length;az<ay;++az){var aA=aE.colors[az];if(typeof aA!="string"){var aB=c.color.parse(ax);if(aA.brightness!=null){aB=aB.scale("rgb",aA.brightness)}if(aA.opacity!=null){aB.a*=aA.opacity}aA=aB.toString()}aD.addColorStop(az/(ay-1),aA)}return aD}}}c.plot=function(g,e,d){var f=new b(c(g),e,d,c.plot.plugins);return f};c.plot.plugins=[];c.plot.formatDate=function(l,f,h){var o=function(d){d=""+d;return d.length==1?"0"+d:d};var e=[];var p=false,j=false;var n=l.getUTCHours();var k=n<12;if(h==null){h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(f.search(/%p|%P/)!=-1){if(n>12){n=n-12}else{if(n==0){n=12}}}for(var g=0;g<f.length;++g){var m=f.charAt(g);if(p){switch(m){case"h":m=""+n;break;case"H":m=o(n);break;case"M":m=o(l.getUTCMinutes());break;case"S":m=o(l.getUTCSeconds());break;case"d":m=""+l.getUTCDate();break;case"m":m=""+(l.getUTCMonth()+1);break;case"y":m=""+l.getUTCFullYear();break;case"b":m=""+h[l.getUTCMonth()];break;case"p":m=(k)?("am"):("pm");break;case"P":m=(k)?("AM"):("PM");break;case"0":m="";j=true;break}if(m&&j){m=o(m);j=false}e.push(m);if(!j){p=false}}else{if(m=="%"){p=true}else{e.push(m)}}}return e.join("")};function a(e,d){return d*Math.floor(e/d)}})(jQuery);function InitializeDiffPanes(){var j=$("#diffBox"),n=j.parent(),a=$(".diffPane",j),b=$(".diffTable",a[0]),i=$(".diffTable",a[1]),h=$("#oldDiffPane .diffHeader"),g=$("#newDiffPane .diffHeader"),f=$("td.line",b),m=f.outerHeight()+1;e();c();d();$(a[0]).scroll(l);$(a[1]).scroll(k);$(window).resizeComplete(function(){e();c();d()});function d(){var d=16,h=75,g=f.length,c=g*m+d;a.hide();var e=$(window).height(),b=e-35;a.show();if(c<b)b=Math.max(c,h);b>0&&a.height(b)}function e(){var c=16,f=($.browser.msie?document.documentElement.clientWidth:window.innerWidth)-c,e=Math.max(Math.floor(f/2),480)-2,d=Math.max(b.height(),i.height())+c;b.height(d);i.height(d);a.width(e)}function c(){var a=Math.max(h.height(),g.height());h.height(a);g.height(a)}function l(d){var b=this.scrollLeft,c=this.scrollTop;if(c!=a[1].scrollTop)a[1].scrollTop=c;if(b!=a[1].scrollLeft)a[1].scrollLeft=b}function k(d){var b=this.scrollLeft,c=this.scrollTop;if(c!=a[0].scrollTop)a[0].scrollTop=c;if(b!=a[0].scrollLeft)a[0].scrollLeft=b}}jQuery.fn.resizeComplete=function(d){var a=this,e=a.height(),g=a.width(),b=false,f;function c(){if(!h()){e=a.height();g=a.width();f=setTimeout(function(){c()},500)}else{clearTimeout(f);d();b=false}}function h(){var b=a.height(),c=a.width();return b==e&&c==g}function i(){if(b)return;if(h())return;b=true;c()}if($.browser.mozilla)a.resize(d);else a.resize(i)};var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this.options={}}a.prototype._create=function(){this.queryUIElements();this._enableBrowsingHistory();this.options.syncEnabled=true;this.initialLoad=true;this.theSelectorForHeaderOffset=".top_border";this.extraLeftOffsetForScrollbar=-13;this.extraBottomOffsetForScrollbar=0};a.prototype._init=function(){this._enableTheSplitter();this._bindEvents();this._syncView()};a.prototype._bindEvents=function(){var a=this;$(window).bind("resize.browser",$.proxy(function(){this._syncView();this._setBrowseCodeWidth()},this));$("#project_title_row img").load(function(b){a._syncView();return false});this.element.delegate("#widthToggleLink","click",function(b){a._toggleBrowseCodeWidth();return false});this.element.delegate(".sbfc, .sbfe","click",function(e){var c=$(e.target),d=c.attr("fullPath"),b=$("a",a.directoryView).filter(function(){return $(this).attr("path")==d});a._toggleTreeNode(b);return false});this.element.delegate(".browseFile","click",function(d){var b=$(d.target),c=b.attr("filePath");a._loadFile(b,c);window.location.hash=c;return false});this.element.delegate("#previousVersions","change",function(c){var b=$(c.target);a._handleDiffSelection(b)});$(document).delegate("a.oldChangeset","click",function(b){a._handleDiffOlder($(b.target).attr("changesetId"))});$(window).bind("hashchange",this,function(a){a.data._handleHashChanged()});this.element.delegate(".vsplitbar","mousedown.diff",this,function(a){a.data._handleSplitterMove(true)});this.element.delegate(".vsplitbar","mouseup.diff",this,function(a){a.data._handleSplitterMove(false)})};a.prototype._handleHashChanged=function(d){var a=window.location.hash.replace("#",""),c=$(".sbsf a").attr("filepath"),b=$(".sbfs").attr("fullpath");if(!a)return;if(a.slice(-1)=="/"&&a!=b)this._loadFolder(a);else a.length>0&&a!=c&&this._loadFile(null,a,$.proxy(this._findFile,this),true)};a.prototype._loadFolder=function(a){this._loadTree(1,"",("/"+a).split("/"));this.fileContentView.html('<h2 id="beginInstructions">Click an item in the panel on the left to view the contents here.</h2>');$("div.sbsf").removeClass("sbsf");var b=$("a.browserDir",this.directoryView).filter(function(){return $(this).attr("fullpath").toUpperCase()==a.slice(0,-1).toUpperCase()}).addClass("sbfs")};a.prototype.setupAndAttachFloatingScrollbar=function(){this.attachedScrollSelector=".FileView";this.attachedContentSelector=".Code span, .Code pre";this.attachedHeightSelector="#rightPane";this._attachFloatingScrollbar()};a.prototype._destroy=function(){$(window).unbind(".browser");this.element.browsingHistory("destroy");$("#OlderVersionsPanel",$(document)).remove()};a.prototype._loadRoot=function(){this.fileContentView.html('<h2 id="beginInstructions">Click an item in the panel on the left to view the contents here.</h2>');$("#OlderVersionsPanel",$(document)).remove();$(".sbsf",this.directoryView).removeClass("sbsf")};a.prototype._findFile=function(){var b,a=$("#FilePath",this.fileContentView);if(a.length==0)return;b=a.val().replace(/%2f/g,"/");this._findUri(b)};a.prototype._findUri=function(b){var a=b.split("/");if(a[0]=="$"){a=a.slice(2);a.unshift("")}this._loadTree(1,a[0],a)};a.prototype._loadTree=function(c,a,d){var b=this;if(c!=1)a+="/";a+=d[c];if(c<d.length-1){var g=$("a",this.directoryView).filter(function(){return $(this).attr("path")===a});g.length==1&&this._toggleTreeNode(g,function(){b._loadTree(c+1,a,d);if(c==d.length-2&&$("div.sbsf").length==0){var f=$("a",b.directoryView).filter(function(){return $(this).attr("fullPath")===a}).addClass("sbfs");if(b.initialLoad){var e=f.offset().top-b.directoryView.offset().top;b.directoryView.scrollTop(e);b.initialLoad=false}}})}else{var e=$("a",this.directoryView).filter(function(){return($(this).attr("filePath")===a||$(this).attr("fileId")===a)&&$(this).hasClass("sbfl")});if(e.length==0)e=$("a[filePath="+window.location.hash.substring(1)+"]",this.directoryView)||$("a[fileId="+window.location.hash.substring(1)+"]",this.directoryView);var f=e.parent();f.addClass("sbsf");$("a").removeClass("sbfs");if(this.initialLoad&&f.length!=0){var h=f.offset().top-this.directoryView.offset().top;this.directoryView.scrollTop(h);this.initialLoad=false}}};a.prototype._toggleTreeNode=function(c,a){var e=this,f=c.attr("id").substring(3),b=$("#dir"+f+"_span",this.element),g=this.options.listUrl.replace(/xXPathXx/,encodeURIComponent(c.attr("path"))).replace(/xXKeyXx/,escape(f)),d=function(){if(a&&b.css("display")=="block")return;var f=c.attr("path"),d=$("a",e.directoryView).filter(function(){return $(this).attr("fullPath")==f});d.toggleClass("sbfc").toggleClass("sbfe");b.css("display",b.css("display")=="block"?"none":"block")};this.element.find(".sbfsf").removeClass("sbfsf");c.siblings("a.browserDir[fullPath='"+c.attr("path")+"']").addClass("sbfsf");if(b.html()&&b.html()!=""){d();a&&a();return}!a&&this._showLoading();$.ajax({url:g,type:"GET",dataType:"html",success:function(c){b.html(c);d();if(a)a();else e._hideLoading()}})};a.prototype._loadFile=function(c,d,e,f){var a=this,b=c&&c.parent();if(b&&b.hasClass("sbsf"))return;$(".sbsf",this.directoryView).removeClass("sbsf");if(d.slice(-1)=="/")return;b&&b.addClass("sbsf");this.fileContentView.empty().css("height","");$("#OlderVersionsPanel",$(document)).remove();this._showLoading();$.ajax({url:this.options.fileUrl,type:"POST",data:{fileId:d},success:function(g){a._hideLoading();var i=a.directoryView.scrollTop(),h=a.directoryView;$(window).scrollTop(0);setTimeout(function(){h.scrollTop(i)},0);a.fileContentView.html(g.IsError?$createFileLoadError(d,a.options.contactUsUrl):g.Html);if(!f)if(!a.justPopped)a.element.browsingHistory("add",{hash:d},null,c?c.attr("href"):document.location.href);else a.justPopped=false;var b=$(".Code",a.fileContentView),j=$('<div id="fileContent">').appendTo(b);b.children().eq(0).remove().appendTo(j);a._enableTheFloatingViewport();a._showAppropriateImage();a._syncView();a.setupAndAttachFloatingScrollbar();$(".floating-scrollbar-container").scrollLeft(0);if($.browser.msie)window.location=window.location;e&&e()}})};a.prototype._setBrowseCodeWidth=function(){var d=$("#FileInfoHeading"),a=$("#splitView"),b=$(this.splitView).css("position")=="absolute",c=$(window).width()-3;if(b)$(a).css("left",0).css("width",c).trigger("resize");else $(a).css("width","").trigger("resize");$(window).trigger("scroll");d.width(this.rightPane.width());this._showAppropriateImage()};a.prototype._toggleBrowseCodeWidth=function(){var a=$("#splitView"),b=$(this.splitView).css("position")=="absolute";if(b)$(a).css("position","relative");else $(a).css("position","absolute");this._setBrowseCodeWidth()};a.prototype._showAppropriateImage=function(){var a=$("#splitView").css("position")=="absolute";if(a){$("#expandImage").hide();$("#collapseImage").show()}else{$("#expandImage").show();$("#collapseImage").hide()}};a.prototype._handleDiffSelection=function(d){var c=this,a=d[0],b=$("#FileID",this.element).val();if(a.selectedIndex==1)this._openDiffWindow(this.options.diffUrl.replace(/-1/,encodeURIComponent(b)));else if(a.selectedIndex==2){this._showLoading();$.ajax({url:this.options.changesetsUrl.replace(/-1/,encodeURIComponent(b)),dataType:"json",type:"GET",success:function(a){var d="";if(a&&a.length)for(var b=0;b<a.length;b++)d+='<a href="#" class="oldChangeset" changeSetId="'+a[b].Id+'" onclick="return false;">Commit '+a[b].Id+"</a> by "+$encodeIt(a[b].Author)+" on "+a[b].Date+"<br />";else d="There are no older commits for <br /><strong>"+$("#OlderVersionsPanel #Header").html()+"</strong>";$("#OlderVersionsPanel .Body").html(d);OpenDialog("#OlderVersionsPanel",true,"36em");c._hideLoading()}})}a.selectedIndex=0};a.prototype._handleDiffOlder=function(a){var b=$("#FileID",this.element).val();this._openDiffWindow(this.options.oldDiffUrl.replace(/-1/,encodeURIComponent(b)).replace(/-2/,a));OpenDialog("#OlderVersionsPanel",false);$("body").css("overflow-y","")};a.prototype._openDiffWindow=function(b){var a=window.open(b,"name","height=700,width=1000,toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=1");window.focus&&a.focus()};a.prototype._enableBrowsingHistory=function(){var a=this,b={root:true},c=location.pathname;if(location.hash.length>0){b={hash:location.hash};c=location.pathname+location.hash}this.element.browsingHistory({defaultState:b,defaultUrl:c,popped:function(b){if(b&&b.root)a._loadRoot();else if(b&&b.hash!=null)if(b.hash.length==0)a._loadRoot();else{var c=b.hash;if(b.hash.indexOf("#")==0)c=b.hash.substring(1);a.justPopped=true;if(c.slice(-1)=="/")a._loadFolder(c);else a._loadFile(null,c,$.proxy(a._findFile,a))}}})};return a}(a.CodeBrowser);a.SourceCodeBrowser=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.sourceCodeBrowser",new codeplex.ui.SourceCodeBrowser);var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.call(this);a.BaseEnhancement.registerContentChange(b.enhance)}b.enhance=function(){$(".MarkdownEditor").enhancedMarkdownBox()};b.prototype._create=function(){var c=this,d=a.BaseEnhancement.getOptions(this.element);this.options=$.extend({},b._defaults,d,this.options);this.$composer=$("textarea",this.element);this.$preview=$(".preview_tab_content",this.element);this.$mdGuide=$(".markdownGuide",this.element);this.$composeTab=$(".tab_control #Compose",this.element);this.$previewTab=$(".tab_control #Preview",this.element);this.$previewIFrame=$("iframe",this.$preview);this._enhanceTextBox();this.$errorMessage=$(".ErrorMessage",this.element);this.$composeTab.click(function(){return c._showComposeTab()});this.$previewTab.click(function(){return c._showPreviewTab()});$(".MarkdownEditorControls",this.element).markdownToolbar(this.$composer);this._sizeMarkdownEditor()};b.prototype._enhanceTextBox=function(){this.$composer.enhancedTextBox({limit:this.options.maxLength,showCounter:"False",rowState:"",showUnsavedDataAlert:"True",isShowErrorMsg:true,overflowMsg:"Content has been shortened to "+this.options.maxLength+" characters."})};b.prototype.postValidationMessage=function(a){this.$errorMessage.html("").append("<span>"+a+"</span>").show()};b.prototype.validate=function(){if(this.$composer.val().length===0){this.postValidationMessage("Content may not be empty");return false}else if(this.$composer.val().length>this.options.maxLength&&this.options.maxLength!=0){this.postValidationMessage("Content length exceeded the limit ("+this.options.maxLength+")");return false}return true};b.prototype._clearPreview=function(){try{this.$previewIFrame.contents().html("")}catch(a){}};b.prototype.content=function(a){if(a!==undefined){this.$composer.val(a);this._clearPreview()}return this.$composer.val()};b.prototype.displayComposeTab=function(){this.$composeTab.click()};b.prototype._showComposeTab=function(){$(".MarkdownEditorControls",this.element).show();$.browser.msie&&parseInt($.browser.version)==9&&this.$previewIFrame.height(0)};b.prototype.displayPreviewTab=function(){this.$previewTab.click()};b.prototype._showPreviewTab=function(){var b=this,c=this.$composer.val();$(".MarkdownEditorControls",this.element).hide();this._sizePreview();CodePlex.UpdateProgress.delayShow(500);$.ajax({url:"/site/api/preview/markdown",type:"POST",data:{code:c},success:function(c){CodePlex.UpdateProgress.hide();if(b.$previewIFrame&&b.$previewIFrame.length>0)a.EnhancedMarkdownOutput.forceSetContentForElement(b.$previewIFrame,c.Message,"_blank");else b.$preview.html(c.Message);$.browser.msie&&parseInt($.browser.version)<10&&setTimeout(function(){b.$preview.hide();b.$preview.show()},0);b.$preview},error:function(a){CodePlex.UpdateProgress.hide()}})};b.prototype.toggleGuide=function(b,a){if(b===undefined)b=this.$mdGuide.css("display")==="none";if(a===undefined)a=false;if(b){this._sizeGuide();a?this.$mdGuide.show():this.$mdGuide.slideDown()}else a?this.$mdGuide.hide():this.$mdGuide.slideUp()};b.prototype._sizeMarkdownEditor=function(){this._sizePreview();this._sizeGuide()};b.prototype._sizeGuide=function(){var a=this.$composer.outerWidth(true);a-=parseInt(this.$mdGuide.css("padding-left"))+parseInt(this.$mdGuide.css("padding-right"))+parseInt(this.$mdGuide.css("border-left"))+parseInt(this.$mdGuide.css("border-right"));this.$mdGuide.width(a)};b.prototype._sizePreview=function(){var a=this.$composer.outerHeight(true),b=this.$composer.outerWidth(true);a-=this._getIntCSS(this.$preview,"padding-top")+this._getIntCSS(this.$preview,"padding-bottom")+this._getIntCSS(this.$preview,"border-top")+this._getIntCSS(this.$preview,"border-bottom");b-=this._getIntCSS(this.$preview,"padding-left")+this._getIntCSS(this.$preview,"padding-right")+this._getIntCSS(this.$preview,"border-left")+this._getIntCSS(this.$preview,"border-right");this.$preview.css("min-height",a);this.$preview.width(b);this.$previewIFrame.css("min-height",a);this.$previewIFrame.width(b)};b.prototype._getIntCSS=function(c,b){var a=parseInt(c.css(b));if(isNaN(a))a=0;return a};b._defaults={maxLength:0};return b}(a.BaseEnhancement);a.EnhancedMarkdownBox=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.enhancedMarkdownBox",new codeplex.ui.EnhancedMarkdownBox);var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(b){var c=function(d){__extends(c,d);function c(){d.call(this);b.BaseEnhancement.registerContentChange(c.enhance)}c.enhance=function(){var a=$("iframe.markDownOutput");a.enhancedMarkdownOutput();setTimeout(function(){c._verifyEnhancement(1)},1);setTimeout(function(){c._verifyEnhancement(2)},50);setTimeout(function(){c._verifyEnhancement(3)},100);setTimeout(function(){c._verifyEnhancement(4)},200)};c._verifyEnhancement=function(f){for(var b=$("iframe.markDownOutput"),e=b.length,d,a=0;a<e;++a)if(b.eq(a).contents().find("head").html().length==0){logError("Pass #"+f+": iFrame #"+a+" was not enhanced! Data is: "+b.eq(a).attr("data-options-content"));d=$(b.eq(a)).attr("data-options-content");c.forceSetContentForElement(b.eq(a),d)}};c.prototype._create=function(){this.$iFrame=$(this.element);this.data=$(this.$iFrame).attr("data-options-content");this.setContent(this.data);c._triggerSetSize(this.$iFrame)};c.prototype.setContent=function(b,a){if(typeof a==="undefined")a="_parent";c.forceSetContentForElement(this.$iFrame,b,a)};c.forceSetContentForElement=function(b,i,d){if(typeof d==="undefined")d="_parent";var h=b.contents().find("html"),e=b.contents().find("head"),f=b.contents().find("body"),g=a.ui.UrlGenerator.cssUrl("Markdown.css");e.html("");e.append('<link rel="stylesheet" type="text/css" href="'+g+'">');e.append('<base target="'+d+'">');f.html(i);f.hide().show();h.attr("class",$("html").attr("class"));c._triggerSetSize(b)};c._triggerSetSize=function(a){if($.browser.mozilla){a[0].onload=function(){return c._setSize(a)};setTimeout(function(){c._setSize(a)},1e3)}else if($.browser.msie&&parseInt($.browser.version)>8){a.unbind("load").bind("load",function(){c._setSize(a);setTimeout(function(){c._setSize(a)},200)});setTimeout(function(){c._setSize(a)},50)}else if($.browser.msie&&parseInt($.browser.version)<=8)var b=a.contents(),d=self.setInterval(function(){if(b.height()>0||b.html()!=null&&b.html().length==0){clearInterval(d);c._setSize(a)}},50);else if($.browser.webkit)var d=self.setInterval(function(){if(a.contents()[0].styleSheets.length==1){clearInterval(d);c._setSize(a);$("img",a.contents().find("body")).load(function(){c._setSize(a)})}},50);else setTimeout(function(){c._setSize(a)},250)};c._setSize=function(b){var h,d,c,g,f,e;h=b.contents().find("html");d=b.contents().find("body");b.height(0);b.width(0);b.width(b.parent().width());if($.browser.msie&&parseInt($.browser.version)>8)c=d.outerHeight();else if($.browser.msie&&parseInt($.browser.version)<=8)c=b.contents().height();else c=h.outerHeight();e=$.browser.webkit?20:0;g=d.width()>b.width();f=g?a.ui.Constants.SCROLL_BAR_WIDTH:0;b.height(c+e+f)};return c}(b.BaseEnhancement);b.EnhancedMarkdownOutput=c})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.enhancedMarkdownOutput",new codeplex.ui.EnhancedMarkdownOutput);var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.apply(this,arguments)}a.prototype._create=function(){this.composer=this.options;this.editor=this.options.parents(".MarkdownEditor:first");this.guide=this.options.siblings(".markdownGuide");this._validateElements();this.bind()};a.prototype.destroy=function(){this.unbind()};a.prototype._validateElements=function(){if(!this.composer||this.composer.length==0)throw"Could not find markdown composer.";if(!this.guide||this.guide.length==0)throw"Could not find markdown syntax guide.";if(!this.editor||this.editor.length==0)throw"Could not find markdown editor.";};a.prototype.bind=function(){this.unbind();this._bindClickEvents();this._bindKeyEvents()};a.prototype._bindClickEvents=function(){var a=this,b=this.element;$(".md_bold",b).click(function(){return a._boldHandler()});$(".md_italics",b).click(function(){return a._italicsHandler()});$(".md_olist",b).click(function(){return a._orderedListHandler()});$(".md_ulist",b).click(function(){return a._unorderedListHandler()});$(".md_link",b).click(function(){return a._linkHandler()});$(".md_img",b).click(function(){return a._imageHandler()});$(".md_quote",b).click(function(){return a._quoteHandler()});$(".md_code",b).click(function(){return a._codeHandler()});$(".md_header",b).click(function(){return a._headerHandler()});$(".md_help",b).click(function(){return a._helpHandler()})};a.prototype._bindKeyEvents=function(){var a=this;this.composer.bind("keydown.markdownToolbar",function(b){var f=b.keyCode,d=String.fromCharCode(f).toLowerCase(),c=false,e=document.activeElement===a.composer[0];if(!e)c=false;else if(b.ctrlKey||b.metaKey){c=true;switch(d){case"b":a._boldHandler();break;case"i":a._italicsHandler();break;case"o":a._orderedListHandler();break;case"u":a._unorderedListHandler();break;case"h":a._headerHandler();break;case"k":a._codeHandler();break;case"q":a._quoteHandler();break;case"l":a._linkHandler();break;case"g":a._imageHandler();break;default:c=false;break}}if(c){b.stopPropagation();b.preventDefault();return false}return true})};a.prototype.unbind=function(){$(".control",this.element).unbind();this.composer.unbind(".markdownToolbar")};a.prototype._boldHandler=function(){this.composer.insertTextAtCaret("__","__");return false};a.prototype._italicsHandler=function(){this.composer.insertTextAtCaret("_","_");return false};a.prototype._orderedListHandler=function(){this.composer.insertTextAtStartOfEachLine("1. ");return false};a.prototype._unorderedListHandler=function(){this.composer.insertTextAtStartOfEachLine("* ");return false};a.prototype._linkHandler=function(){var a;a=this.composer.insertTextAtCaret("[","](http://www.example.com)","TEXT");this.composer.highlightText(a+2,a+24);return false};a.prototype._imageHandler=function(){this.composer.insertTextAtCaret("![Image](",")","http://example.com/logo.jpg");return false};a.prototype._quoteHandler=function(){this.composer.insertTextAtLineStart("> ");return false};a.prototype._codeHandler=function(){this.composer.selectEntireSelectedLine();this.composer.insertTextAtCaret("```\n","\n```","",false);return false};a.prototype._headerHandler=function(){this.composer.insertTextAtLineStart("#");return false};a.prototype._helpHandler=function(){this.editor.enhancedMarkdownBox("toggleGuide");return false};return a}(a.BaseEnhancement);a.MarkdownToolbar=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.markdownToolbar",new codeplex.ui.MarkdownToolbar);/*
* jQuery.splitter.js - two-pane splitter window plugin
*
* version 1.51 (2009/01/09) 
* 
* Dual licensed under the MIT and GPL licenses: 
*   http://www.opensource.org/licenses/mit-license.php 
*   http://www.gnu.org/licenses/gpl.html 
*/
(function(a){a.fn.splitter=function(b){b=b||{};return this.each(function(){var l;function p(b){if(c.outline)l=l||e.clone(false).insertAfter(f);i.css("-webkit-user-select","none");e.addClass(c.activeClass);f._posSplit=f[0][c.pxSplit]-b[c.eventPos];a(document).bind("mousemove",n).bind("mouseup",m)}function n(g){a.browser.msie&&parseInt(a.browser.version)==9&&a(splitView).trigger("resize");var b=f._posSplit+g[c.eventPos];if(c.outline){b=Math.max(0,Math.min(b,d._DA-e._DA));e.css(c.origin,b)}else k(b)}function m(d){e.removeClass(c.activeClass);var b=f._posSplit+d[c.eventPos];if(c.outline){l.remove();l=null;k(b)}i.css("-webkit-user-select","text");a(document).unbind("mousemove",n).unbind("mouseup",m);a.browser.msie&&parseInt(a.browser.version)==9&&a(splitView).trigger("resize")}function k(b){b=Math.max(f._min,d._DA-g._max,Math.min(b,f._max,d._DA-e._DA-g._min));if(b==0)b=250;e._DA=e[0][c.pxSplit];e.css(c.origin,b).css(c.fixed,d._DF);f.css(c.origin,0).css(c.split,b).css(c.fixed,d._DF);g.css(c.origin,b+e._DA).css(c.split,d._DA-e._DA-b).css(c.fixed,d._DF);!a.browser.msie&&i.trigger("resize")}function h(c,d){for(var b=0,a=1;a<arguments.length;a++)b+=Math.max(parseInt(c.css(arguments[a]))||0,0);return b}var r=(b.splitHorizontal?"h":b.splitVertical?"v":b.type)||"v",c=a.extend({activeClass:"active",pxPerKey:8,tabIndex:0,accessKey:""},({v:{keyLeft:39,keyRight:37,cursor:"e-resize",splitbarClass:"vsplitbar",outlineClass:"voutline",type:"v",eventPos:"pageX",origin:"left",split:"width",pxSplit:"offsetWidth",side1:"Left",side2:"Right",fixed:"height",pxFixed:"offsetHeight",side3:"Top",side4:"Bottom"},h:{keyTop:40,keyBottom:38,cursor:"n-resize",splitbarClass:"hsplitbar",outlineClass:"houtline",type:"h",eventPos:"pageY",origin:"top",split:"height",pxSplit:"offsetHeight",side1:"Top",side2:"Bottom",fixed:"width",pxFixed:"offsetWidth",side3:"Left",side4:"Right"}})[r],b),d=a(this).css({position:"relative"}),i=a(">*",d[0]).css({position:"absolute","z-index":"1","-moz-outline-style":"none"}),f=a(i[0]),g=a(i[1]),q=a('<a href="javascript:void(0)"></a>').attr({accessKey:c.accessKey,tabIndex:c.tabIndex,title:c.splitbarClass}).bind(a.browser.opera?"click":"focus",function(){this.focus();e.addClass(c.activeClass)}).bind("keydown",function(d){var b=d.which||d.keyCode,a=b==c["key"+c.side1]?1:b==c["key"+c.side2]?-1:0;a&&k(f[0][c.pxSplit]+a*c.pxPerKey,false)}).bind("blur",function(){e.removeClass(c.activeClass)}),e=a(i[2]||"<div></div>").insertAfter(f).css("z-index","100").append(q).attr({"class":c.splitbarClass,unselectable:"on"}).css({position:"absolute","user-select":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none"}).bind("mousedown",p);/^(auto|default|)$/.test(e.css("cursor"))&&e.css("cursor",c.cursor);e._DA=e[0][c.pxSplit];d._PBF=a.boxModel?h(d,"border"+c.side3+"Width","border"+c.side4+"Width"):0;d._PBA=a.boxModel?h(d,"border"+c.side1+"Width","border"+c.side2+"Width"):0;f._pane=c.side1;g._pane=c.side2;a.each([f,g],function(){this._min=c["min"+this._pane]||h(this,"min-"+c.split);this._max=c["max"+this._pane]||h(this,"max-"+c.split)||9999;this._init=c["size"+this._pane]===true?parseInt(a.curCSS(this[0],c.split)):c["size"+this._pane]});var j=f._init;if(!isNaN(g._init))j=d[0][c.pxSplit]-d._PBA-g._init-e._DA;if(c.cookie){!a.cookie&&alert("jQuery.splitter(): jQuery cookie plugin required");var o=parseInt(a.cookie(c.cookie));if(!isNaN(o))j=o;a(window).bind("unload",function(){var b=String(e.css(c.origin));a.cookie(c.cookie,b,{expires:c.cookieExpires||365,path:c.cookiePath||document.location.pathname})})}if(isNaN(j))j=Math.round((d[0][c.pxSplit]-d._PBA-e._DA)/2);if(c.anchorToWindow){d._hadjust=h(d,"borderTopWidth","borderBottomWidth","marginBottom");d._hmin=Math.max(h(d,"minHeight"),20);a(window).bind("resize",function(){var b=d.offset().top,c=a(window).height();d.css("height",Math.max(c-b-d._hadjust,d._hmin)+"px");!a.browser.msie&&d.trigger("resize")}).trigger("resize")}else c.resizeToWidth&&!a.browser.msie&&a(window).bind("resize",function(){d.trigger("resize")});d.bind("resize",function(b,a){if(b.target!=this)return;d._DF=d[0][c.pxFixed]-d._PBF;d._DA=d[0][c.pxSplit]-d._PBA;if(d._DF<=0||d._DA<=0)return;k(!isNaN(a)?a:!(c.sizeRight||c.sizeBottom)?f[0][c.pxSplit]:d._DA-g[0][c.pxSplit]-e._DA)}).trigger("resize",[j])})}})(jQuery);(function(a){a.fn.hoverDelete=function(b){return this.each(function(){new a.hoverDelete($(this),b)})};a.hoverDelete=function(a,b){this.element=a;this.options=b;this.init()};a.hoverDelete.fn=a.hoverDelete.prototype={};a.hoverDelete.fn.extend=a.hoverDelete.extend=a.extend;a.hoverDelete.fn.extend({init:function(){var a=this,b='<div class="remove" />',d='<img src="'+this.options.inactiveImageUrl+'" title="'+this.options.hoverText+'" />',c='<div class="ClearBoth" />';this.element.append(b).append(c);this.removeElement=this.element.children(".remove");this.removeElement.append(d);this.removeImage=this.removeElement.children("img");this.element.hover(function(){a.removeElement.show()},function(){a.removeElement.hide()});this.removeImage.hover(function(){$(this).attr("src",a.options.activeImageUrl)},function(){$(this).attr("src",a.options.inactiveImageUrl)});this.removeImage.bind("click",this,this.options.callback)}})})(jQuery);var MvcValidation_ClientIds=[],MvcValidation_ErrorLocations=[],MvcValidation_ErrorMessagesContainers=[],MvcValidation_CurrentPropertiesWithErrors=[],MvcValidation_ValidationFunctions=[],MvcValidation_ValidatonElements=[];function MvcValidation_GetClientId(b){for(var a=0;a<MvcValidation_ClientIds.length;a++)if(MvcValidation_ClientIds[a].propertyName==b)return MvcValidation_ClientIds[a].clientId;return b}function MvcValidation_GetErrorLocation(b){for(var a=0;a<MvcValidation_ErrorLocations.length;a++)if(MvcValidation_ErrorLocations[a].propertyName===b)return MvcValidation_ErrorLocations[a].locationId;return null}function MvcValidation_SetText(a,b){var c=document.getElementsByTagName("body")[0].innerText!=undefined?true:false;if(c)a.innerText=b;else a.textContent=b}function MvcValidation_CreateErrorMessagesContainer(a,d){var b=null;if(a){var c=document.createElement("span");c.setAttribute("id","MvcValidation_"+d+"ErrorMessage");if(a.type=="checkbox"&&$("label[for='"+a.id+"']").length==1)b=$("label[for='"+a.id+"']").after(c).next().get(0);else if(a.nextSibling&&a.nextSibling.tagName!="IMG"&&a.type!="file")b=a.parentNode.insertBefore(c,a.nextSibling);else if(a.type=="file"&&!$.browser.msie)b=$(a).parents().css("class","file_input")[0].parentNode.appendChild(c);else b=a.parentNode.appendChild(c);MvcValidation_SetupErrorMessageContainer(b,d);MvcValidation_CurrentPropertiesWithErrors.push(MvcValidation_GetClientId(d))}return b}function MvcValidation_SetupErrorMessageContainer(a,b){if(!a.getAttribute("validationPropertyName")){a.setAttribute("validationPropertyName",b);a.className="ErrorMessage";MvcValidation_ErrorMessagesContainers.push(a)}}function MvcValidation_AddErrorMessage(a,c,d){if(a){var b=document.createElement("span");b.setAttribute("clientError",c);b.setAttribute("id","MvcValidation_"+c+"ErrorMessage"+a.childNodes.length);MvcValidation_SetText(b,d);a.appendChild(b);a.style.display=""}}function MvcValidation_ShowGeneralErrorMessage(c,b){var a=$("#MvcValidation_GeneralErrorMessages")[0];a&&MvcValidation_AddErrorMessage(a,c,b)}function MvcValidation_ShowErrorMessage(a,c){var f=$("#"+MvcValidation_GetClientId(a))[0],d=MvcValidation_GetErrorLocation(a);if(!f&&!d)MvcValidation_ShowGeneralErrorMessage(a,c);else if(d){var e=$("#"+d)[0];MvcValidation_SetupErrorMessageContainer(e,a);MvcValidation_AddErrorMessage(e,a,c)}else{var b=$("#MvcValidation_"+a+"ErrorMessage")[0];if(!b)b=MvcValidation_CreateErrorMessagesContainer(f,a);MvcValidation_AddErrorMessage(b,a,c)}}function MvcValidation_Required(b,d){var a=$("#"+MvcValidation_GetClientId(b))[0];if(a==undefined||a==null)return{propertyName:b,isValid:true,errorMessage:d};if(a.tagName!="INPUT"&&a.tagName!="TEXTAREA"&&a.tagName!="SELECT")throw TypeError();var c=true;if(a.type&&a.type=="checkbox")c=a.checked;else{var e=MvcValidation_NormalizeText(jQuery.trim($(a).val()));c=e.length>0}return{propertyName:b,isValid:c,errorMessage:d}}function MvcValidation_SelectionRequired(b,d){var a=$('input[name="'+MvcValidation_GetClientId(b)+'"]');if(a.length===0)return{propertyName:b,isValid:true,errorMessage:d};a.each(function(){if(this.tagName!=="INPUT"&&(this.type!=="radio"||this.type!=="checkbox"))throw TypeError();});for(var e=false,c=0;c<a.length;c++)if(a[c].checked){e=true;break}return{propertyName:b,isValid:e,errorMessage:d}}function MvcValidation_RequiresFormat(b,g,f,d){var a=$("#"+MvcValidation_GetClientId(b))[0];if(a==undefined||a==null)return{propertyName:b,isValid:true,errorMessage:d};if(a.tagName!="INPUT"&&a.tagName!="TEXTAREA")throw TypeError();var c=true;if(a.type=="checkbox")c=false;else if(a.value.length>0){var e=a.value.match(g);if(f&&e||!f&&!e)c=false}return{propertyName:b,isValid:c,errorMessage:d}}function MvcValidation_RequiresConfirmation(b,d,e,f){var c=$("#"+MvcValidation_GetClientId(b.toString().replace("Confirmation","")))[0],a=$("#"+MvcValidation_GetClientId(b))[0];if(c==undefined||c==null)return{propertyName:b,isValid:true,errorMessage:d};if(a==undefined||a==null)return{propertyName:b,isValid:true,errorMessage:d};if(c.tagName!="INPUT")throw TypeError();if(a.tagName!="INPUT")throw TypeError();var g=f&&a.value==""||!e&&c.value==a.value||e&&c.value.toLowerCase()==a.value.toLowerCase();return{propertyName:b,isValid:g,errorMessage:d}}function MvcValidation_Range(c,e,g,h,i){var a=$("#"+MvcValidation_GetClientId(c))[0];if(a==undefined||a==null)return{propertyName:c,isValid:true,errorMessage:e};if(a.tagName!="INPUT"&&a.tagName!="TEXTAREA")throw TypeError();var b=true;if(!i){var d=parseInt(a.value);if(!isNaN(d)){if(d<g||d>h)b=false}else b=false}else{var f=MvcValidation_NormalizeText(jQuery.trim(a.value));if(f.length<g||f.length>h)b=false}return{propertyName:c,isValid:b,errorMessage:e}}function MvcValidation_Conditional(f,c,e,b,a){if($("#"+f+":checked").length>0){var d=MvcValidation_Required(c,b);if(d.isValid&&e.length>0){if(a==null)a=b;d=MvcValidation_RequiresFormat(c,e,false,a)}return d}return{propertyName:c,isValid:true,errorMessage:b}}function MvcValidation_NormalizeText(a){if(a.indexOf("\r")>-1){if(a.indexOf("\r\n")>-1)a=a.split("\r\n").join("\n");if(a.indexOf("\r")>-1)a=a.split("\r").join("\n")}return a}function MvcValidation_AddErrors(c,d){var b=$("#MvcValidation.Errors."+c)[0];if(b){var a=document.createElement("span");a.setAttribute("clientError",c);a.setAttribute("id","MvcValidation_"+c+"ErrorMessage"+element.childNodes.length);MvcValidation_SetText(a,d);b.appendChild(a);b.style.display=""}}function MvcValidation_RemoveErrors(a,d){if(a&&a.childNodes&&a.childNodes.length>0)for(var b=a.childNodes.length-1;b>-1;b--){var c=a.childNodes[b];if(c.attributes)if(!d&&c.getAttribute("clientError")||d&&d==c.getAttribute("clientError"))a.removeChild(a.childNodes[b]);else{var f=c.getAttribute("propertiesToObserve");if(f)for(var g=f.split(","),e=0;e<g.length;e++)if(g[e]==d){a.removeChild(a.childNodes[b]);break}}}}function MvcValidation_ClearErrors(b){if(b&&b.length>0)for(var a=0;a<MvcValidation_ErrorMessagesContainers.length;a++){var c=MvcValidation_ErrorMessagesContainers[a];if(b==c.getAttribute("validationPropertyName")){MvcValidation_RemoveErrors(c,b);break}}else for(var a=0;a<MvcValidation_ErrorMessagesContainers.length;a++){var c=MvcValidation_ErrorMessagesContainers[a];MvcValidation_RemoveErrors(c,null)}var d=$("#MvcValidation_GeneralErrorMessages")[0];d&&MvcValidation_RemoveErrors(d,b);MvcValidation_CurrentPropertiesWithErrors=[]}function MvcValidation_Validate(a){return MvcValidation_ValidateInternal(null,a)}function MvcValidation_ValidateInternal(b,g){var d=[];MvcValidation_ClearErrors(b);b&&MvcValidation_ClearErrors(b+"Confirmation");var h=[],e=MvcValidation_FindRequiredValidators(b);if(e)for(var a=0;a<e.length;a++)if(g==undefined||e[a].group==g){var c=e[a].validationFunction();if(c&&!c.isValid){MvcValidation_ShowErrorMessage(c.propertyName,c.errorMessage);h.push(c.propertyName)}}for(var a=0;a<MvcValidation_ValidationFunctions.length;a++){var f=MvcValidation_ValidationFunctions[a];if(g==undefined||f.group==g)!MvcValidation_HasFailedRequiredValidation(h,f.clientId)&&(b==null||b.length>0&&f.clientId==b)&&d.push(f.validationFunction(b!=null))}for(var i=h.length==0,a=0;a<d.length;a++)if(!d[a].isValid){i=false;MvcValidation_ShowErrorMessage(d[a].propertyName,d[a].errorMessage)}MvcValidation_FocusFirstError();return i}function MvcValidation_FocusFirstError(){if(MvcValidation_CurrentPropertiesWithErrors.length===0)return;for(var b=$(":input"),a=0;a<b.length;a++){var c=$(b[a]).attr("id");if($.inArray(c,MvcValidation_CurrentPropertiesWithErrors)>=0){$(b[a]).is(":visible")&&b[a].focus();break}}}function MvcValidation_FindRequiredValidators(b){for(var d=[],c=0;c<MvcValidation_ValidationFunctions.length;c++){var a=MvcValidation_ValidationFunctions[c];(!b&&a.validatorName=="required"||b&&b.length>0&&a.clientId==b&&a.validatorName=="required")&&d.push(a)}return d}function MvcValidation_HasFailedRequiredValidation(b,c){for(var a=0;a<b.length;a++)if(b[a]==c)return true}function MvcValidation_HookupEvents(){for(var b=0;b<MvcValidation_ValidatonElements.length;b++){var a=MvcValidation_ValidatonElements[b];if($("#"+MvcValidation_GetClientId(a))[0])eval('$("#" + MvcValidation_GetClientId("'+a+'")).bind("change", function() { MvcValidation_ValidateInternal("'+a+'"); });');else $('input[name="'+MvcValidation_GetClientId(a)+'"]').each(function(){eval('$(this).bind("change", function() { MvcValidation_ValidateInternal("'+a+'"); });')});if($("#"+MvcValidation_GetClientId(a+"Confirmation"))[0])eval('$("#" + MvcValidation_GetClientId("'+a+'Confirmation")).bind("change", function() { MvcValidation_ValidateInternal("'+a+'"); });')}};(function(a){var b={idPrefix:""};a.fn.rating=function(c){c=a.extend({},b,c);return this.each(function(){new a.rating(this,c)})};a.rating=function(a,b){this.element=a;this.options=b;this.init()};a.rating.fn=a.rating.prototype={};a.rating.fn.extend=a.rating.extend=a.extend;a.rating.fn.extend({init:function(){a(this.element).bind("mouseout",this,this.reset);a(this.element).children(".RatingStar").bind("mouseover",this,this.hoverStar).bind("click",this,this.clickStar)},reset:function(b){var c=parseInt(a("#"+b.data.options.idPrefix+"currentRating").val());b.data.update(c)},hoverStar:function(b){var c=parseInt(a(b.target).attr("d:rating"));b.data.update(c)},clickStar:function(b){var c=a(b.target).attr("d:rating");a("#"+b.data.options.idPrefix+"currentRating").val(c)},update:function(a){this.updateStars(a);this.updateText(a)},updateStars:function(c){for(i=0;i<=5;i++){var b=a("#"+this.options.idPrefix+"Rating_Star_"+(i-1));if(i<=c)b.attr("class","RatingStar FilledRatingStarUser");else b.attr("class","RatingStar EmptyRatingStar")}},updateText:function(b){a("#"+this.options.idPrefix+"ratingName").text(this.getRatingText(b))},getRatingText:function(b){var a;switch(b){case 1:a="Very poor";break;case 2:a="Poor";break;case 3:a="Fair";break;case 4:a="Good";break;case 5:a="Excellent";break;default:a="";break}return a}})})(jQuery);(function(a){a.fn.voting=function(b){return this.each(function(){new a.voting(this,b)})};a.voting=function(a,b){this.element=a;this.workItemId=$(a).attr("d:workItemId");this.options=b;this.init()};a.voting.fn=a.voting.prototype={};a.voting.fn.extend=a.voting.extend=a.extend;a.voting.fn.extend({init:function(){$(this.element).find(".vote").bind("click",this,this.vote);$(this.element).find(".vote_loggedout").bind("click",this,this.login)},vote:function(c){var b=c.data.workItemId;if($("#VotedLabel_WorkItemId"+b).is(":visible"))return false;a.post(c.data.options.voteUrl,{workItemId:b},function(f){if(f.success){var c="#VoteCountLabel_WorkItemId"+b,e="#VoteLink"+b,d="#VotedLabel_WorkItemId"+b,g=parseInt($(c).html());a(c).html(++g);a(d).show();a(e).hide()}});return false},login:function(a){window.location=a.data.options.loginUrl.replace("=-1","="+a.data.workItemId);return false}})})(jQuery);function InitializePullRequestControls(c,b,a,d,f,e){$("input#CancelRequestButton").click(function(){$("#Title").val("");$("#PullRequestDescriptionError").hide();$("#PullRequestTitleError").hide();$("#PullRequestSubMessage").hide();$("#PullRequestForkBranchError").hide();$("#PullRequestProjectBranchError").hide()});$("#ClosePullRequestPanel #CloseOk").click(function(){ClosePullRequest(b,true)});$(".ClosePullRequest").click(function(){$("#NetworkError").hide();$("#PullRequestError").hide();$("#PullRequestForkBranchRow").hide();$("#PullRequestProjectBranchRow").hide();$("#PullRequestTitleRow").hide();$("PullRequestAction").val("close");$("#PullRequestType").val($(this).attr("d:type"));$("#PullRequestName").val($(this).attr("d:name"));$("#PullRequestUser").val($(this).attr("d:user"));$("#PullRequestId").val($(this).attr("d:pullRequestId"));var a=$(this).attr("d:status");$("#PullRequestStatus").val(a);if(a==="4")OpenDialog("#ClosePullRequestPanel",true,"41em");else{if(a==="2"){$("#PullRequestSubMessage").show();$("h2 .Title","#PullRequest").text("Accept Pull Request")}else if(a==="3"){$("#PullRequestSubMessage").hide();$("h2 .Title","#PullRequest").text("Decline Pull Request")}OpenDialog("#PullRequest",true,"50em");if(CodePlex.UI.isIE)setTimeout('$("#Title").select()',100);else $("#Title").select()}return false});$(".UpdatePullRequest").click(function(){var g=$(this).attr("d:type"),f=$(this).attr("d:name"),e=$(this).attr("d:user"),b=$(this).attr("d:pullRequestId");a=a.replace("-1",b);function d(){OpenDialog("#UpdatePullRequestDialog",false);$("#NetworkError").hide();$("#PullRequestError").hide();$("#PullRequestStatus").val(status);$("#PullRequestSubMessage").hide();CodePlex.UpdateProgress.show();$.ajax({type:"POST",url:a,data:{type:g,repo:f,owner:e,pullRequestId:b},success:function(a){if(a.IsError){CodePlex.UpdateProgress.hide();alert(a.Message)}else location.href=a.RedirectUrl}})}function c(){OpenDialog("#UpdatePullRequestDialog",false)}CodePlex.UpdateProgress.show();$.ajaxSetup({cache:false});$("#UpdatePullRequest").load(a,function(){$("#UpdatePullRequestButton").click(d);$("#CancelPullRequestButton").click(c);CodePlex.UpdateProgress.hide();OpenDialog("#UpdatePullRequestDialog",true,"50em")});return false});$(".DeleteNetwork").bind("click",function(){var e=$(this).attr("d:type"),c=$(this).attr("d:name"),b=$(this).attr("d:user"),a=0;if($("#AllNetworkToggle").val()==="UserSocialNetworks")a=1;$("#NetworkError").hide();OpenDialog("#deleteNetworkDialog",true,"30em");$("#deleteNetworkDialog #CloseOk").unbind("click").bind("click",function(){CodePlex.UpdateProgress.show();$.ajax({url:d,data:{type:e,repositoryName:c,owner:b,filterView:a},dataType:"json",type:"DELETE",success:function(a){if(a.IsError){$("#NetworkError").text(a.Message).show();CodePlex.UpdateProgress.hide()}else location.href=a.RedirectUrl}})});return false});$(".SendPullRequest").bind("click",function(){var b,a;b=$(this).attr("href");a=$("#SelectedBranch").val();if(a)window.location.href=b+"?branch="+a;else window.location.href=b;return false});$("#SendRequestButton").bind("click",function(){if($("#PullRequestAction").val()==="send")return SendPullRequest(c,true);else return ClosePullRequest(b,false)});$("#CancelRequestButton").bind("click",function(){OpenDialog("#PullRequest",false);$("#inputText").val("");$("#PullRequestError").hide()});$("#ForkBranch").change(function(){var a=$(this).val(),b=$("#ProjectBranch");if(a=="")return;b.val(a);b.val()!=a&&b.val(["master","default"])})}function Validate(b){var a=true;if(!b&&$("#PullRequestForkBranchRow").is(":visible")&&$("#ForkBranch").val().length==0){$("#PullRequestForkBranchError").text("Please select a branch from your fork.").show();$("#ForkBranch").change(function(){$("#PullRequestForkBranchError").hide();$("#PullRequestProjectBranchError").hide()});a=false}if(!b&&$("#PullRequestProjectBranchRow").is(":visible")&&$("#ProjectBranch").val().length==0){$("#PullRequestProjectBranchError").text("Please select a branch from the project.").show();$("#ProjectBranch").change(function(){$("#PullRequestProjectBranchError").hide()});a=false}if(!b&&$normalizeText($("#inputText").val()).length==0){$("#PullRequestDescriptionError").text("Please enter a comment.").show();$("#inputText").bind("keypress",function(){$("#PullRequestDescriptionError").hide()});a=false}if(!b&&$("#PullRequestTitleRow").is(":visible")&&$normalizeText($("#Title").val()).length==0){$("#PullRequestTitleError").text("Please enter a title.").show();$("#Title").bind("keypress",function(){$("#PullRequestTitleError").hide()});a=false}return a}function ClosePullRequest(b,a){if(!Validate(a))return false;CodePlex.UpdateProgress.show();$.ajax({url:b,data:{type:$("#PullRequestType").val(),repositoryName:$("#PullRequestName").val(),pullRequestId:$("#PullRequestId").val(),owner:$("#PullRequestUser").val(),status:$("#PullRequestStatus").val(),comment:$("#inputText").val(),filterView:$("#FilterView").val()},dataType:"json",type:"DELETE",success:function(b){if(b.IsError){if(a)$("#NetworkError").text(b.Message).show();else $("#ClosePullRequestError").text(b.Message).show();CodePlex.UpdateProgress.hide()}else location.reload(true)}})}function SendPullRequest(a,b){if(!Validate(false))return;CodePlex.UpdateProgress.show();$.post(a,{type:$("#PullRequestType").val(),owner:$("#PullRequestOwner").val(),repositoryName:$("#PullRequestName").val(),title:$("#Title").val(),description:$("#inputText").val(),filterView:$("#FilterView").val(),forkBranch:$("#ForkBranch").val(),projectBranch:$("#ProjectBranch").val()},function(a){if(a.IsError){$("#PullRequestError").text(a.Message).show();CodePlex.UpdateProgress.hide()}else if(b)location.href=a.RedirectUrl;else location.reload(true)},"json")};$(function(){$("a.SignInLink, a#signOutLink").click(function(){var b=$(this).attr("href"),a=window.location.hash.replace(/#/g,"%23");a.length>0&&$(this).attr("href",b+a);return true})});jQuery.fn.visible=function(a){if(a)this.show();else this.hide()};var codeplex;(function(a){(function(b){var a=function(){function a(){}a.addQueryString=function(b,c){var a=b;if(b.indexOf("?")===-1)a+="?";else a+="&";a+=$.param(c);return a};a.redirect=function(a){window.location.href=a};a.openWindow=function(a){window.open(a)};return a}();b.UrlHelper=a})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));var codeplex;(function(a){(function(c){var b=function(){function b(){}b.baseUrl=function(){return location.protocol+"//"+location.hostname};b.cssUrl=function(d){var a,b,c=$("#MasterCss");if(c.length==0)return"";a=c.attr("href").replace("StyleSheet.ashx",d);if($.browser.msie&&a.charAt(0)==="/"){b=a.split("/");a=document.location.protocol+"//"+document.location.host+"/"+b[1]+"/"+b[2]+"/"+b[4]}return a};b.errorReportingUrl=function(){return this.baseUrl()+"/site/api/log/error"};b.projectUrl=function(){var c,g=document.domain.substring(0,document.domain.indexOf(".")),d=a.ui.UrlGenerator.baseUrl();if(!b.isEmpty(g))c=d;else{var e=document.URL.substring(d.length+1),f=e.substring(0,e.indexOf("/"));c=d+"/"+f}return c};b.isEmpty=function(a){return!a||0===a.length};return b}();c.UrlGenerator=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));var codeplex;(function(a){(function(a){var b=function(){function b(){}b.resetCache=function(){b._antiForgeryToken=undefined;b._backupAntiForgeryTokenName=undefined};b.addTokenToForm=function(a){a.find("input[name="+b.TOKEN_NAME+"]").length===0&&a.append(b._getAntiForgeryTokenFormElements())};b.addTokenToData=function(a){var d=b._getAntiForgeryTokenValue(),c=b._getBackupAntiForgeryTokenNameValue();if(a===null||a===undefined)a={};if(d)a.__RequestVerificationToken=d;if(c)a.__RequestVerificationToken2=c;return a};b.addTokenToUrl=function(e){var d={},c;d[b.TOKEN_NAME]=b._getAntiForgeryTokenValue();c=b._getBackupAntiForgeryTokenNameValue();if(c)d[b.BACKUP_TOKEN_NAME]=c;return a.UrlHelper.addQueryString(e,d)};b._getAntiForgeryTokenValue=function(){if(!b._antiForgeryToken)b._antiForgeryToken=$("input[name="+b.TOKEN_NAME+"]").val();return b._antiForgeryToken};b._getBackupAntiForgeryTokenNameValue=function(){if(!b._backupAntiForgeryTokenName)b._backupAntiForgeryTokenName=$("input[name="+b.BACKUP_TOKEN_NAME+"]").val();return b._backupAntiForgeryTokenName};b._getAntiForgeryTokenFormElements=function(){var a,c;a=$("<input />").attr("type","hidden").attr("name",b.TOKEN_NAME).val(b._getAntiForgeryTokenValue());c=b._getBackupAntiForgeryTokenNameValue();if(c)a=a.add($("<input />").attr("type","hidden").attr("name",b.BACKUP_TOKEN_NAME).val(c));return a};b.TOKEN_NAME="__RequestVerificationToken";b.BACKUP_TOKEN_NAME="__RequestVerificationToken2";return b}();a.AntiForgery=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));(function(a){var c=a.ajax;a.ajax=function(e,a){var b,d;if(typeof e==="object"){a=e;d=a.url}else d=e;b=a.type?a.type.toLowerCase():"";if(b==="post"||b==="put"||b==="patch"||b==="delete")if(typeof a.data!=="string")a.data=codeplex.ui.AntiForgery.addTokenToData(a.data);else a.url=codeplex.ui.AntiForgery.addTokenToUrl(d);c.call(this,a)};a.fn.addAntiForgeryToken=function(){return this.each(function(){var a=$(this);codeplex.ui.AntiForgery.addTokenToForm(a)})};function b(){$("form").addAntiForgeryToken()}codeplex.ui.BaseEnhancement.registerContentChange(function(){b()});b()})(jQuery);var helpJustClosed=false;$(function(){$.widget("codeplex.keyboardShortcuts",{options:{previousNextItemSuffix:""},_create:function(){this.initialized=false;this._prepareDocumentation()},_init:function(){if(this.initialized)return;$(document).bind("keydown",this,function(a){a.data._handleShortcut(a)}).bind("shortcuts",this,function(a){a.data.open()});this.initialized=true},_handleShortcut:function(a){if($("#ShortcutHelp").is(":visible"))return true;var c=$keyCode(a),e=String.fromCharCode(c).toLowerCase(),b=this.options,d=false,f=a.target.tagName==="INPUT"||a.target.tagName==="TEXTAREA";if((a.ctrlKey||a.metaKey)&&e==="s"&&b.save){b.save();d=true}else if(!a.metaKey&&(e==="o"||c===13)&&b.edit&&!f){b.edit();d=true}else if((e==="j"||!a.metaKey&&e==="p"||!a.altKey&&c===37||!a.altKey&&c===100)&&b.previousItem&&!f){b.previousItem();d=true}else if((!a.metaKey&&e==="k"||!a.metaKey&&e==="n"||!a.altKey&&c===39||!a.altKey&&c===102)&&b.nextItem&&!f){b.nextItem();d=true}else if((e==="i"||a.altKey&&c===38||a.altKey&&c===104)&&b.previousBlock&&!f){b.previousBlock();d=true}else if((e==="m"||a.altKey&&c===40||a.altKey&&c===98)&&b.nextBlock&&!f){b.nextBlock();d=true}else if(c===27&&b.cancel){if(helpJustClosed)helpJustClosed=false;else b.cancel();d=true}else if(!a.metaKey&&e==="r"&&b.addComment&&!f&&!CodePlex.UI.isOpera){b.addComment();d=true}else if(!(a.ctrlKey||a.metaKey)&&e==="c"&&b.createItem&&!f){b.createItem();d=true}else if(a.shiftKey&&c===191&&!f){this.open();d=true}if(d){a.cancelBubble=true;a.returnValue=false;if(a.stopPropagation){a.stopPropagation();a.preventDefault()}return false}return true},_prepareDocumentation:function(){var a="";if(this.options.previousItem)a+='<div id="PreviousItemHelp" class="StandardPaddingBottom">previous'+this.options.previousNextItemSuffix+': <span class="Bold">\u2190</span>, <span class="Bold">j</span>, or <span class="Bold">p</span></div>';if(this.options.nextItem)a+='<div id="NextItemHelp" class="StandardPaddingBottom">next'+this.options.previousNextItemSuffix+': <span class="Bold">\u2192</span>, <span class="Bold">k</span>, or <span class="Bold">n</span></div>';if(this.options.previousBlock)a+='<div id="PreviousBlockHelp" class="StandardPaddingBottom">previous diff block: <span class="Bold">alt + \u2191</span> or <span class="Bold">i</span></div>';if(this.options.nextBlock)a+='<div id="NextBlockHelp" class="StandardPaddingBottom">next diff block: <span class="Bold">alt + \u2193</span> or <span class="Bold">m</span></div>';if(this.options.createItem)a+='<div id="CreateItemHelp" class="StandardPaddingBottom">create new item: <span class="Bold">c</span></div>';if(this.options.edit)a+='<div id="EditItemHelp" class="StandardPaddingBottom">edit: <span class="Bold">o</span> or <span class="Bold">enter</span></div>';if(this.options.addComment)a+='<div id="AddCommentItemHelp" class="StandardPaddingBottom">add a comment: <span class="Bold">r</span></div>';if(this.options.save)a+='<div id="SaveItemHelp" class="StandardPaddingBottom">save: <span class="Bold">ctrl + s</span></div>';if(this.options.cancel)a+='<div id="CancelItemHelp" class="StandardPaddingBottom">cancel: <span class="Bold">esc</span></div>';a+='<div id="HelpItemHelp">show this help dialog: <span class="Bold">?</span></div>';var b=$('<div id="ShortcutHelp" class="modal" style="display:none;position:fixed;top:50%"><div class="row" style="width:225px"><h2>Keyboard Shortcuts <a class="close" style="cursor:pointer">X</a></h2></div></div>');$('<div class="modal_info" />').appendTo(b).append(a);$("body").append(b)},open:function(){$("#ShortcutHelp").length==0&&this._prepareDocumentation();OpenDialogNonModal("#ShortcutHelp",true,"350px","","",function(){$("body").css("position","fixed")},function(){$("body").css("position","static")})},destroy:function(){$(document).unbind("keydown").unbind("shortcuts");$("#ShortcutHelp").remove();this.initialized=false}})});/*
* imgAreaSelect jQuery plugin
* version 0.9.3
*
* Note:  Microsoft Corporation is not the author of this file.  Microsoft obtained this file from http://odyniec.net/projects/imgareaselect/ under the license which is reproduced below for informational purposes only. Microsoft grants you the right to use this file for the sole purpose of interacting with the www.codeplex.com web site using your web browser, subject to the terms of use at http://www.codeplex.com/Legal/Terms.aspx.  Microsoft reserves all other rights, none of which are granted by implication, estoppel or otherwise. 
*
* Copyright (c) 2008-2010 Michal Wojciechowski (odyniec.net)
*
*
* http://odyniec.net/projects/imgareaselect/
*
*
*
* Copyright 2010, Copyright (c) 2008-2010 Michal Wojciechowski (odyniec.net) http://odyniec.net/projects/imgareaselect/)
*
* Permission is hereby granted, free of charge, to any person obtaining
* a copy of this software and associated documentation files (the
* "Software"), to deal in the Software without restriction, including
* without limitation the rights to use, copy, modify, merge, publish,
* distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to
* the following conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
* LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function($){var abs=Math.abs,max=Math.max,min=Math.min,round=Math.round;function div(){return $('<div/>')}$.imgAreaSelect=function(img,options){var $img=$(img),imgLoaded,$box=div(),$area=div(),$border=div().add(div()).add(div()).add(div()),$outer=div().add(div()).add(div()).add(div()),$handles=$([]),$areaOpera,left,top,imgOfs,imgWidth,imgHeight,$parent,parOfs,zIndex=0,position='absolute',startX,startY,scaleX,scaleY,resizeMargin=10,resize,minWidth,minHeight,maxWidth,maxHeight,aspectRatio,shown,x1,y1,x2,y2,selection={x1:0,y1:0,x2:0,y2:0,width:0,height:0},docElem=document.documentElement,$p,d,i,o,w,h,adjusted;function viewX(x){return x+imgOfs.left-parOfs.left}function viewY(y){return y+imgOfs.top-parOfs.top}function selX(x){return x-imgOfs.left+parOfs.left}function selY(y){return y-imgOfs.top+parOfs.top}function evX(event){return event.pageX-parOfs.left}function evY(event){return event.pageY-parOfs.top}function getSelection(noScale){var sx=noScale||scaleX,sy=noScale||scaleY;return{x1:round(selection.x1*sx),y1:round(selection.y1*sy),x2:round(selection.x2*sx),y2:round(selection.y2*sy),width:round(selection.x2*sx)-round(selection.x1*sx),height:round(selection.y2*sy)-round(selection.y1*sy)}}function setSelection(x1,y1,x2,y2,noScale){var sx=noScale||scaleX,sy=noScale||scaleY;selection={x1:round(x1/sx),y1:round(y1/sy),x2:round(x2/sx),y2:round(y2/sy)};selection.width=selection.x2-selection.x1;selection.height=selection.y2-selection.y1}function adjust(){if(!$img.width())return;imgOfs={left:round($img.offset().left),top:round($img.offset().top)};imgWidth=$img.width();imgHeight=$img.height();minWidth=options.minWidth||0;minHeight=options.minHeight||0;maxWidth=min(options.maxWidth||1<<24,imgWidth);maxHeight=min(options.maxHeight||1<<24,imgHeight);if($().jquery=='1.3.2'&&position=='fixed'&&!docElem['getBoundingClientRect']){imgOfs.top+=max(document.body.scrollTop,docElem.scrollTop);imgOfs.left+=max(document.body.scrollLeft,docElem.scrollLeft)}parOfs=$.inArray($parent.css('position'),['absolute','relative'])+1?{left:round($parent.offset().left)-$parent.scrollLeft(),top:round($parent.offset().top)-$parent.scrollTop()}:position=='fixed'?{left:$(document).scrollLeft(),top:$(document).scrollTop()}:{left:0,top:0};left=viewX(0);top=viewY(0);if(selection.x2>imgWidth||selection.y2>imgHeight)doResize()}function update(resetKeyPress){if(!shown)return;$box.css({left:viewX(selection.x1),top:viewY(selection.y1)}).add($area).width(w=selection.width).height(h=selection.height);$area.add($border).add($handles).css({left:0,top:0});$border.width(max(w-$border.outerWidth()+$border.innerWidth(),0)).height(max(h-$border.outerHeight()+$border.innerHeight(),0));$($outer[0]).css({left:left,top:top,width:selection.x1,height:imgHeight});$($outer[1]).css({left:left+selection.x1,top:top,width:w,height:selection.y1});$($outer[2]).css({left:left+selection.x2,top:top,width:imgWidth-selection.x2,height:imgHeight});$($outer[3]).css({left:left+selection.x1,top:top+selection.y2,width:w,height:imgHeight-selection.y2});w-=$handles.outerWidth();h-=$handles.outerHeight();switch($handles.length){case 8:$($handles[4]).css({left:w/2});$($handles[5]).css({left:w,top:h/2});$($handles[6]).css({left:w/2,top:h});$($handles[7]).css({top:h/2});case 4:$handles.slice(1,3).css({left:w});$handles.slice(2,4).css({top:h})}if(resetKeyPress!==false){if($.imgAreaSelect.keyPress!=docKeyPress)$(document).unbind($.imgAreaSelect.keyPress,$.imgAreaSelect.onKeyPress);if(options.keys)$(document)[$.imgAreaSelect.keyPress]($.imgAreaSelect.onKeyPress=docKeyPress)}if($.browser.msie&&$border.outerWidth()-$border.innerWidth()==2){$border.css('margin',0);setTimeout(function(){$border.css('margin','auto')},0)}}function doUpdate(resetKeyPress){adjust();update(resetKeyPress);x1=viewX(selection.x1);y1=viewY(selection.y1);x2=viewX(selection.x2);y2=viewY(selection.y2)}function hide($elem,fn){options.fadeSpeed?$elem.fadeOut(options.fadeSpeed,fn):$elem.hide()}function areaMouseMove(event){var x=selX(evX(event))-selection.x1,y=selY(evY(event))-selection.y1;if(!adjusted){adjust();adjusted=true;$box.one('mouseout',function(){adjusted=false})}resize='';if(options.resizable){if(y<=resizeMargin)resize='n';else if(y>=selection.height-resizeMargin)resize='s';if(x<=resizeMargin)resize+='w';else if(x>=selection.width-resizeMargin)resize+='e'}$box.css('cursor',resize?resize+'-resize':options.movable?'move':'');if($areaOpera)$areaOpera.toggle()}function docMouseUp(event){$('body').css('cursor','');if(options.autoHide||selection.width*selection.height==0)hide($box.add($outer),function(){$(this).hide()});options.onSelectEnd(img,getSelection());$(document).unbind('mousemove',selectingMouseMove);$box.mousemove(areaMouseMove)}function areaMouseDown(event){if(event.which!=1)return false;adjust();if(resize){$('body').css('cursor',resize+'-resize');x1=viewX(selection[/w/.test(resize)?'x2':'x1']);y1=viewY(selection[/n/.test(resize)?'y2':'y1']);$(document).mousemove(selectingMouseMove).one('mouseup',docMouseUp);$box.unbind('mousemove',areaMouseMove)}else if(options.movable){startX=left+selection.x1-evX(event);startY=top+selection.y1-evY(event);$box.unbind('mousemove',areaMouseMove);$(document).mousemove(movingMouseMove).one('mouseup',function(){options.onSelectEnd(img,getSelection());$(document).unbind('mousemove',movingMouseMove);$box.mousemove(areaMouseMove)})}else $img.mousedown(event);return false}function fixAspectRatio(xFirst){if(aspectRatio)if(xFirst){x2=max(left,min(left+imgWidth,x1+abs(y2-y1)*aspectRatio*(x2>x1||-1)));y2=round(max(top,min(top+imgHeight,y1+abs(x2-x1)/aspectRatio*(y2>y1||-1))));x2=round(x2)}else{y2=max(top,min(top+imgHeight,y1+abs(x2-x1)/aspectRatio*(y2>y1||-1)));x2=round(max(left,min(left+imgWidth,x1+abs(y2-y1)*aspectRatio*(x2>x1||-1))));y2=round(y2)}}function doResize(){x1=min(x1,left+imgWidth);y1=min(y1,top+imgHeight);if(abs(x2-x1)<minWidth){x2=x1-minWidth*(x2<x1||-1);if(x2<left)x1=left+minWidth;else if(x2>left+imgWidth)x1=left+imgWidth-minWidth}if(abs(y2-y1)<minHeight){y2=y1-minHeight*(y2<y1||-1);if(y2<top)y1=top+minHeight;else if(y2>top+imgHeight)y1=top+imgHeight-minHeight}x2=max(left,min(x2,left+imgWidth));y2=max(top,min(y2,top+imgHeight));fixAspectRatio(abs(x2-x1)<abs(y2-y1)*aspectRatio);if(abs(x2-x1)>maxWidth){x2=x1-maxWidth*(x2<x1||-1);fixAspectRatio()}if(abs(y2-y1)>maxHeight){y2=y1-maxHeight*(y2<y1||-1);fixAspectRatio(true)}selection={x1:selX(min(x1,x2)),x2:selX(max(x1,x2)),y1:selY(min(y1,y2)),y2:selY(max(y1,y2)),width:abs(x2-x1),height:abs(y2-y1)};update();options.onSelectChange(img,getSelection())}function selectingMouseMove(event){x2=resize==''||/w|e/.test(resize)||aspectRatio?evX(event):viewX(selection.x2);y2=resize==''||/n|s/.test(resize)||aspectRatio?evY(event):viewY(selection.y2);doResize();return false}function doMove(newX1,newY1){x2=(x1=newX1)+selection.width;y2=(y1=newY1)+selection.height;$.extend(selection,{x1:selX(x1),y1:selY(y1),x2:selX(x2),y2:selY(y2)});update();options.onSelectChange(img,getSelection())}function movingMouseMove(event){x1=max(left,min(startX+evX(event),left+imgWidth-selection.width));y1=max(top,min(startY+evY(event),top+imgHeight-selection.height));doMove(x1,y1);event.preventDefault();return false}function startSelection(){adjust();x2=x1;y2=y1;doResize();resize='';if($outer.is(':not(:visible)'))$box.add($outer).hide().fadeIn(options.fadeSpeed||0);shown=true;$(document).unbind('mouseup',cancelSelection).mousemove(selectingMouseMove).one('mouseup',docMouseUp);$box.unbind('mousemove',areaMouseMove);options.onSelectStart(img,getSelection())}function cancelSelection(){$(document).unbind('mousemove',startSelection);hide($box.add($outer));selection={x1:selX(x1),y1:selY(y1),x2:selX(x1),y2:selY(y1),width:0,height:0};options.onSelectChange(img,getSelection());options.onSelectEnd(img,getSelection())}function imgMouseDown(event){if(event.which!=1||$outer.is(':animated'))return false;adjust();startX=x1=evX(event);startY=y1=evY(event);$(document).one('mousemove',startSelection).one('mouseup',cancelSelection);return false}function windowResize(){doUpdate(false)}function imgLoad(){imgLoaded=true;setOptions(options=$.extend({classPrefix:'imgareaselect',movable:true,resizable:true,parent:'body',onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},options));$box.add($outer).css({visibility:''});if(options.show){shown=true;adjust();update();$box.add($outer).hide().fadeIn(options.fadeSpeed||0)}setTimeout(function(){options.onInit(img,getSelection())},0)}var docKeyPress=function(event){var k=options.keys,d,t,key=event.keyCode;d=!isNaN(k.alt)&&(event.altKey||event.originalEvent.altKey)?k.alt:!isNaN(k.ctrl)&&event.ctrlKey?k.ctrl:!isNaN(k.shift)&&event.shiftKey?k.shift:!isNaN(k.arrows)?k.arrows:10;if(k.arrows=='resize'||(k.shift=='resize'&&event.shiftKey)||(k.ctrl=='resize'&&event.ctrlKey)||(k.alt=='resize'&&(event.altKey||event.originalEvent.altKey))){switch(key){case 37:d=-d;case 39:t=max(x1,x2);x1=min(x1,x2);x2=max(t+d,x1);fixAspectRatio();break;case 38:d=-d;case 40:t=max(y1,y2);y1=min(y1,y2);y2=max(t+d,y1);fixAspectRatio(true);break;default:return}doResize()}else{x1=min(x1,x2);y1=min(y1,y2);switch(key){case 37:doMove(max(x1-d,left),y1);break;case 38:doMove(x1,max(y1-d,top));break;case 39:doMove(x1+min(d,imgWidth-selX(x2)),y1);break;case 40:doMove(x1,y1+min(d,imgHeight-selY(y2)));break;default:return}}return false};function styleOptions($elem,props){for(option in props)if(options[option]!==undefined)$elem.css(props[option],options[option])}function setOptions(newOptions){if(newOptions.parent)($parent=$(newOptions.parent)).append($box.add($outer));$.extend(options,newOptions);adjust();if(newOptions.handles!=null){$handles.remove();$handles=$([]);i=newOptions.handles?newOptions.handles=='corners'?4:8:0;while(i--)$handles=$handles.add(div());$handles.addClass(options.classPrefix+'-handle').css({position:'absolute',fontSize:0,zIndex:zIndex+1||1});if(!parseInt($handles.css('width'))>=0)$handles.width(5).height(5);if(o=options.borderWidth)$handles.css({borderWidth:o,borderStyle:'solid'});styleOptions($handles,{borderColor1:'border-color',borderColor2:'background-color',borderOpacity:'opacity'})}scaleX=options.imageWidth/imgWidth||1;scaleY=options.imageHeight/imgHeight||1;if(newOptions.x1!=null){setSelection(newOptions.x1,newOptions.y1,newOptions.x2,newOptions.y2);newOptions.show=!newOptions.hide}if(newOptions.keys)options.keys=$.extend({shift:1,ctrl:'resize'},newOptions.keys);$outer.addClass(options.classPrefix+'-outer');$area.addClass(options.classPrefix+'-selection');for(i=0;i++<4;)$($border[i-1]).addClass(options.classPrefix+'-border'+i);styleOptions($area,{selectionColor:'background-color',selectionOpacity:'opacity'});styleOptions($border,{borderOpacity:'opacity',borderWidth:'border-width'});styleOptions($outer,{outerColor:'background-color',outerOpacity:'opacity'});if(o=options.borderColor1)$($border[0]).css({borderStyle:'solid',borderColor:o});if(o=options.borderColor2)$($border[1]).css({borderStyle:'dashed',borderColor:o});$box.append($area.add($border).add($handles).add($areaOpera));if($.browser.msie){if(o=$outer.css('filter').match(/opacity=([0-9]+)/))$outer.css('opacity',o[1]/100);if(o=$border.css('filter').match(/opacity=([0-9]+)/))$border.css('opacity',o[1]/100)}if(newOptions.hide)hide($box.add($outer));else if(newOptions.show&&imgLoaded){shown=true;$box.add($outer).fadeIn(options.fadeSpeed||0);doUpdate()}aspectRatio=(d=(options.aspectRatio||'').split(/:/))[0]/d[1];$img.add($outer).unbind('mousedown',imgMouseDown);if(options.disable||options.enable===false){$box.unbind('mousemove',areaMouseMove).unbind('mousedown',areaMouseDown);$(window).unbind('resize',windowResize)}else{if(options.enable||options.disable===false){if(options.resizable||options.movable)$box.mousemove(areaMouseMove).mousedown(areaMouseDown);$(window).resize(windowResize)}if(!options.persistent)$img.add($outer).mousedown(imgMouseDown)}options.enable=options.disable=undefined}this.remove=function(){$img.unbind('mousedown',imgMouseDown);$box.add($outer).remove()};this.getOptions=function(){return options};this.setOptions=setOptions;this.getSelection=getSelection;this.setSelection=setSelection;this.update=doUpdate;$p=$img;while($p.length){zIndex=max(zIndex,!isNaN($p.css('z-index'))?$p.css('z-index'):zIndex);if($p.css('position')=='fixed')position='fixed';$p=$p.parent(':not(body)')}zIndex=options.zIndex||zIndex;if($.browser.msie)$img.attr('unselectable','on');$.imgAreaSelect.keyPress=$.browser.msie||$.browser.safari?'keydown':'keypress';if($.browser.opera)$areaOpera=div().css({width:'100%',height:'100%',position:'absolute',zIndex:zIndex+2||2});$box.add($outer).css({visibility:'hidden',position:position,overflow:'hidden',zIndex:zIndex||'0'});$box.css({zIndex:zIndex+2||2});$area.add($border).css({position:'absolute',fontSize:0});img.complete||img.readyState=='complete'||!$img.is('img')?imgLoad():$img.one('load',imgLoad)};$.fn.imgAreaSelect=function(options){options=options||{};this.each(function(){if($(this).data('imgAreaSelect')){if(options.remove){$(this).data('imgAreaSelect').remove();$(this).removeData('imgAreaSelect')}else $(this).data('imgAreaSelect').setOptions(options)}else if(!options.remove){if(options.enable===undefined&&options.disable===undefined)options.enable=true;$(this).data('imgAreaSelect',new $.imgAreaSelect(this,options))}});if(options.instance)return $(this).data('imgAreaSelect');return this}})(jQuery);(function(a){var b={timeoutHandler:null,baseUrl:null,listUrl:null,workItemUrl:null,closeUrl:null,updateUrl:null,onImageUrl:null,offImageUrl:null,statuses:["Proposed","Active","Closed"],types:["Feature","Issue","Task"],impacts:["Unassigned","Low","Medium","High"],releases:["Unassigned"],assignedTo:["Unassigned"],components:["Unassigned"],reasonsClosed:["Unassigned","Fixed"],sortField:null,sortDirection:null};a.fn.advancedList=function(c){c=a.extend({},b,c);return this.each(function(){new a.advancedList(this,c)})};a.advancedList=function(b,a){this.options=a;this.init()};a.advancedList.fn=a.advancedList.prototype={};a.advancedList.fn.extend=a.advancedList.extend=a.extend;a.advancedList.fn.extend({init:function(){a(document).bind("sort",this,function(c,b,a){c.data._sort(b,a)});a(".FilterItem").bind("focus",this,function(a){a.data.options.currentFocus=this});a("select.FilterItem").bind("change",this,function(a){a.data._changeFilter(false)}).bind("keypress",function(a){if($keyCode(a)===13)return false});a("#CreatedByMeCheckBox").bind("change",this,function(a){a.data._changeFilter(false)});a("#RefreshButton").bind("click",this,function(a){a.data._changeFilter(false);return false});a("#KeywordTextBox").bind("keypress",this,function(a){if($keyCode(a)===13){a.data._addKeyword();return false}});a("#KeywordSearchButton").bind("click",this,function(a){a.data._addKeyword()});a("#ResetButton").bind("click",this,function(a){a.data._resetFilter();return false});a("#GoButton").bind("mouseover",this,function(a){a.data._setGoImage(a.data.options.onImageUrl)}).bind("mouseout",this,function(a){a.data._setGoImage(a.data.options.offImageUrl)}).bind("click",this,function(a){a.data._gotoWorkItem();return false});a("#workItemId").bind("keypress",this,function(a){if($keyCode(a)===13){a.data._gotoWorkItem();return false}});a("#ChangeOk").bind("click",this,function(a){a.data._changeItems()});a("#ChangeCancel").bind("click",this,function(a){a.data._cancelChangeItems()});this._bindCheckboxes();this._bindStateObjects()},_sort:function(b,a){var c={page:0,sortField:b,sortDirection:a};this.options.sortField=b;this.options.sortDirection=a;this._postData(c)},_checkMultiFilters:function(){a("#KeywordListBox").val()===null&&a("#KeywordListBox").val("");a("#StatusListBox").val()===null&&a("#StatusListBox").val("Open (not closed)");a("#TypeListBox").val()===null&&a("#TypeListBox").val("All");a("#ImpactListBox").val()===null&&a("#ImpactListBox").val("All");a("#PlannedReleaseListBox").val()===null&&a("#PlannedReleaseListBox").val("All");a("#AssignedToListBox").val()===null&&a("#AssignedToListBox").val("All");a("#ComponentListBox").val()===null&&a("#ComponentListBox").val("All");a("#ReasonClosedListBox").val()===null&&a("#ReasonClosedListBox").val("All")},_changeFilter:function(c){this._checkMultiFilters();var b={page:0,keyword:this._convertArray(a("#KeywordListBox").val()),status:this._convertArray(a("#StatusListBox").val()),type:this._convertArray(a("#TypeListBox").val()),priority:this._convertArray(a("#ImpactListBox").val()),release:this._convertArray(a("#PlannedReleaseListBox").val()),assignedTo:this._convertArray(a("#AssignedToListBox").val()),component:this._convertArray(a("#ComponentListBox").val()),resetHistory:c,onlyMyItems:a("#CreatedByMeCheckBox").is(":checked")};if(a("#ReasonClosedListBox").length==1)b.reasonClosed=this._convertArray(a("#ReasonClosedListBox").val());this._postData(b)},_convertArray:function(c){for(var b=[],a=0;a<c.length;a++)b.push(encodeURIComponent(c[a]));return b.join("|")},_postData:function(d){var b=this,c;a(".FilterItem").attr("disabled","disabled");c=window.setTimeout(b._displayTimeout,2e3);a("#WorkItemsContainer").load(b.options.listUrl,d,function(){a(".FilterItem").removeAttr("disabled");if(c!=null){window.clearTimeout(c);c=null;CodePlex.UpdateProgress.hide();b._bindCheckboxes();b._bindStateObjects();b._updateDirectUrl();if(b.options.currentFocus!=null){a(b.options.currentFocus).focus();b.options.currentFocus=null}}})},_displayTimeout:function(){CodePlex.UpdateProgress.show()},_bindCheckboxes:function(){a("#masterCheckbox").change(function(c){var b=a(this).is(":checked");a(".CheckboxCell:enabled").attr("checked",b).trigger("change")});a(".CheckboxCell").change(function(){var b=a(this),c=b.parent().parent();if(b.is(":checked")){c.addClass("selected_row");b.check();a(".CheckboxCell:enabled").length===a(".CheckboxCell:checked").length&&a("#masterCheckbox").check()}else{b.uncheck();c.removeClass("selected_row");a("#masterCheckbox").uncheck()}if(a(".CheckboxCell:checked").length>0)a(".StateControl").removeAttr("disabled");else a(".StateControl").attr("disabled","disabled")})},_bindStateObjects:function(){a(".StateList").change(function(){a(".StateList").val(a(this).val())});a(".ChangeButton").bind("click",this,function(a){a.data._displayChangeItems()})},_addKeyword:function(){var c=a("#KeywordTextBox").val(),f=a("#KeywordListBox");if(c.length>0){var e=a("#KeywordListBox option"),d=[];d.push(e[0]);d.push(a("<option />").attr("value",c).text(c));for(var b=1;b<5;b++)a(e[b]).val()!==c&&d.push(e[b]);f.empty();for(var b=0;b<d.length;b++)f.append(d[b]);f.val(c);var g={page:0,keyword:c};this._postData(g)}},_resetFilter:function(){a("#KeywordListBox").empty().append(a('<option value="">-- None --</option>')).val("");a("#KeywordTextBox").val("");a("#StatusListBox").val("Open (not closed)");a("#TypeListBox").val("All");a("#ImpactListBox").val("All");a("#PlannedReleaseListBox").val("All");a("#AssignedToListBox").val("All");a("#ComponentListBox").val("All");a("#ReasonClosedListBox").val("All");a("#CreatedByMeCheckBox").attr("checked",false);this._changeFilter(true)},_setGoImage:function(b){a("#GoButton").attr("src",b)},_gotoWorkItem:function(){var b=a("#workItemId").val(),c=a("#goToError").hide();if(b.length===0){c.html("Value required").show();return false}if(!b.match(/\s*[1-9][0-9]*\s*/)){c.html("Please enter a valid work item ID").show();return false}a.get(this.options.workItemUrl.replace(/-1/,a.trim(b)),function(a){if(!a.IsError)return window.location=a.RedirectUrl;else c.html("<br />"+a.Message).show()})},_getCheckedIds:function(){for(var c=a(".CheckboxCell:checked"),d=[],b=0;b<c.length;b++)d.push(a(c[b]).val());return d.join(",")},_displayChangeItems:function(){var e=a(a(".StateList option:selected")[0]).text();a("#ChangeHeaderLabel").text("Change "+e+" to:");a("#ChangeError").hide();var c=a(".StateList").val(),b=[];if(c==="status")b=this.options.statuses;else if(c==="type")b=this.options.types;else if(c==="priority")b=this.options.impacts;else if(c==="release")b=this.options.releases;else if(c==="assignedto")b=this.options.assignedTo;else if(c==="component")b=this.options.components;else if(c==="reasonClosed")b=this.options.reasonsClosed;a("#ClosedCommentArea").remove().appendTo(a("#ClosedCommentAreaContainer"));a("#ChangeContent").empty();for(var f=a("<ul />").addClass("button_wrap modal_content").appendTo(a("#ChangeContent")),d=0;d<b.length;d++)a("<li />").append(a('<input type="radio" name="valueOption" />').attr("id","value_"+d).attr("value",b[d])).append(a("<label />").attr("for","value_"+d).text(b[d])).appendTo(f);a("#ChangeContent input").change(function(){if(a(this).val()=="Closed"&&a(this).is(":checked")){a("#ClosedCommentArea").remove().appendTo(a(this).parent());a("#ChangeValuePanel .modal_content").height("auto");a("#ClosedCommentArea textarea").val("")}else{a("#ClosedCommentArea").remove().appendTo(a("#ClosedCommentAreaContainer"));a("#ChangeValuePanel .modal_content").height("10em")}}).trigger("change");a(document).checkContent();OpenDialog("#ChangeValuePanel",true,"30em");a("#ChangeValuePanel h2 span").text("Change "+e);a("div.ui-dialog").css("overflow","visible");a("body").css("overflow","hidden")},_changeItems:function(){a("#ChangeError").hide();var d=a(".StateList").val(),f=this._getCheckedIds(),e=this,b=a("#ChangeContent input:checked").val();if(b===undefined||b.length===0){a("#ChangeError").show();return}this._cancelChangeItems();CodePlex.UpdateProgress.show();if(d=="status"&&b=="Closed"){var c="";if(a("#workItemReasonClosedDropDown").length>0)c=a("#workItemReasonClosedDropDown").val();a.post(this.options.closeUrl,{workItemId:f,comment:a("#ClosedCommentArea textarea").val(),reasonClosed:c},function(a){e._changeFilter()})}else a.post(this.options.updateUrl.replace(/-1/,d),{workItemIds:f,value:b},function(a){e._changeFilter()})},_cancelChangeItems:function(){OpenDialog("#ChangeValuePanel",false);a("body").css("overflow","visible")},_updateDirectUrl:function(){var b=this.options.baseUrl;b+="?keyword="+this._convertArray(a("#KeywordListBox").val());b+="&status="+this._convertArray(a("#StatusListBox").val());b+="&type="+this._convertArray(a("#TypeListBox").val());b+="&priority="+this._convertArray(a("#ImpactListBox").val());b+="&release="+this._convertArray(a("#PlannedReleaseListBox").val());b+="&assignedTo="+this._convertArray(a("#AssignedToListBox").val());b+="&component="+this._convertArray(a("#ComponentListBox").val());b+="&sortField="+encodeURIComponent(this.options.sortField);b+="&sortDirection="+encodeURIComponent(this.options.sortDirection);b+="&page=0";if(a("#ReasonClosedListBox").length==1)b+="&reasonClosed="+this._convertArray(a("#ReasonClosedListBox").val());a("#DirectSearch").attr("href",b)}})})(jQuery);var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this.options={}}a.prototype._create=function(){this.queryUIElements();this._queryDiffUIElements();this.theSelectorForHeaderOffset=".page_title";this.extraLeftOffsetForScrollbar=0;this.extraBottomOffsetForScrollbar=0;this._populateDirectoryView()};a.prototype._queryDiffUIElements=function(){this.collapseElements=$(".CollapseHorizontal, .CollapseVertical",this.element);this.diffActions=$("#DiffActions",this.element)};a.prototype.setupAndAttachFloatingScrollbar=function(){this.attachedScrollSelector=".FileView .diffPane";this.attachedContentSelector="table.diffTable";this.attachedHeightSelector="#FileContentView";this._attachFloatingScrollbar()};a.prototype._init=function(){this._enableTheSplitter();this._bindEvents();this._syncView();$(this.splitView).css("position","");$(this.fileList).css("position","")};a.prototype._bindEvents=function(){var a=this;this.element.delegate("a.DiffLink","click",this,function(a){a.data._showDiff($(this),true);return false});this.element.delegate("a.SegmentDiffLink","click",this,function(c){var b=a._getFileLink($(this).data("fileId"));c.data._showDiff(b,true);return false});this.element.delegate("#CloseDiff","click",this,function(b){var a=$(".show_hide_full_diff_comments .CommentVerb");a&&a.length>0&&a.text("Hide");b.data.close();return false});this.element.delegate("#nextDiffImage","click",this,function(a){a.data._goToNextDiff()});this.element.bind("next-diff",this,function(a){a.data._goToNextDiff()});this.element.delegate("#previousDiffImage","click",this,function(a){a.data._goToPreviousDiff()});this.element.bind("previous-diff",this,function(a){a.data._goToPreviousDiff()});this.element.bind("next-file",this,function(a){a.data._goToNextFile()});this.element.bind("previous-file",this,function(a){a.data._goToPreviousFile()});$(window).bind("resize.diff",this,function(a){a.data._syncView()});$(window).bind("hashchanged",this,function(b,a){b.data._handleHashChanged(a)});$(window).bind("scroll.diff",this,function(a){a.data._syncView()});this.element.delegate(".vsplitbar","mousedown.diff",this,function(a){a.data._handleSplitterMove(true)});this.element.delegate(".vsplitbar","mouseup.diff",this,function(a){a.data._handleSplitterMove(false)})};a.prototype._showDiff=function(a,b){this._setupShortcuts();b&&this._addViewToHistory(a);this._makeDiffRequest(a,a.data("fileId"),a.data("branch"),a.data("lineIndex"))};a.prototype.close=function(){this._changeLayout(false);$(document).keyboardShortcuts("destroy");$(document).floatingViewport("destroy");this.options.closed&&this.options.closed()};a.prototype._setupShortcuts=function(){var a=this;$(document).keyboardShortcuts({previousNextItemSuffix:" file",previousItem:function(){a._goToPreviousFile()},nextItem:function(){a._goToNextFile()},previousBlock:function(){a._goToPreviousDiff()},nextBlock:function(){a._goToNextDiff()}})};a.prototype._makeDiffRequest=function(e,c,d,b){var a=this;this._showLoading();$.ajax({url:a.options.diffUrl,type:"POST",data:{fileId:c,branch:d},success:function(f){var d=$(".show_hide_full_diff_comments .CommentVerb");a._hideLoading();a.options.currentDiffIndex=-1;a.fileContentView.html(f.IsError?'<div id="inlineDiff"><div id="FileView" class="FileView">'+$createFileLoadError(c,a.options.contactUsUrl)+"</div></div>":f.Html);a.splitView.show();a._toggleNextDiffLink();a._togglePreviousDiffLink();a._changeLayout(true);a._selectFile(e);a._enableTheSplitter();a._enableTheFloatingViewport();a.setupAndAttachFloatingScrollbar();d&&d.length>0&&d.text("Hide");if($.browser.msie)setTimeout(function(){a._syncView()},500);else a._syncView();if(b)a._scrollToLine(b);else a._goToNextDiff();$("#fileControlsDiv").css("float","none");setTimeout(function(){$("#fileControlsDiv").css("float","right")},0)}})};a.prototype._selectFile=function(a){$(".sbsf",this.element).removeClass("sbsf");this._getFileLink(a.data("fileId")).parent().addClass("sbsf")};a.prototype._scrollToLine=function(a){if(!a){$(window).scrollTop(0);return}var b=$('tr[data-lineIndex="'+a+'"]',this.fileContentView),c=$("div.FileView",this.element);if(b.length==0||c.length==0)return;$(document).floatingViewport("syncView",b.offset().top)};a.prototype._goToNextDiff=function(){var a=$(".changeStartBlock",this.fileContentView);if(this.options.currentDiffIndex==undefined)this.options.currentDiffIndex=-1;if(this.options.currentDiffIndex+1>a.length-1)return;this.options.currentDiffIndex++;this._updateDiffMarker()};a.prototype._goToPreviousDiff=function(){if(this.options.currentDiffIndex==undefined)this.options.currentDiffIndex=-1;if(this.options.currentDiffIndex-1<0)return;this.options.currentDiffIndex--;this._updateDiffMarker()};a.prototype._updateDiffMarker=function(){var g=$(".changeStartBlock",this.fileContentView),a=g.eq(this.options.currentDiffIndex).parent(),f=$(document);$(".line",this.fileContentView).removeClass("insertedSelected deletedSelected");$(".lineNumber",this.fileContentView).removeClass("insertedLineNumberSelected deletedLineNumberSelected");while(true){var e=$(".lineNumber",a),b=$(".line",a),c=b.hasClass("InsertedLine");e.addClass(c?"insertedLineNumberSelected":"deletedLineNumberSelected");b.addClass(c?"insertedSelected":"deletedSelected");if(b.hasClass("changeEndBlock"))break;a=a.next()}var d=$(".insertedLineNumberSelected, .deletedLineNumberSelected",this.fileContentView);d.length>=1&&f.floatingViewport("syncView",$(d[0]).offset().top);this._toggleNextDiffLink();this._togglePreviousDiffLink();$(document).floatingScrollbar("resetPosition")};a.prototype._toggleNextDiffLink=function(){var b=$(".changeStartBlock",this.fileContentView),a=$("#nextDiffImage",this.element);a.length>0&&this._toggleDiffLink(a,this.options.currentDiffIndex<b.length-1)};a.prototype._togglePreviousDiffLink=function(){var a=$("#previousDiffImage",this.element);a.length>0&&this._toggleDiffLink(a,this.options.currentDiffIndex>0)};a.prototype._toggleDiffLink=function(a,b){a.attr("src",b?a.attr("d:enabledImage"):a.attr("d:disabledImage")).css("cursor",b?"pointer":"default")};a.prototype._goToNextFile=function(){this._goToFile(1)};a.prototype._goToPreviousFile=function(){this._goToFile(-1)};a.prototype._goToFile=function(d){var c=$(".sbsf a.DiffLink",this.fileListView),b=c.data("fileindex"),a=$('a.DiffLink[data-fileindex="'+(b+d)+'"]',this.fileListView);if(a.length==0)return;a.click()};a.prototype._addViewToHistory=function(a){var c=a.attr("href"),b=a.data("lineIndex");if(b!==undefined)c+="+"+b;$(window).browsingHistory("add",{title:document.title,fileId:a.data("fileId")},null,c)};a.prototype._handleHashChanged=function(a){if(!a)return;if(a.fileId){var b=this._getFileLink(a.fileId);this._showDiff(b,false)}};a.prototype._changeLayout=function(a){if(a&&this.options.syncEnabled)return;if(a){this.options.syncEnabled=true;this.collapseElements.hide();this.splitView.show();this.diffActions.show();this.fileList.addClass("leftPane").attr("id","leftPane");this.fileListView.attr("id","DirectoryView").addClass("DirectoryView");this.splitView.parent().attr("id","sourceBrowserContainer");this.splitView.css("position","relative");this.queryUIElements();this._queryDiffUIElements();this._syncView()}else{this.options.syncEnabled=false;this.collapseElements.show();this.splitView.hide();this.diffActions.hide();if($.browser.msie&&parseFloat($.browser.version)<9)this.fileList.removeClass("leftPane").attr("id","").css("position","static").css("width","").css("z-index","");else this.fileList.removeClass("leftPane").attr("id","").removeAttr("style");this.fileListView.attr("id","").removeClass("DirectoryView").removeAttr("style");this.splitView.parent().attr("id","").removeAttr("style");$(".vsplitbar",this.element).remove();$(".sbsf",this.element).removeClass("sbsf");this.element.floatingScrollbar("hide")}};a.prototype._populateDirectoryView=function(){var a=this.directoryView;$(".DiffLink").each(function(){var b=$(this).clone();b.html(b.data("name"));a.append($("<div>").append(b));return b})};a.prototype._getFileLink=function(a){return $("a.DiffLink",this.directoryView).filter(function(){return $(this).data("fileId")===a})};return a}(a.CodeBrowser);a.InlineDiff=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.inlineDiff",new codeplex.ui.InlineDiff);/*
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(a){var r=a.fn.domManip,d="_tmplitem",q=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},f={},e,p={key:0,data:{}},i=0,c=0,l=[];function g(g,d,h,e){var c={data:e||(e===0||e===false)?e:d?d.data:{},_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:u,nest:w,wrap:x,html:v,update:t};g&&a.extend(c,g,{nodes:[],parent:d});if(h){c.tmpl=h;c._ctnt=c._ctnt||c.tmpl(a,c);c.key=++i;(l.length?f:b)[i]=c}return c}a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,d){a.fn[f]=function(n){var g=[],i=a(n),k,h,m,l,j=this.length===1&&this[0].parentNode;e=b||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&i.length===1){i[d](this[0]);g=this}else{for(h=0,m=i.length;h<m;h++){c=h;k=(h>0?this.clone(true):this).get();a(i[h])[d](k);g=g.concat(k)}c=0;g=this.pushStack(g,f,i.selector)}l=e;e=null;a.tmpl.complete(l);return g}});a.fn.extend({tmpl:function(d,c,b){return a.tmpl(this[0],d,c,b)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(d,m,k){if(d[0]&&a.isArray(d[0])){var g=a.makeArray(arguments),h=d[0],j=h.length,i=0,f;while(i<j&&!(f=a.data(h[i++],"tmplItem")));if(f&&c)g[2]=function(b){a.tmpl.afterManip(this,b,k)};r.apply(this,g)}else r.apply(this,arguments);c=0;!e&&a.tmpl.complete(b);return this}});a.extend({tmpl:function(d,h,e,c){var i,k=!c;if(k){c=p;d=a.template[d]||a.template(null,d);f={}}else if(!d){d=c.tmpl;b[c.key]=c;c.nodes=[];c.wrapped&&n(c,c.wrapped);return a(j(c,null,c.tmpl(a,c)))}if(!d)return[];if(typeof h==="function")h=h.call(c||{});e&&e.wrapped&&n(e,e.wrapped);i=a.isArray(h)?a.map(h,function(a){return a?g(e,c,d,a):null}):[g(e,c,d,h)];return k?a(j(c,null,i)):i},tmplItem:function(b){var c;if(b instanceof a)b=b[0];while(b&&b.nodeType===1&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode));return c||p},template:function(c,b){if(b){if(typeof b==="string")b=o(b);else if(b instanceof a)b=b[0]||{};if(b.nodeType)b=a.data(b,"tmpl")||a.data(b,"tmpl",o(b.innerHTML));return typeof c==="string"?(a.template[c]=b):b}return c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,q.test(c)?c:a(c)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(f,b,d){var e=b.nodeType===11?a.makeArray(b.childNodes):b.nodeType===1?[b]:[];d.call(f,b);m(e);c++}});function j(e,g,f){var b,c=f?a.map(f,function(a){return typeof a==="string"?e.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+e.key+'" $2'):a:j(a,e,a._ctnt)}):e;if(g)return c;c=c.join("");c.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(f,c,e,d){b=a(e).get();m(b);if(c)b=k(c).concat(b);if(d)b=b.concat(k(d))});return b?b:k(c)}function k(c){var b=document.createElement("div");b.innerHTML=c;return a.makeArray(b.childNodes)}function o(b){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(m,l,k,g,b,c,d){var j=a.tmpl.tag[k],i,e,f;if(!j)throw"Unknown template tag: "+k;i=j._default||[];if(c&&!/\w$/.test(b)){b+=c;c=""}if(b){b=h(b);d=d?","+h(d)+")":c?")":"";e=c?b.indexOf(".")>-1?b+h(c):"("+b+").call($item"+d:b;f=c?e:"(typeof("+b+")==='function'?("+b+").call($item):("+b+"))"}else f=e=i.$1||"null";g=h(g);return"');"+j[l?"close":"open"].split("$notnull_1").join(b?"typeof("+b+")!=='undefined' && ("+b+")!=null":"true").split("$1a").join(f).split("$1").join(e).split("$2").join(g||i.$2||"")+"__.push('"})+"');}return __;")}function n(c,b){c._wrap=j(c,true,a.isArray(b)?b:[q.test(b)?b:a(b).html()]).join("")}function h(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML}function m(o){var n="_"+c,k,j,l={},e,p,h;for(e=0,p=o.length;e<p;e++){if((k=o[e]).nodeType!==1)continue;j=k.getElementsByTagName("*");for(h=j.length-1;h>=0;h--)m(j[h]);m(k)}function m(j){var p,h=j,k,e,m;if(m=j.getAttribute(d)){while(h.parentNode&&(h=h.parentNode).nodeType===1&&!(p=h.getAttribute(d)));if(p!==m){h=h.parentNode?h.nodeType===11?0:h.getAttribute(d)||0:0;if(!(e=b[m])){e=f[m];e=g(e,b[h]||f[h]);e.key=++i;b[i]=e}c&&o(m)}j.removeAttribute(d)}else if(c&&(e=a.data(j,"tmplItem"))){o(e.key);b[e.key]=e;h=a.data(j.parentNode,"tmplItem");h=h?h.key:0}if(e){k=e;while(k&&k.key!=h){k.nodes.push(j);k=k.parent}delete e._ctnt;delete e._wrap;a.data(j,"tmplItem",e)}function o(a){a=a+n;e=l[a]=l[a]||g(e,b[e.parent.key+n]||e.parent)}}}function u(a,d,c,b){if(!a)return l.pop();l.push({_:a,tmpl:d,item:this,data:c,options:b})}function w(d,c,b){return a.tmpl(a.template(d),c,b,this)}function x(b,d){var c=b.options||{};c.wrapped=d;return a.tmpl(a.template(b.tmpl),b.data,c,b.item)}function v(d,c){var b=this._wrap;return a.map(a(a.isArray(b)?b.join(""):b).filter(d||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||s(a)})}function t(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]);a(b).remove()}})(jQuery);var loadingActivityStream=false;CodePlex.ActivityStream=function(){};CodePlex.ActivityStream.init=function(a){this._options=a;$("#loadMore").click(function(){CodePlex.ActivityStream.nextPage();return false});$("#initialloader").hide();$("#loaderMoreActivities").hide()};CodePlex.ActivityStream.showFullComment=function(b){var c=$(b).attr("data-activityId"),a=$("#activity"+c);$(b).hide();$(a).find(".activityShortComment").hide();$(a).find(".activityFullComment").show()};CodePlex.ActivityStream.getActivities=function(a){!loadingActivityStream&&$.ajax({type:"GET",cache:false,url:this._options.activityUrl,data:{page:a,maxActivityId:$("#maxActivityId").val()},beforeSend:function(){loadingActivityStream=true;if(a===1)$("#initialloader").show();else $("#loaderMoreActivities").show()},complete:function(){$("#initialloader").hide();$("#loaderMoreActivities").hide()},success:function(b){$.each(b.UserActivities,function(b,a){a.Comment=a.Comment||"";a.ShortComment=a.ShortComment||""});CodePlex.ActivityStream.loadActivities(b,a);loadingActivityStream=false}})};CodePlex.ActivityStream.loadActivities=function(c,b){var a=parseInt(c.TotalItemCount,10);if(a===0)$("#activityStreamEmptyText").show();else{$("#activityStreamEmptyText").hide();$("#activityTemplate").tmpl(c).appendTo("#activityStreamList");$("#activityStreamList li:first-child").addClass("firstActivity");CodePlex.ActivityStream.incrementPageNum(b)}if(b*this._options.pageSize>=a)$("#loadMore").hide();else $("#loadMore").show().css("display","block");$(".moreCommentLink").click(function(){CodePlex.ActivityStream.showFullComment($(this))})};CodePlex.ActivityStream.nextPage=function(){var a=CodePlex.ActivityStream.getPageNum();CodePlex.ActivityStream.getActivities(a)};CodePlex.ActivityStream.getPageNum=function(){return parseInt($("#loadMore").attr("data-nextPage"),10)};CodePlex.ActivityStream.incrementPageNum=function(a){$("#loadMore").attr("data-nextPage",a+1)};var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.apply(this,arguments);this._$inputControl=null;this._baseClassName=null;this._currentLabelClass=null}a.prototype._init=function(b,c){this._$inputControl=b;this._baseClassName=c;this.element.data(a._INSTANCE_DATA_NAME,this);b.data(a._INSTANCE_DATA_NAME,this);this._$inputControl.focusin($.proxy(this._updateImage,this)).focusout($.proxy(this._updateImage,this));this._updateImage()};a.prototype._updateImage=function(){var a=this._baseClassName;if(this._$inputControl.is(":checked"))a+="_checked";else a+="_unchecked";if(document.activeElement===this._$inputControl[0])a+="_focused";this._currentLabelClass&&this.element.removeClass(this._currentLabelClass);this._currentLabelClass=a;this.element.addClass(a);if(this._$inputControl.is(":disabled"))this.element.addClass(this._baseClassName+"_disabled");else this.element.removeClass(this._baseClassName+"_disabled");return this};a.prototype._updateDependentImages=function(){return this};a.tryGetInstance=function(b){return b.data(a._INSTANCE_DATA_NAME)};a._INSTANCE_DATA_NAME="enhanced-input-instance";return a}(a.BaseEnhancement);a.EnhancedInputBase=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){$.fn.check=function(){return this.each(function(){var a=$(this),b=codeplex.ui.EnhancedInputBase.tryGetInstance(a);a.attr("checked","checked");b._updateImage()._updateDependentImages()})};$.fn.uncheck=function(){return this.each(function(){var a=$(this),b=codeplex.ui.EnhancedInputBase.tryGetInstance(a);a.removeAttr("checked");b._updateImage()._updateDependentImages()})};$.fn.disable=function(){return this.each(function(){var a=$(this),b=codeplex.ui.EnhancedInputBase.tryGetInstance(a);a.attr("disabled","disabled");b._updateImage()._updateDependentImages()})};$.fn.enable=function(){return this.each(function(){var a=$(this),b=codeplex.ui.EnhancedInputBase.tryGetInstance(a);a.removeAttr("disabled");b._updateImage()._updateDependentImages()})}});var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.call(this);a.BaseEnhancement.registerContentChange(b.enhance)}b.prototype._init=function(){if(a.EnhancedInputBase.tryGetInstance(this.element))return;this._$radioButton=this.element.prev("input[type=radio]");if(this._$radioButton.length===0)return;this._groupName=this._$radioButton.attr("name");this._$radioButton.bind(b.CHANGED_EVENT_NAME,$.proxy(this._updateImage,this));this._$radioButton.click($.proxy(this._updateDependentImages,this));c.prototype._init.call(this,this._$radioButton,"radio")};b.prototype._updateDependentImages=function(){$("input[name="+this._groupName+"][type=radio]").trigger(b.CHANGED_EVENT_NAME);return this};b.enhance=function(){$("input[type=radio] + label").enhancedRadioButton()};b.CHANGED_EVENT_NAME="enhancedRadioButtonChanged";return b}(a.EnhancedInputBase);a.EnhancedRadioButton=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.enhancedRadioButton",new codeplex.ui.EnhancedRadioButton);var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(b){var c=function(d){__extends(c,d);function c(){d.call(this);b.BaseEnhancement.registerContentChange(c.enhance)}c.prototype._init=function(){if(a.ui.EnhancedInputBase.tryGetInstance(this.element))return;this._$checkbox=this.element.prev("input[type=checkbox]");if(this._$checkbox.length===0)return;this._$checkbox.click($.proxy(this._updateImage,this));d.prototype._init.call(this,this._$checkbox,"checkbox")};c.enhance=function(){$("input[type=checkbox] + label").enhancedCheckbox()};return c}(b.EnhancedInputBase);b.EnhancedCheckbox=c})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.enhancedCheckbox",new codeplex.ui.EnhancedCheckbox);(function(a){function b(a){this._$tabControl=a;this._initialize()}a.TabControl=b;b.fn=b.prototype={};b.fn.extend=b.extend=a.extend;b.extend({SELECTED_CLASS_NAME:"selected",CUSTOM_HEADER_ID_DATA_NAME:"custom-header-id",TAB_CONTENTS_ID_DATA_NAME:"tab-contents-id",TAB_CONTENT_ELEMENT_DATA_NAME:"tab-content-element",TAB_SELECTION_CHANGED_EVENT:"tab-selection-changed"});b.fn.extend({_$tabControl:null,_$tabs:null,_initialize:function(){var b=this;this._$tabs=this._$tabControl.find(".tab");this._displayCustomHeaders();this._initializeSelectedTab();this._$tabs.bind("click",function(){b._selectTab(a(this))})},_displayCustomHeaders:function(){this._$tabs.each(function(){var e=a(this),d=e.data(b.CUSTOM_HEADER_ID_DATA_NAME),c;if(d){c=a("#"+d);e.empty().append(c);c.css("display","inline-block")}})},_initializeSelectedTab:function(){var a=this._$tabs.filter(".selected:first");if(a.length===0&&this._$tabs.length!=0)a=this._$tabs.eq(0);this._selectTab(a,true)},_selectTab:function(c,d){if(!c.hasClass(b.SELECTED_CLASS_NAME)){this._$tabs.removeClass(b.SELECTED_CLASS_NAME);var e=a(this._$tabs).css("background-color");a("div.custom_tab_header",this._$tabs).css("background-color",e);c.addClass(b.SELECTED_CLASS_NAME);var f=a(c).css("background-color");a("div.custom_tab_header",c).css("background-color",f);this._displayContentFor(c);this._$tabControl.trigger(b.TAB_SELECTION_CHANGED_EVENT,{selectedTab:c});a(document).checkContent()}else d&&this._displayContentFor(c)},_displayContentFor:function(c){var d=this,b=this._getContentForTab(c);this._$tabs.each(function(){var b=a(this);d._getContentForTab(b).hide()});b.show()},_getContentForTab:function(d){var e,c;c=d.data(b.TAB_CONTENT_ELEMENT_DATA_NAME);if(!c){e=d.data(b.TAB_CONTENTS_ID_DATA_NAME),c=a("#"+e);d.data(b.TAB_CONTENT_ELEMENT_DATA_NAME,c)}return c}});a.fn.enhanceTabs=function(){return this.each(function(){new b(a(this))})};a.fn.bindTabSelectionChanged=function(d){var c=a(this);c.bind(b.TAB_SELECTION_CHANGED_EVENT,d);return this};a(function(){a(".tab_control").enhanceTabs()})})(jQuery);var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.call(this);this._loadingContent=false;a.BaseEnhancement.registerContentChange(b.enhance)}b.prototype._init=function(){if(!this._options){this._options=a.BaseEnhancement.getOptions(this.element)||{serviceUrl:""};this._batchSize=this._options.batchSize!=undefined?this._options.batchSize:b._DEFAULT_BATCH_SIZE,this._bufferSize=this._options.bufferSize!=undefined?this._options.bufferSize:b._DEFAULT_BUFFER_SIZE,this._tolerence=this._options.tolerence!=undefined?this._options.tolerence:b._DEFAULT_TOLERENCE,$(window).bind("scrollstop",$.proxy(this.loadLazyContent,this));this.element.parents().bind("scrollstop",$.proxy(this.loadLazyContent,this))}this.loadLazyContent()};b.prototype.loadLazyContent=function(){var a=this,c=$.extend({},this._options.options);if(this._loadingContent)return;var b=function(){var d=a._getOnScreenSectionOptions();if(d.length!=0){a._loadingContent=true;c.sectionData=d.splice(0,a._batchSize);$.ajax({type:"POST",url:a._options.serviceUrl,data:JSON.stringify(c),contentType:"application/json",success:function(c){if(c.IsError)alert(c.Message);else a._beginDisplaySectionContent(c.Content,function(){b()})}})}else a._loadingContent=false};setTimeout(function(){b()},1)};b.prototype._getOnScreenSectionOptions=function(){var b=[],c=this._getOnScreenSections();$.each(c,function(e,d){var c;c=a.BaseEnhancement.getOptions(d);c&&b.push(c)});return b};b.prototype._getOnScreenSections=function(){var e,d=[],k=this._batchSize,j=this._bufferSize,g=[],c=$("."+b.LAZY_LOAD_CONTENT_CLASS_NAME,this.element),f=this._getOnScreenIndexes(c);if(f.first!==undefined){for(var a=f.first,i=f.last;a<=i&&d.length!=k;a++){e=c.eq(a);!this._isContentLoaded(e)&&this._addOnScreenResultItem(d,e)}for(var h=0,i=c.length;h<j&&a<i;a++,h++)g.push(c.eq(a))}this._addBufferedItems(d,g);return d};b.prototype._getOnScreenIndexes=function(d){for(var j,a,f,h=-1,g=0,c,e=0,i=d.length;e<i;e++){var c=d.eq(e);if((c.hasClass(b._FIRST_ON_SCREEN_CLASS_NAME)||c.hasClass(b._LAST_ON_SCREEN_CLASS_NAME))&&c.isOnScreen(this._tolerence)){a=e;f=e;h=e;g=e+1;break}}d.removeClass(b._FIRST_ON_SCREEN_CLASS_NAME+" "+b._LAST_ON_SCREEN_CLASS_NAME);for(;h>-1;h--){c=d.eq(h);if(c.isOnScreen(this._tolerence))a=h;else if(a!==undefined)break}for(;g<i;g++){c=d.eq(g);if(c.isOnScreen(this._tolerence)){f=g;if(a===undefined)a=f}else if(f!==undefined)break}if(a){d.eq(a).addClass(b._FIRST_ON_SCREEN_CLASS_NAME);d.eq(f).addClass(b._LAST_ON_SCREEN_CLASS_NAME)}return{first:a,last:f}};b.prototype._addOnScreenResultItem=function(c,a){c.push(a);a.removeClass(b._BUFFER_LOAD_CLASS_NAME)};b.prototype._isContentLoaded=function(a){return a.hasClass(b._CONTENT_LOADED_CLASS_NAME)};b.prototype._addBufferedItems=function(a,f){for(var d=this._batchSize,j=a.length,e=0,i=f.length;e<i;e++){var c=f[e];if(!this._isContentLoaded(c))if(a.length!=d)this._addOnScreenResultItem(a,c);else c.addClass(b._BUFFER_LOAD_CLASS_NAME)}if(a.length<d){var h=this,g=$("."+b._BUFFER_LOAD_CLASS_NAME,this.element);$.each(g,function(){var b=$(this);h._addOnScreenResultItem(a,b);return a.length!==d})}};b.prototype._beginDisplaySectionContent=function(f,d){var g=this,c=0,h=f.length,a,e=function(){if(c<h)window.setTimeout(function(){a=f[c];var d=$("#"+a.ContentId).empty().addClass(b._CONTENT_LOADED_CLASS_NAME);d.html(a.ResultHtml);d.trigger(b.LAZY_CONTENT_LOADED,d);g.triggerContentChange();c+=1;e()},100);else d&&d()};e()};b.enhance=function(){jQuery("."+b.LAZY_LOAD_CLASS_NAME).loadLazyContent()};b.LAZY_LOAD_CLASS_NAME="lazy_load";b.LAZY_LOAD_CONTENT_CLASS_NAME="lazy_load_content";b.LAZY_CONTENT_LOADED="lazy_content_loaded";b._DEFAULT_BATCH_SIZE=10;b._DEFAULT_BUFFER_SIZE=2;b._DEFAULT_TOLERENCE=0;b._CONTENT_LOADED_CLASS_NAME="lazy_load_content_loaded";b._BUFFER_LOAD_CLASS_NAME="lazy_load_buffered";b._FIRST_ON_SCREEN_CLASS_NAME="first_on_screen_lazy_item";b._LAST_ON_SCREEN_CLASS_NAME="last_on_screen_lazy_item";return b}(a.BaseEnhancement);a.LazyContentLoaderWidget=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));jQuery.widget("CodePlex.loadLazyContent",new codeplex.ui.LazyContentLoaderWidget);(function(a){var b={useDownloadPage:false,_fileUrl:null,_fileId:null,_postUrl:null,_link:null,_redirectToAds:true,_clickOncePath:null};a.fn.release=function(c){c=a.extend({},b,c);return this.each(function(){new a.release(this,c)})};a.release=function(b,a){this.options=a;this.init()};a.release.fn=a.release.prototype={};a.release.fn.extend=a.release.extend=a.extend;a.release.fn.extend({init:function(){},downloadFile:function(b){var a=this;a._link=b;a._parseDownloadData();return a._performDownloadCall()},_parseDownloadData:function(){var b=this,c;if(!b._link)throw"Error: Function must be provided a link object.";b._fileId=a(b._link).attr("d:fileId");b._clickOncePath=a(b._link).attr("d:clickOncePath");b._postUrl=a(b._link).attr("d:postUrl");c=a(b._link).attr("d:redirectToAds");if(!c||c=="true")b._redirectToAds=true;else if(c=="false")b._redirectToAds=false;else throw"Invalid value for ad redirect";if(!b._fileId||!b._postUrl)throw"Error: Download link must be encoded with download attributes.";},_performDownloadCall:function(){var a=this;if(a.UseDownloadPage){window.location=a._fileUrl.replace("downloads/get/0","downloads/get/"+a.fileId);return false}else return a._postDownload()},_postDownload:function(){var b=this,c=false;a.ajax({type:"POST",url:b._postUrl,data:{fileId:b._fileId,clickOncePath:b._clickOncePath,allowRedirectToAds:b._redirectToAds},success:function(d){if(d.IsClickOnce){a(b._link).attr("href",d.RedirectUrl.replace(/'/g,""));c=true}else window.location=d.RedirectUrl},async:false});return c}})})(jQuery);$(function(){function b(c){var a=$(c).parents(".diffPane:first"),b;if(a.length!==0)b=codeplex.ui.BaseEnhancement.getOptions(a);return b}function a(c){var a=$(c).parents(".codeComment:first"),b;if(a.length!==0)b=codeplex.ui.BaseEnhancement.getOptions(a);return b}$.widget("codeplex.pullRequestComments",{options:{watermark:"Add a comment...",canAnnotate:false,repaint:null},_init:function(){this.comments=$("#Comments",this.element);this.commentCount=$(".CommentCount",this.element);this.commentBox=$("#comment_body",this.element);this.commentError=$("#CommentError",this.element);this.isProcessingComment=false;this.deleteVictim=null;$("#AddComment",this.element).bind("click",this,function(a){a.data._addComment();return false});this.commentBox.bind("focus",this,function(a){a.data._commentBoxFocus()}).bind("blur",this,function(a){a.data._commentBoxBlur()});this.element.delegate(".diff-comment a","click",this,function(b){var a=$(this).parents(".diff-comment");b.data._showNestedCommentForm(a);return false});this.element.delegate(".diff-comment input[class=ok]","click",this,function(b){var a=$(this).parents(".diff-comment");b.data._addNestedComment(a)});this.element.delegate(".diff-comment input[class=cancel]","click",this,function(b){var a=$(this).parents(".diff-comment");b.data._hideNestedCommentForm(a)});this.element.delegate(".sign-in-comment","click",this,function(c){var a=$(".SignInLink").attr("href"),b=window.location.hash.replace(/#/g,"%23");if(b.length>0)a=a+b;window.location=a;return false});if(this.options.canAnnotate){this.element.delegate(".diff-segment .diff_line, .FileView .diff_line","mouseover",this,function(a){a.data._lineMouseOver($(this))});this.element.delegate(".diff-segment .diff_line, .FileView .diff_line","mouseout",this,function(a){a.data._lineMouseOut($(this))});this.element.delegate(".diff-segment .diff_line td, .FileView .diff_line td","click",this,function(a){a.data._showNoteBox($(this).parent("tr"))});this.element.delegate(".notesRow input.noteButton","click",this,function(d){var a=$(this),b=a.parents("table.diffTable"),c=$("tr.diff_line[data-lineindex="+a.attr("for-index")+"]",b);d.data._showNoteBox(c)});this.element.delegate(".deleteCommentLink","click",this,function(a){a.data._showDeleteComment($(this));return false});this.element.delegate("#DeleteCommentDialog .ok","click",this,function(a){a.data._deleteComment($(this));return false});this.element.delegate(".editCommentLink","click",this,function(a){a.data._showEditComment($(this),a.data._editComment,a.data.options.editCommentUrl);return false});this.element.delegate(".notesRow .noteButtons input#AddNote.ok","click",this,function(a){a.data._addInlineComment($(this).parents("div.notesEntry"))});this.element.delegate(".notesRow .noteButtons input#EditNote.ok","click",this,function(a){a.data._editComment($(this).parents("div.notesEntry"))});this.element.delegate(".notesRow .noteButtons input.cancel","click",this,function(a){a.data._closeNoteBox($(this).parents("tr"))});this.element.delegate(".notesRow .notesEntry textarea","keyup",function(){var a=$(this).parent(),b=$("div.Error",a);$.trim($(this).val()).length>0&&b.hide()})}this._commentBoxBlur();this.element.bind("load",this,function(b,a){b.data._loadComments(a)})},_loadComments:function(c){var b=this,d=c&&c.commentId?c.commentId:null;if(this.options.commentsUrl.length==0)return;$.ajax({type:"GET",cache:false,url:this.options.commentsUrl,success:function(e){if(typeof e.Message!="undefined")b.comments.html('<span class="Error">There was an error loading the comments</span>');else{b.comments.html(e);$(".AnnotationLink",b.comments).each(function(){var b=$(this);b.unbind();b.bind("click",function(d){var c=a(b);lineIndex=c.lineIndex,$link=$('.FileList a[id*="viewDiff"]').filter(function(){return $(this).data("fileId")===c.fileId});$link.data("lineIndex",lineIndex);showChanges();$link.trigger("click");$link.removeData("lineIndex");return false})});if(d!=null){var c=$("div[data-activity='"+d+"']",b.comments);c.length==1&&c[0].scrollIntoView()}}b._countComments()}})},updateCommentCountControl:function(c){var a=c.parents(".fileDiffSegment"),b=$(".pull_request_comments",a).length;if(b>0){$(".DiffCommentCount",a).text(b).parent().show();$(".show_hide_comments_seperator",a).show()}else{$(".DiffCommentCount",a).parent().hide();$(".show_hide_comments_seperator",a).hide()}},_countComments:function(){var b=$("div.activityOuter",this.comments).length,a=$("div.activity_child",this.comments).length;this.commentCount.text(b+a)},_commentBoxFocus:function(){if(this.commentBox.val()!=this.options.watermark)return;this.commentBox.val("").css("color","")},_commentBoxBlur:function(){if(this.commentBox.length==0)return;var a=this.commentBox.val();if(a.length>0&&a!=this.options.watermark)return;this.commentBox.val(this.options.watermark).css("color","#666666")},_addComment:function(){this.commentBox.val()==this.options.watermark&&this.commentBox.val("");if(!MvcValidation_Validate()){this._commentBoxBlur();return}if(this.isProcessingComment)return;else this.isProcessingComment=true;if(this.options.commentsUrl.length==0)return;var a=this,b=this.commentBox.val();CodePlex.UpdateProgress.show();$.ajax({type:"POST",url:this.options.commentsUrl,data:{body:b},success:function(c){CodePlex.UpdateProgress.hide();a.isProcessingComment=false;a.comments.append(a._buildCommentActivity("activityOuter",b,c.Message));a._countComments();a.commentBox.val("");a._commentBoxBlur();a.commentError.hide();a.updateCommentCountControl(a.comments[0])},error:function(){CodePlex.UpdateProgress.hide();a.isProcessingComment=false;a.commentError.html('<span class="Error">There was an error trying to save your comment</span>').show()}})},_showDeleteComment:function(a){this.deleteVictim=a.parents(".codeComment").eq(0);OpenDialog("#DeleteCommentDialog",true,"30em")},_deleteComment:function(f){var a=this,b=this.deleteVictim.attr("data-activity"),e=function(){var f=a.deleteVictim.parents(".notesRow"),e=$(".codeComment",f),c=$(".codeComment[data-activity='"+b+"']"),d=c.parents(".notesRow");if(c.length>0&&e.length==1){d.remove();a.updateCommentCountControl(d)}else if(c.length>0){c.remove();a.updateCommentCountControl(d)}},c=function(){var g=a.deleteVictim.parents(".notesRow"),f=$(".activity_child",g),c=$(".activity_child[data-activity='"+b+"']"),e=c.parents(".comment_section"),d=$(".diff-comment",e),h=$(".codeComment[data-activity='"+b+"']");c.length>0&&f.length==0&&d.css({marginLeft:"0"});c.remove();h.remove()},d=function(){var i=$(".activity_child",a.deleteVictim),n=a.deleteVictim.parents(".notesRow"),p=$(".codeComment",n),e,f,l,m,k,j,o=$(".diff-comment",a.deleteVictim),g,h;if(i.length>0){e=i.eq(0);f=e.attr("data-activity");l=$(".commentText",e).html();m=$(".codeCommentUser",e).html();k=$(".comment_date",e).html();j=$(".avatar",e).html();$(".commentText",a.deleteVictim).eq(0).html(l);$(".codeCommentUser",a.deleteVictim).eq(0).html(m);$(".comment_date",a.deleteVictim).eq(0).html(k);$(".avatar",a.deleteVictim).eq(0).html(j);$(".deleteCommentLink",a.deleteVictim).attr("data-id",f);$(".editCommentLink",a.deleteVictim).attr("data-id",f);a.deleteVictim.attr("data-activity",f);i.length==1&&o.css({marginLeft:"0"});e.remove();$(".codeComment[data-activity='"+b+"']").remove()}else{if(p.length==1)n.remove();else a.deleteVictim.remove();g=$(".activity_child[data-activity='"+b+"']");if(g.length>0){a.deleteVictim=g.eq(0);c()}h=$(".activityOuter[data-activity='"+b+"']");if(h.length>0){a.deleteVictim=h.eq(0);d()}}};$.ajax({type:"DELETE",url:this.options.deleteCommentUrl,data:{commentId:b},success:function(){var f=a.deleteVictim.hasClass("activity_child"),b=a.deleteVictim.hasClass("activityOuter");if(f)c();else if(b)d();else e()},error:function(){a.commentError.html("There was an error trying to delete the comment").show()}})},_showEditComment:function(c,i,j){var a=$(".comment_section p.commentText",c.parent().parent()),b=$("<textarea rows='6' cols='100' class='editComment'>"),e=$("<input type='button' value='Save' class='ok saveEditButton' title='Save Edit'>"),d=$("<input type='button' value='Cancel' class='cancel cancelEditButton' title='Cancel'>"),f=$("<div class='ClearBoth comment_errors'>"),k=$("<div class='ClearBoth'>"),g=function(){e.remove();d.remove();b.remove();f.remove();a.show();c.show();$(window).trigger("resize")},h=function(d){var e=a.parents(".activity_child").attr("data-activity")||a.parents(".codeComment").attr("data-activity"),c=$("#comment_view div[data-activity='"+e+"'] div.comment_section p.commentText"),b=$("#changes_view div[data-activity='"+e+"'] div.comment_section p.commentText");if(c.length>0&&b.length>0){c.eq(0).text(d);b.eq(0).text(d)}};b.appendTo(a.parent());f.appendTo(a.parent());e.appendTo(a.parent()).click(function(c){if(i(a,j)){g();h(b.val())}return false});d.appendTo(a.parent()).click(function(){g();return false});k.appendTo(a.parent());a.hide();c.hide();b.show();b.text(a.text()).focus();$(window).trigger("resize")},_editComment:function(b,f){var a=b.parents(".activity_child").attr("data-activity"),d=$(".comment_errors",b.parent()),e=$("textarea",b.parent()),c=e.val();if(!a)a=b.parents(".codeComment").attr("data-activity");if(c.length==0||!a){d.html('<span class="Error">Comment is required</span>');$(window).trigger("resize");return false}$.ajax({type:"PUT",url:f,data:{commentId:a,text:c},success:function(){var b=$('.codeComment[data-activity="'+a+'"] div.comment_section p.commentText'),d=new codeplex.ui.WorkItemMention;b&&b.length>0&&b.eq(0).html(d.replaceTextWithLinks(c))},error:function(){d.append('<span class="Error">There was an error trying to save your comment</span>')}});return true},_buildCommentActivity:function(c,d,a){var b=$('<div class="codeComment '+c+'" data-activity="'+a+'">    <div class="FloatRight">      <a href="#" class="deleteCommentLink" data-id="'+a+'">Delete</a>      <a href="#" class="editCommentLink editCommentLinkBorder" id="Edit_Comment_'+a+'" data-id="'+a+'">Edit</a>    </div>    <div style="float:left;"><img class="avatar" src="'+this.options.avatarUrl+'" alt="Avatar" title="'+this.options.userName+'" /></div>    <div class="comment_section">        <p>            <a href="'+this.options.profileUrl+'" class="codeCommentUser UserAvatarLink Bold"></a>            <br />            <span class="comment_date">              <span class="smartDate" style="color: #c0c0c0;">less than a minute ago</span>            </span>        </p>        <p class="commentText" style="white-space: pre-wrap"></p>    </div>    <div class="clear"></div></div>'),e=new codeplex.ui.WorkItemMention;$(".UserAvatarLink",b).text(this.options.userName);$(".commentText",b).html(e.replaceTextWithLinks($encodeIt(d)));return b},_showNestedCommentForm:function(a){var b=$(window).scrollTop();$("a",a).hide();$("fieldset",a).show();$("textarea",a).focus();$(window).scrollTop(b+1)},_hideNestedCommentForm:function(a){var b=$(window).scrollTop();$("a",a).show();$("fieldset",a).hide();$("textarea",a).val("");$(window).scrollTop(b+1)},_addNestedComment:function(c){if(this.isProcessingComment)return;else this.isProcessingComment=true;var d=this,e=a(c),f=$(".comment-error",c),b=$.extend({container:$("#"+c.data("container"),c.parent()),comment:$("textarea",c).val()},e);if(b.fileId&&b.fileId.length==0)b.fileId=window.location.hash.substring(1);this._annotateFile({annotation:b,success:function(a){b.container.append(d._buildCommentActivity("activity_child",b.comment,a));d._hideNestedCommentForm(c);d._countComments();d.append(b,a);c.css({marginLeft:"75px"});d.isProcessingComment=false;d.updateCommentCountControl(b.container)},validationError:function(){f.text("Please enter a comment.").show();$(window).trigger("resize");d.isProcessingComment=false}})},_addInlineComment:function(a){if(this.isProcessingComment)return;else this.isProcessingComment=true;var c=this,f=$("div.Error",a),e=b(a),d=$.extend({comment:$("textarea",a).val(),lineIndex:a.attr("note-box-for")},e);if(d.fileId&&d.fileId.length==0)d.fileId=window.location.hash.substring(1);this._annotateFile({annotation:d,success:function(b){c._loadComments(null);c.append(d,b);c._closeNoteBox(a.parents("tr.notesRow"));c.isProcessingComment=false;c.updateCommentCountControl(a)},validationError:function(){f.show();$(window).trigger("resize");c.isProcessingComment=false}})},_annotateFile:function(b){var a=b.annotation;if(b.validationError&&$.trim(a.comment).length==0){b.validationError();return}CodePlex.UpdateProgress.show();$.ajax({type:"POST",url:this.options.annotationUrl,data:{note:a.comment,lineIndex:a.lineIndex,fileId:a.fileId,artifactId:this.options.artifactId,area:this.options.area,repositoryName:this.options.repositoryName,owner:this.options.owner},success:function(a){CodePlex.UpdateProgress.hide();b.success(a.Message)}})},append:function(a,c){var b=this;$("div.diff-segment table.diffTable, div.FileView table.diffTable",this.element).each(function(){var d=$(this);if(d.data("fileId")!=a.fileId)return;var e=$("tr[data-lineindex="+a.lineIndex+"]",d);if(e.length==0)return;b._getNotesContainer(d,e,a.lineIndex).append(b._buildCommentActivity("activityOuter pull_request_comments",a.comment,c));b.updateCommentCountControl(d)});this._triggerRepaint()},_getNotesRow:function(d,e,a){var b=$("tr[notes-for="+a+"]",d);if(b.length==1)return b;var c=$('<tr class="notesRow" notes-for="'+a+'">  <td class="notesCell"></td>  <td class="notesCell">    <div class="notes" />    <div class="notesEntry" note-box-for="'+a+'" style="display:none;">      <textarea class="noteText" />      <div class="Error" style="display:none;">Comment is required</div>      <div class="noteButtons">        <input type="button" id="AddNote" class="ok" value="Add Comment" title="Add Comment" />        <input type="button" id="EditNote" class="ok" value="Edit Comment" title="Edit Comment" style="display: none" />        <input type="button" class="cancel" value="Cancel" title="Cancel" />      </div>    </div>    <input type="button" class="noteButton ok" for-index="'+a+'" value="Add Comment" title="Add Comment" />  </td></tr>');e.after(c);return c},_getNotesContainer:function(b,c,a){return $("div.notes",this._getNotesRow(b,c,a))},_lineMouseOver:function(b){var e=$(".line",b),a=$(".lineNumber",b),d=$(".diffLineNumber",a),c=$("img",a);if(!b.data("lineIndex"))return;b.css("cursor","pointer");if(c.length==0)c=$("<img />").attr("src",this.options.addNoteIconUrl).appendTo(a);d.hide();c.show();a.addClass("lineNumberActive");e.attr("title","Click to add a comment for this line").addClass("lineActive")},_lineMouseOut:function(a){var d=$(".line",a),b=$(".lineNumber",a),c=$(".diffLineNumber",b),e=$("img",b);if(!a.data("lineIndex"))return;a.css("cursor","default");c.show();e.hide();b.removeClass("lineNumberActive");d.removeAttr("title").removeClass("lineActive")},_showNoteBox:function(a){var f=$(window).scrollTop(),c=a.data("lineIndex");if(!c)return;var e=a.parents("table.diffTable"),j=e.parents(codeplex.ui.FloatingScrollbar.DIFF_SEGMENT_SELECTOR),b=this._getNotesRow(e,a,c),d=$("div[note-box-for="+c+"]",b),h=$("textarea.noteText",d),i=$("div.Error",d),g=$("input.noteButton",b);b.show();d.show();i.hide();$("input#AddNote.ok",a).show();$("input#EditNote.ok",a).hide();g.hide();h.val("").focus();j.floatingScrollbar("resetPosition");this._triggerRepaint();$(window).scrollTop(f-1);$(window).scrollTop(f+1)},_closeNoteBox:function(a){var b=$(window).scrollTop(),e=$("div.notes",a),d=$("div.notesEntry",a),c=$("input.noteButton",a);d.hide();if(e.is(":empty"))a.remove();else c.show();this._triggerRepaint();$(window).scrollTop(b-1);$(window).scrollTop(b+1)},_triggerRepaint:function(){this.options.repaint&&this.options.repaint()}});$(document.body).bind(codeplex.ui.LazyContentLoaderWidget.LAZY_CONTENT_LOADED,function(h,b){var d=$(b),c=d.parent(),g=$(b).parents(".codeComment:first"),f=$(".pull_request_comments",b).length,e;if(f>0){$(".DiffCommentCount",c).text(f).parent().show();$(".show_hide_comments_seperator",c).show()}else{$(".DiffCommentCount",c).parent().hide();$(".show_hide_comments_seperator",c).hide()}if(g.length!==0){e=a(d);$(b).find("tr[data-lineindex="+e.lineIndex+"]").addClass("selectedLine")}})});var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this.options={popped:function(){}}}a.prototype._init=function(){var d=this,b=$(window);if(b.data(a._INSTANCE_DATA_NAME))return;b.bind("popstate.history",$.proxy(function(a){var b=a.originalEvent?a.originalEvent.state:null;d._triggerPop(b)},this));this._isUnsupportedInternetExplorer()&&b.bind("hashchange.history",$.proxy(this._handleLegacy,this));var c=window.location.hash;this.options.defaultState&&this.replace(this.options.defaultState,null,this.options.defaultUrl);c.length>0&&this._triggerPop({hash:c});b.data(a._INSTANCE_DATA_NAME,this)};a.prototype._handleLegacy=function(){if(this.lastHash==null||this.lastHash!=null&&window.location.hash!=this.lastHash){this.lastHash=window.location.hash;this._triggerPop({hash:this.lastHash})}};a.prototype._isUnsupportedInternetExplorer=function(){return $.browser.msie&&parseInt($.browser.version)<10};a.prototype._triggerPop=function(a){this.options.popped(a);$(window).trigger("hashchanged",a)};a.prototype.add=function(c,d,a){if(window.history&&window.history.pushState)window.history.pushState(c,d,a);else if(this._isUnsupportedInternetExplorer()){var b=a.indexOf("#");if(b>=0)window.location.hash=this.lastHash=a.substring(b)}};a.prototype.replace=function(a,b,c){window.history&&window.history.replaceState&&window.history.replaceState(a,b,c)};a.prototype.destroy=function(){$(window).unbind(".history").data(a._INSTANCE_DATA_NAME,null)};a._INSTANCE_DATA_NAME="browsing-history";return a}(a.BaseEnhancement);a.BrowsingHistory=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.browsingHistory",new codeplex.ui.BrowsingHistory);$(function(){$.widget("codeplex.floatingViewport",{options:{splitter:null,floatingElements:[],selectorForHeaderOffset:".page_title",repaint:null,disableSync:false},_create:function(){this.window=$(window);this.header=$(".floating_header",this.element);this.fakeHeaderBackground=$("<div />").addClass("floating_header_background").css("background","white").css("width","100%").css("left",0).css("position","fixed").css("z-index",147).hide().insertAfter(this.header);this.fakeHeader=$("<div />").addClass("floating_header_fake").hide().insertAfter(this.header);this.fakeSplitter=$("<div />").addClass("floating_splitter_fake").css("width","3px").css("background","#AAA").css("z-index",0).css("position","fixed").hide().appendTo("body")},_init:function(){if(this.initialized)return;this.headerOriginalPosition=this.header.offset();this.headerOriginalWidth=this.header.width();this.headerOriginalHeight=this.header.height();this.topMargin=parseInt($(this.options.selectorForHeaderOffset,this.header).css("margin-top"))||0;this.window.bind("scroll.floating",this,function(a){a.data.syncView()});this.window.bind("resize.floating",this,function(a){a.data.syncView()});if(this.options.splitter){this.options.splitter.bind("mousedown.floating",this,function(a){a.data._handleSplitter(true)});this.options.splitter.bind("mouseup.floating",this,function(a){a.data._handleSplitter(false)})}this.fakeHeader.length>0&&this._setupFakeHeader();this.initialized=true},syncView:function(b){if(this.options.disableSync)return;var h=this.window.scrollTop(),i=Math.max(h,b?b:0),j=this.headerOriginalPosition!=null?this.headerOriginalPosition.top:0,k=this.headerOriginalWidth,d="relative",e="auto",c="auto",g=0;if(h>0&&j-this.topMargin<i){d="fixed";e=0;c=this.headerOriginalHeight+this.topMargin;this.fakeHeader.show();this.fakeHeaderBackground.css("top",e).height(this.headerOriginalHeight+this.topMargin).show();this.options.splitter&&this.fakeSplitter.show()}else{this.fakeHeader.hide();this.fakeHeaderBackground.hide();this.options.splitter&&this.fakeSplitter.hide()}this.header.css("position",d).css("top",e).css("width",k);for(var f=0;f<this.options.floatingElements.length;f++){var a=this.options.floatingElements[f];a.element.css("position",d).css("top",c).css("width",a.getWidth());if(a.height)g+=a.height;a.height&&this.options.splitter&&this.fakeSplitter.css("top",c).css("left",a.element.offset().left-2).css("height",a.height)}if(b){this.options.disableSync=true;this.window.scrollTop(b-this.headerOriginalHeight-this.topMargin-g*2);this.options.disableSync=false}this.options.repaint&&this.options.repaint()},_handleSplitter:function(a){if(a){$(this.window).bind("mousemove.dragging",this,function(a){a.data.syncView()});$(this.window).bind("mouseup.diff",this,function(a){a.data._handleSplitter(false)})}else{$(this.window).unbind("mousemove.dragging");$(this.window).unbind("mouseup.dragging")}},_setupFakeHeader:function(){for(var b=this.headerOriginalHeight,a=0;a<this.options.floatingElements.length;a++){var c=this.options.floatingElements[a];if(c.height)b+=c.height}this.fakeHeader.width(this.headerOriginalWidth).height(b+this.topMargin)},destroy:function(){this.window.unbind(".floating");this.fakeHeader.hide();this.fakeHeaderBackground.hide();this.header.css("position","relative").css("top","auto");if(this.options.splitter){this.options.splitter.unbind(".floating");this.window.unbind(".dragging");this.fakeSplitter.hide()}this.initialized=false}})});$.fn.isOnScreen=function(a){var d=$(this),b=d.offset(),c=$(window),f=c.scrollTop(),e=c.scrollLeft();a=a===undefined?0:a;return b!=undefined&&b.top+d.height()>=f-a&&b.top<=f+c.height()+a&&b.left+d.width()>=e-a&&b.left<=e+c.width()+a};$.extend($.expr[":"],{"on-screen":function(a){return $(a).isOnScreen()}});var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.call(this);this._initialized=false;a.BaseEnhancement.registerContentChange(b.enhance)}b.prototype._init=function(){if(!this._initialized){this._initialized=true;$("."+b.ACTION_BAR_ITEM_LINK_CLASS_NAME,this.element).click($.proxy(this.action_clicked,this));$("#actionBar_ul").applyLastClassToList("actionBar_sublinks")}};b.prototype.action_clicked=function(d){var c=$(d.target).parents("li:first"),e={actionId:c.data(b.ACTION_BAR_ACTION_ID_DATA_NAME),$actionElement:c,event:d,actionType:c.data(b.ACTION_BAR_ACTION_TYPE_DATA_NAME),data:a.BaseEnhancement.getOptions(c)};b.raiseActionItemClicked(e);return false};b.registerActionItemClicked=function(a){b._action_item_clicked_handlers.push(a)};b.raiseActionItemClicked=function(c){for(var a=0;a<b._action_item_clicked_handlers.length;a++)b._action_item_clicked_handlers[a]($.extend({},c))};b.enhance=function(){jQuery("."+b.ACTION_BAR_CLASS_NAME).actionBar()};b.ACTION_BAR_CLASS_NAME="action_bar";b.ACTION_BAR_ITEM_CLASS_NAME="actionBar_sublinks";b.ACTION_BAR_ITEM_LINK_CLASS_NAME="action_bar_item_link";b.ACTION_BAR_ITEM_CUSTOM_CONTENT_CLASS_NAME="actionBar_custom_content";b.ACTION_BAR_ACTION_ID_DATA_NAME="action-id";b.ACTION_BAR_ACTION_TYPE_DATA_NAME="action-type";b._action_item_clicked_handlers=[];return b}(a.BaseEnhancement);a.ActionBarWidget=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));jQuery.widget("CodePlex.actionBar",new codeplex.ui.ActionBarWidget);var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(b){var c=function(){function a(b,a){this.id=b;this.handler=a}return a}();b.CallbackSet=c;var d=function(d){__extends(b,d);function b(){var b=this;d.call(this);this._callbacks=[];a.ui.ActionBarWidget.registerActionItemClicked(function(c){for(var d=0;d<b._callbacks.length;d++){var a=b._callbacks[d];if(a.id==c.actionId||a.id==c.actionType){a.handler(c);return}}return})}b.prototype._registerCallback=function(b,a){this._callbacks.push(new c(b,a))};return b}(b.BaseEnhancement);b.BaseActionBarHandler=d})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){codeplex.ui.ActionBarWidget.registerActionItemClicked(sourceCode_actionBar_itemClicked);$("#cloneHoverDiv").popupDisplayed(actionBar_clonePopupDisplayed);$("#forkCollabDiv").popupDisplayed(actionBar_ForkCollaboratorsPopupDisplayed);$("#vsconnectDiv").popupDisplayed(actionBar_VSConnectPopupDisplayed)});function sourceCode_actionBar_itemClicked(a){switch(a.actionId){case"actionbar_deletefork":actionBar_ClickDeleteFork(a.data);return;case"actionbar_download":actionBar_downloadChangeset(a.data);return}}function actionBar_ClickDeleteFork(a){if(a.loggedinUser==null)return;OpenDialog("#deleteNetworkDialog",true,"30em");$("#deleteNetworkDialog #CloseOk").unbind("click.submit").bind("click.submit",function(){CodePlex.UpdateProgress.show();$.ajax({url:a.deleteForkUrl,data:{type:"Fork",repositoryName:a.repositoryName,owner:a.owner,filterView:0},dataType:"json",type:"DELETE",success:function(a){if(a.IsError){$("#NetworkError").text(a.Message).show();CodePlex.UpdateProgress.hide()}else location.href=a.RedirectUrl}})})}function actionBar_downloadChangeset(a){suppressUnsavedData();$.post(a.downloadUrl,{changeSetId:a.changesetId,repositoryName:a.repositoryName,ownerName:a.owner},function(a){window.location=a.RedirectUrl})}function actionBar_clonePopupDisplayed(){var a=$("#cloneHoverDiv"),c=$("#clonetext1"),f=$("#sub_heading"),g=2*$("#cloneHoverDiv").css("padding").replace("px",""),d=f.offset().left+f.width(),e=actionBar_GetContentWidth(c.val()+"/t");c.css("width",e);a.css("width",Math.max($("#clonehead1").width(),e+$("#cloneline1").width(),$("#cloneline2").width()));var b=a.width()+g,h=$("."+codeplex.ui.PopupActionHandler.POPUP_ARROW_CLASS_NAME).offset();a.css({left:h.left-b/4+"px"});a.offset().left+b>d&&a.css({left:d-b+"px"});c.select()}function actionBar_VSConnectPopupDisplayed(){var a=$("#vsconnectDiv"),c=$("#connecttext1"),g=$("#connecttext2"),f=$("#sub_heading"),i=2*$("#vsconnectDiv").css("padding").replace("px",""),e=f.offset().left+f.width(),d=actionBar_GetContentWidth(c.val()+"/t");c.css("width",d);var h=actionBar_GetContentWidth(g.val()+"/t");g.css("width",h);a.css("width",Math.max($("#connecthead1").width(),d,h,$("#connectline3").width()));var b=a.width()+i,j=$("."+codeplex.ui.PopupActionHandler.POPUP_ARROW_CLASS_NAME).offset();a.css({left:j.left-b/4+"px"});a.offset().left+b>e&&a.css({left:e-b+"px"});c.select()}function actionBar_ForkCollaboratorsPopupDisplayed(){var d=$("#sub_heading"),a=$("#forkCollabDiv"),c=d.offset().left+d.width(),b=2*$("#forkCollabDiv").css("padding").replace("px","");a.offset().left+a.width()+b>c&&a.css({left:c-(a.width()+b)+"px"})}function actionBar_GetContentWidth(b){var a=$("#divWidthCalc");if(a.length===0)$("body").append('<div id="divWidthCalc" style="position: absolute; visibility: hidden; height: auto; width: auto;"></div>');else $("#divWidthCalc").text("");$("#divWidthCalc").text(b);return $("#divWidthCalc").width()};var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this.options={}}a.prototype._init=function(){this.element.delegate("div.application_reject input.ok","click",this,function(a){a.data._toggleTokenState($(this))})};a.prototype._toggleTokenState=function(b){var e=b.data("id"),c=b.data("state"),a=c==2?3:2,d={id:e,state:a};$.post(this.options.manageAppsUrl,d,function(c){if(c.IsError)return;b.val(a==3?"Undo":"Revoke Access").data("state",a)},"json")};return a}(a.BaseEnhancement);a.UserProfileWidget=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.userProfile",new codeplex.ui.UserProfileWidget);var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.call(this);a.BaseEnhancement.registerContentChange(b.enhance)}b.prototype._create=function(){this.myUniqueId=b._uniqueId++;this.element.data("scrollbar",this.myUniqueId)};b.prototype._init=function(){this.syncView()};b.prototype.destroy=function(){if(this.scrollbarContainer!=null){this.scrollbarContainer.unbind("scroll.float-scrollbar");this.scrollbarContainer.remove()}$(window).unbind("scrollstart.float-scrollbar").unbind("scrollstop.float-scrollbar").unbind("resize.float-scrollbar");this.element.removeData("scrollbar")};b.prototype.width=function(a){if(!this._ensureContainersCreated())return;var b=a.container;this.scrollbarContainer.width()!=b&&this.scrollbarContainer.width(b);this.scrollbar.width()!=a.scrollbar&&this.scrollbar.width(a.scrollbar)};b.prototype.height=function(a){if(!this._ensureContainersCreated())return 0;if(a==null)return this.scrollbarContainer.is(":visible")?this.scrollbarContainer.height():0;this.scrollbarContainer.height(a)};b.prototype.hide=function(){if(!this._ensureContainersCreated())return;this.scrollbarContainer.hide()};b.prototype.show=function(){if(!this._ensureContainersCreated())return;this.scrollbarContainer.show()};b.prototype.fixAt=function(a){if(!this._ensureContainersCreated())return;this.scrollbarContainer.css("position","fixed").css("left",a.left).css("bottom",a.bottom)};b.prototype.resetPosition=function(){if(!this._ensureContainersCreated())return;this.scrollbarContainer.scrollLeft(0);this._handleScroll()};b.prototype.syncView=function(){if($.browser.msie)setTimeout($.proxy(this._reallySyncView,this),1);else this._reallySyncView()};b.prototype._reallySyncView=function(){if(!this._ensureContainersCreated())return;var a=this.options.attachedScrollSelector!=null?$(this.options.attachedScrollSelector):this.element,d=$(this.options.attachedContentSelector,a),b=this.options.attachedHeightSelector!=null?$(this.options.attachedHeightSelector):this.element,m=a.offset()!=undefined?a.offset().top:0,e=a.width(),f=parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")),g=d.width(),j=g>e,h=$(window),l=b.offset().top+b.height()+parseInt(b.css("padding-bottom")),c=h.scrollTop()+h.height(),k=Math.max(c-l,0),i=c-m-this.scrollbarContainer.height();if(!a.is(":visible")||!a.isOnScreen()||!j||i<0){this.hide();return}this.width({container:e+f,scrollbar:g+f});this.fixAt({left:d.offset().left+a.scrollLeft()+this.options.extraLeftOffset,bottom:k});this.show();this._handleScrollInverse()};b.prototype._ensureContainersCreated=function(){if(this.scrollbarContainer!=null)return true;var a=this.options.attachedScrollSelector!=null?$(this.options.attachedScrollSelector):this.element,b=$(this.options.attachedContentSelector,a),d=a.width(),e=b.width(),c=e>d;if(!a.is(":visible")||!c)return false;this.scrollbarContainer=$('<div class="floating-scrollbar-container" />').data("uniqueId",this.myUniqueId).appendTo("body");this.scrollbar=$('<div class="floating-scrollbar" />').appendTo(this.scrollbarContainer);this.options.allowBottomPadding&&a.css("padding-bottom",this.scrollbarContainer.height());this.scrollbarContainer.bind("scroll.float-scrollbar",$.proxy(this._handleScroll,this));this.options.syncOnScroll&&$(window).bind("scrollstart.float-scrollbar",$.proxy(this.hide,this)).bind("scrollstop.float-scrollbar",$.proxy(this.syncView,this)).bind("resize.float-scrollbar",$.proxy(this.syncView,this));return true};b.prototype._handleScroll=function(){var a=this.options.attachedScrollSelector!=null?$(this.options.attachedScrollSelector):this.element;a.scrollLeft(this.scrollbarContainer.scrollLeft())};b.prototype._handleScrollInverse=function(){var a=this.options.attachedScrollSelector!=null?$(this.options.attachedScrollSelector):this.element,b=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;!b&&this.scrollbarContainer.scrollLeft(a.scrollLeft())};b.enhance=function(){$(b.DIFF_SEGMENT_SELECTOR).floatingScrollbar({attachedContentSelector:"table.diffTable",syncOnScroll:true,allowBottomPadding:true,extraLeftOffset:0,extraBottomOffset:0})};b._uniqueId=0;b.DIFF_SEGMENT_SELECTOR=".diff-segment .diffPane";return b}(a.BaseEnhancement);a.FloatingScrollbar=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.floatingScrollbar",new codeplex.ui.FloatingScrollbar);var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){var a=this;b.call(this);this._registerCallback("Navigate",function(b){return a._navigate(b)})}a.prototype._navigate=function(b){try{window.location=b.data[a.NAVIGATE_URL_KEY]}catch(c){}};a.NAVIGATE_URL_KEY="navigate-url";return a}(a.BaseActionBarHandler);a.NavigateActionHandler=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){new codeplex.ui.NavigateActionHandler});var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(b){var c=function(c){__extends(a,c);function a(){var a=this;c.call(this);this._registerCallback("PopUp",function(b){return a._showPopup(b)})}a.prototype._showPopup=function(c){var f=c.$actionElement.hasClass(a.POPUP_ACTIVE_CLASS_NAME),d=$("."+b.ActionBarWidget.ACTION_BAR_ITEM_CUSTOM_CONTENT_CLASS_NAME,c.$actionElement),e=$("<div class='"+a.POPUP_ARROW_CLASS_NAME+"' />");if(!f){c.$actionElement.append(e);d.children().toggle(true);this._positionPopup(e,d);d.children().popupDisplayed();c.$actionElement.toggleClass(a.POPUP_ACTIVE_CLASS_NAME,true);c.event.stopPropagation();this._setupCloseHandler(e,d)}};a.prototype._positionPopup=function(b,a){a.children().position({my:"left top",at:"left bottom",of:b,offset:"-20 0",collision:"fit"});a.children().position({my:"left top",at:"left bottom",of:b,offset:"-20 0",collision:"fit"})};a.prototype._isFloatable=function(a){return $(".HoverPanel",a).hasClass("Floatable")};a.prototype._setFloatedPosition=function(f,b){var a=$(".HoverPanel",b),c=$(window).scrollTop(),e,d;this._positionPopup(f,b);e=a.offset().top;d=a.offset().left;e-c<0&&a.offset({top:c,left:d})};a.prototype._setupCloseHandler=function(d,b){var c=this,e=$("html");!this._isFloatable(b)&&e.bind("click"+a._EVENT_NAMESPACE,function(a){!$.contains(b.get(0),a.target)&&c._hidePopup(d,b)});$(window).bind("scroll"+a._EVENT_NAMESPACE,function(){if(c._isFloatable(b))c._setFloatedPosition(d,b);else c._hidePopup(d,b)});$(document).bind("keyup"+a._EVENT_NAMESPACE,function(a){a.which==27&&c._hidePopup(d,b)})};a.prototype._hideActivePopup=function(){var c=$("."+a.POPUP_ACTIVE_CLASS_NAME);if(c.length===1){var e=$("."+a.POPUP_ARROW_CLASS_NAME,c),d=$("."+b.ActionBarWidget.ACTION_BAR_ITEM_CUSTOM_CONTENT_CLASS_NAME,c);this._hidePopup(e,d)}};a.prototype._hidePopup=function(d,c){d.remove();c.children().toggle(false);c.parents("."+b.ActionBarWidget.ACTION_BAR_ITEM_CLASS_NAME+":first").toggleClass(a.POPUP_ACTIVE_CLASS_NAME,false);$("html").unbind(a._EVENT_NAMESPACE);$(window).unbind(a._EVENT_NAMESPACE)};a._EVENT_NAMESPACE=".PopupActionHandler";a.POPUP_ACTIVE_CLASS_NAME="popup-active";a.POPUP_ARROW_CLASS_NAME="action_bar_popup_arrow";a.POPUP_DISPLAYED_EVENT_NAME="pop-displayed";return a}(b.BaseActionBarHandler);b.PopupActionHandler=c;$(function(){new a.ui.PopupActionHandler})})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.fn.popupDisplayed=function(a){if(!a)return this.each(function(){$(this).trigger(codeplex.ui.PopupActionHandler.POPUP_DISPLAYED_EVENT_NAME)});else return this.each(function(){$(this).bind(codeplex.ui.PopupActionHandler.POPUP_DISPLAYED_EVENT_NAME,a)})};var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this)}a.prototype._init=function(){var a=this;this.options.redirect=this.options.redirect?this.options.redirect:function(a){window.location.href=a};this.element.delegate("#BriefPublishSteps","click",function(){$("#PublishSteps",a.element).slideToggle(250);return false});this.element.delegate("#DeleteProject","click",function(){a._deleteShow()});$("#deleteProjectDialog").delegate("#DeleteProjectButton","click",function(){a._deleteSubmit()});this.element.delegate("#PublishProject","click",function(){a._publish()});this._correctDate()};a.prototype._correctDate=function(){var a=$(".smartDate",this.element);a.each(function(){var a=$(this);if(a.text().toLowerCase()=="today")a.text("today");else a.text("on "+a.text());return a})};a.prototype._deleteShow=function(){OpenDialog("#deleteProjectDialog",true,"37em")};a.prototype._deleteSubmit=function(){var a=this;CodePlex.UpdateProgress.show();$.ajax({url:this.options.deleteUrl,type:"DELETE",success:function(b){if(!b.IsError){a.options.redirect(b.RedirectUrl);return}CodePlex.UpdateProgress.hide()}})};a.prototype._publish=function(){var a=this;CodePlex.UpdateProgress.show();$.ajax({url:this.options.publishUrl,type:"POST",success:function(b){if(b.IsError)a.options.redirect(b.RedirectUrl);else{var c='<div class="HeaderPanel Header">    <h1 id="PublishConfirmation">Your project has been published!</h1></div>';a.element.empty().append(c);CodePlex.UpdateProgress.hide()}}})};return a}(a.BaseEnhancement);a.ProjectCountdown=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.projectCountdown",new codeplex.ui.ProjectCountdown);$(function(){codeplex.ui.ActionBarWidget.registerActionItemClicked(homePage_actionBar_itemClicked)});function homePage_actionBar_itemClicked(a){switch(a.actionId){case"actionbar_deletepage":actionBar_ClickDeletePage(a.data);return}}function actionBar_ClickDeletePage(a){var b=$("#deleteWikiDialog");if(b.length==0){$('<div id="deleteWikiDialog" class="modal" style="display:none"><div class="row"><h2>Delete Page <a href="javascript:return false;" class="close">X</a></h2></div><div class="modal_info"><p>Are you sure you want to delete "'+a.wikiPageTitle+'"?</p><p>All history, comments and attachments for this page will be deleted and cannot be restored.</p><p class="modal_buttons"><input type="button" id="CloseCancel" value="Cancel" class="cancel" /><input type="button" id="CloseOk" value="Delete" class="ok" /></p><div class="ClearBoth"></div></div></div>').appendTo("body");$("#deleteWikiDialog #CloseOk").bind("click",actionBar_ExecuteDeletePage)}OpenDialog("#deleteWikiDialog",true,"30em")}function actionBar_ExecuteDeletePage(a){CodePlex.UpdateProgress.show();$.ajax({type:"DELETE",url:a.deletePageUrl,data:{title:$("#WikiTitle").val()},success:function(a){CodePlex.UpdateProgress.hide();window.location=a},error:function(a){CodePlex.UpdateProgress.hide()}})};$(function(){codeplex.ui.ActionBarWidget.registerActionItemClicked(project_action_itemClicked);actionBar_toggleFavoriteProject(codeplex.ui.BaseEnhancement.getOptions($("#li_actionbar_followproject")),false)});function project_action_itemClicked(a){switch(a.actionId){case"actionbar_followproject":actionBar_toggleFavoriteProject(a.data,true);return}}function actionBar_toggleFavoriteProject(a,b){if(a==null)return;if(a.loggedInUser==""&&b){window.location=a.returnUrl;return}var c="/site/api/projects/"+a.projectName+"/followProject";if(b)$.post(c,function(a){actionBar_loadToggleFavoriteProject(a)},"json");else $.getJSON(c,function(a){actionBar_loadToggleFavoriteProject(a)})}function actionBar_loadToggleFavoriteProject(c){var g="Follow",e="Follow this project to get updates in your activity stream.",f="Un-follow",d="You are already following this project. You can un-follow this project to stop receiving updates.",b="",a=$("#actionbar_followproject"),h=a.children();a.text("");a.append(h);if(c.IsFollowing){a.append(" "+f);b=d}else{a.append(" "+g);b=e}a.append(" ("+c.TotalFollowers+")");a.attr("title",b)};var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){var a=this;b.call(this);this._registerCallback("actionbar_deleteapplication_ok",function(b){return a._deleteApplication(b)})}a.prototype._deleteApplication=function(a){CodePlex.UpdateProgress.show();$.ajax({type:"DELETE",url:"/site/api/developers/apps/"+a.data.id,success:function(a){CodePlex.UpdateProgress.hide();if(!a.IsError)window.location=a.RedirectUrl},error:function(){CodePlex.UpdateProgress.hide()}})};return a}(a.BaseActionBarHandler);a.DeveloperHandlers=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){new codeplex.ui.DeveloperHandlers});var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){var a=this;c.call(this);this._registerCallback("Confirm",function(b){return a._showConfirm(b)})}b.prototype._showConfirm=function(b){var d="#"+b.actionId+"_popup",c=$("input[class=ok]",d);OpenDialog(d,true,"36em");c.data("click_init")!=true&&c.click(function(){b.actionId+="_ok";b.actionType="None";a.ActionBarWidget.raiseActionItemClicked(b)}).data("click_init",true)};return b}(a.BaseActionBarHandler);a.ConfirmActionHandler=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){new codeplex.ui.ConfirmActionHandler});$(function(){codeplex.ui.ActionBarWidget.registerActionItemClicked(workItem_actionBar_itemClicked)});function workItem_actionBar_itemClicked(a){switch(a.actionId){case"actionbar_addcomment":actionBar_AddComment();return;case"actionbar_closeitem":actionBar_CloseItem(a.data);return;case"actionbar_edititem":actionBar_EditItem(a.data);return;case"actionbar_deleteissue":actionBar_ClickDeleteIssue(a.data);return;case"actionbar_issueNotification":actionBar_IssueNotifications(a.data);return}}function actionBar_EditItem(b){var a=b.editItemUrl,c=b.retainCommentUrl;if($("#Comment").val().length>0)$.post(c,{comment:$("#Comment").val()},function(){window.location=a});else window.location=a;return false}function actionBar_ClickDeleteIssue(a){var b=$("#deleteWorkItemDialog");if(b.length==0){$('<div id="deleteWorkItemDialog" class="modal" style="display:none"><div class="row"><h2>Delete Work Item <a href="javascript:return false;" class="close">X</a></h2></div><div class="modal_info"><p>Do you want to delete this work item?</p><p class="modal_buttons"><input type="button" id="CloseCancel" value="Cancel" class="cancel" /><input type="button" id="CloseOk" value="Delete" class="ok" /></p><div class="ClearBoth"></div></div></div>').appendTo("body");$("#deleteWorkItemDialog #CloseOk").bind("click",function(b){CodePlex.UpdateProgress.show();$.ajax({url:a.deletePageUrl,type:"DELETE",success:function(a){location.href=a.RedirectUrl}})})}OpenDialog("#deleteWorkItemDialog",true,"30em")}function actionBar_CloseItem(a){changeStatus();return false}function actionBar_AddComment(){$("#Comment").focus();return false}function actionBar_IssueNotifications(a){if(a.loggedInUser==""){window.location=a.returnUrl;return}$("#subscriptionSettings #callingComponent").val("workitem");OpenDialog("#subscriptionSettings",true,"37em");return false};var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(b){var c=function(c){__extends(b,c);function b(){var a=this;c.call(this);this._currentWidth=null;this._registerCallback("actionbar_deleterelease",function(b){return a._deleteRelease(b)});this._$reassignDialog=$("#reassignWorkItems");this._$list=$("#ReassignWorkItemsReleaseList",this._$reassignDialog);this._$checkbox=$("#reassignWorkItemsCheckbox",this._$reassignDialog);this._$reassignDelete=$("#ReassignWorkItemsOkButton",this._$reassignDialog);this._$confirmDialog=$("#deleteReleasePopup");this._$confirmOk=$("#deleteReleaseOk",this._$confirmDialog);this._$checkbox.click(function(){return a._displayReleases()});this._$reassignDelete.click(function(){return a._reallyDeleteRelease(a._$reassignDialog.data("handler-data"))});this._$confirmOk.click(function(){return a._reallyDeleteRelease(a._$confirmDialog.data("handler-data"))})}b.prototype._deleteRelease=function(b){var a=b.data;if(a.allowReassignment)this._showReassignment(a);else this._confirmDelete(a)};b.prototype._showReassignment=function(a){var b=this;this._$reassignDialog.data("handler-data",a);$.ajax({type:"POST",url:a.reassignmentListUrl,data:{releaseId:a.id},dataType:"json",success:function(c){for(var d="",a=0;a<c.length;a++)d+='<option value="'+c[a].Name+'">'+c[a].DisplayName+"</option>";b._$list.html(d);OpenDialog("#reassignWorkItems",true,"36em")}})};b.prototype._displayReleases=function(){if(this._$checkbox.is(":checked"))this._$list.show();else{this._$list.hide();$("option",this._$list).eq(0).attr("selected","selected")}};b.prototype._confirmDelete=function(a){this._$confirmDialog.data("handler-data",a);OpenDialog("#deleteReleasePopup",true,"36em")};b.prototype._reallyDeleteRelease=function(c){CodePlex.UpdateProgress.show();var b=this._$list.val();$.ajax({url:c.deleteUrl,type:"DELETE",dataType:"json",data:{reassignmentReleaseName:b},success:function(b){CodePlex.UpdateProgress.hide();a.ui.UrlHelper.redirect(b.RedirectUrl)}})};return b}(b.BaseActionBarHandler);b.ReleaseHandlers=c})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){new codeplex.ui.ReleaseHandlers});var codeplex;(function(a){(function(c){var b=function(){function b(){this.workItemLinkTagBegin='<a class="workItemLink" href="'+a.ui.UrlGenerator.projectUrl()+"/workitem/"}b.prototype.addLinks=function(a){var b=this;$(function(){$(a).each(function(){$(this).html(b.replaceTextWithLinks($(this).html()))})})};b.prototype.replaceTextWithLinks=function(a){var c=a.match(b.s_associationRegex);for(var d in c){var e=c[d].replace(b.s_issueNumberRegex,"$1"+this.workItemLinkTagBegin+'$2">$2</a>');a=a.replace(c[d],e)}a=a.replace(b.s_hashMentionRegex,this.workItemLinkTagBegin+'$2">$1$2</a>');return a};b.s_hashMentionRegex=/(#)(\d+)/g;b.s_issueNumberRegex=/( |,|:)(\d+)/g;b.s_associationRegex=/(?:(?:(?:fixe?|close|resolve)(?:s|d)?)|(?:Work ?Items?))(?: |:|: )(#?\d+(?:, ?#?\d+)*)/gi;return b}();c.WorkItemMention=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(b){(function(c){(function(c){var d=function(c){__extends(b,c);function b(){c.apply(this,arguments)}b.prototype._create=function(){var c=this,b=a.ui.BaseEnhancement.getOptions(this.element);this.options=$.extend({},b,this.options);this.threadUrl=this.options.threadUrl;this.checkImageUrl=this.options.checkImageUrl;this.$editor=$("#Editor",this.element);this.$markdownEditor=$(".MarkdownEditor",this.$editor);this.$cancelButton=$("#CancelButton",this.element);this.$saveButton=$("#SaveButton",this.element);this.$replyButton=$("#ReplyButton",this.element);this._bindEvents();setupUnsavedData();this.options.showEditor&&setTimeout(function(){c.$replyButton.trigger("click")},200)};b.prototype._bindEvents=function(){var b=this,a=this,c=$("#MarkdownEditor").text();$("#ReplyButton").click(function(){b._prepareForReply(c)});$(".ReplyLink").click(function(){b._prepareForReply(c)});$(".ReplyWithQuoteLink").click(function(){var b=a._getThreadPostId(this);a._replyWithQuote(b)});$(".DeletePostLink").click(function(){var b=a._getThreadPostId(this);a._deletePost(b)});$(".EditPostLink").click(function(){var b=a._getThreadPostId(this);a.prepareForEditPost(b)});a._bindAnswerClickHandlers()};b.prototype._resetEditor=function(){if(this.$editor.is(":visible")){disableUnsavedData();this.$editor.detach();this.$cancelButton.trigger("click");this.$markdownEditor.enhancedMarkdownBox("content","");this.$markdownEditor.find(".ErrorMessage").empty();this.$markdownEditor.enhancedMarkdownBox("displayComposeTab");this.$markdownEditor.enhancedMarkdownBox("toggleGuide",false,true);this.$saveButton.attr("disabled",false);this.$saveButton.unbind("click");this.$cancelButton.unbind("click");MvcValidation_ClearErrors()}};b.prototype._prepareForReply=function(b){var a=this;if(msccHadCookieBannerAtPageStart){mscc.setConsent();window.location.reload(true);return}this._resetEditor();this.$markdownEditor.enhancedMarkdownBox("content",b);setupUnsavedData();this.$saveButton.click(function(){if($isFormValid(true)&&a.$markdownEditor.enhancedMarkdownBox("validate")){a.$saveButton.attr("disabled",true);disableUnsavedData();a.$saveButton.get(0).form.submit()}});this.$cancelButton.click(function(){a._resetEditor();a.$replyButton.show()});this.$editor.appendTo("#PostEditorContainer");this.$editor.show();this.$replyButton.hide();setTimeout(function(){$("textarea",this.$editor).focus().val("").val(b)},50)};b.prototype.prepareForEditPost=function(f){var b=this;if(msccHadCookieBannerAtPageStart){mscc.setConsent();window.location.reload(true);return}var a=$("#PostContent_"+f),g=$("#Editor",a).length==1,e,d,c=a.hasClass("markDownOutput");if(g)return;this._resetEditor();setupUnsavedData();e=a.html();d=a.data("markdown");this._displayPostEditor(a,d);$("textarea",this.$editor).focus();this.$saveButton.click(function(){if($isFormValid(true)&&b.$markdownEditor.enhancedMarkdownBox("validate")){b.$saveButton.attr("disabled",true);var d=b.$markdownEditor.enhancedMarkdownBox("content");$.ajax({url:b._getThreadPostUrl(f),data:{content:d},type:"PUT",success:function(e){!e.IsError&&b._updatePost(a,e.Message,c,d)}})}});this.$cancelButton.click(function(){b._updatePost(a,e,c);disableUnsavedData()});this.$replyButton.hide()};b.prototype._displayPostEditor=function(a,b){a.html("");a.removeClass("markDownOutput");this.$editor.appendTo(a);this.$editor.show();this.$markdownEditor.enhancedMarkdownBox("content",b)};b.prototype._updatePost=function(b,f,d,c){this._resetEditor();this.$replyButton.show();var e=new a.ui.WorkItemMention;b.html(e.replaceTextWithLinks(f));if(c!==undefined||d){b.addClass("markDownOutput");if($.browser.mozilla||$.browser.msie)$("iframe",b).bind("load.initial",function(){$(this).unbind("load.initial");$(this).enhancedMarkdownOutput()});else setTimeout(function(){$("iframe",b).enhancedMarkdownOutput()},50)}c!==undefined&&b.data("markdown",c)};b.prototype._replyWithQuote=function(a){var d=this._blockQuote($("#PostContent_"+a).data("markdown")),e=$(".UserProfileLink","#PostDetailsCell_"+a).text(),c=b.REPLY_WITH_QUOTE_MARKDOWN_TEMPLATE.replace("[$AUTHOR$]",e).replace("[$CONTENT$]",d);this._prepareForReply(c)};b.prototype._deletePost=function(a){var b=this._getThreadPostUrl(a);OpenDialog("#DeletePostPanel",true,"41em");$("#DeletePostPanel #ClosePostOk").unbind("click.ajax").bind("click.ajax",function(){$.ajax({url:b,type:"DELETE",success:function(a){location.href=a.RedirectUrl}})})};b.prototype._changePostMetadata=function(a,c){var d=this,e=this;$.ajax({url:this._getThreadPostUrl(a),data:{isAnswer:c},type:"PATCH",success:function(n){if(n.IsError)logError("Couldn't update answer status.");else{var l=$("#Options_"+a),g=l.parent(),m=$("#PostContent_"+a),j="checkmark_"+a,f,h,i;if(c){i="-22px";h=b.AnswerBackground;f=$("#"+b.MarkPostAsAnswerPart+a);f.text(b.UnmarkAsAnswerLabel);g.children("."+b.AnswerCheckmarkClass).remove();var k="Maked as answer by "+$("#userProfileLink").text()+" a few seconds ago";g.prepend('<span class="'+b.AnswerCheckmarkClass+'" id="'+j+'" title="'+k+'"><img src="'+d.options.checkImageUrl+'" alt="'+k+'"></span>');f.attr("id",b.UnmarkPostAsAnswerPart+a);f.removeClass(b.MarkPostAsAnswerClass);f.addClass(b.UnmarkPostAsAnswerClass)}else{h=b.WhiteBackground;i="";f=$("#"+b.UnmarkPostAsAnswerPart+a);f.text(b.MarkAsAnswerLabel);g.children("#"+j).remove();f.attr("id",b.MarkPostAsAnswerPart+a);f.addClass(b.MarkPostAsAnswerClass);f.removeClass(b.UnmarkPostAsAnswerClass)}m.animate({backgroundColor:h},"fast");g.animate({backgroundColor:h},"fast");l.css("margin-top",i);$("."+b.MarkPostAsAnswerClass).unbind("click");$("."+b.UnmarkPostAsAnswerClass).unbind("click");e._bindAnswerClickHandlers()}}})};b.prototype._bindAnswerClickHandlers=function(){var a=this;$("."+b.MarkPostAsAnswerClass).click(function(){var b=a._getThreadPostId(this);a._changePostMetadata(b,true)});$("."+b.UnmarkPostAsAnswerClass).click(function(){var b=a._getThreadPostId(this);a._changePostMetadata(b,false)})};b.prototype._blockQuote=function(e){var a,d,c=$normalizeText(e).split("\n"),b="";for(a=0,d=c.length;a<d;a++)b+="> "+c[a]+"\n";return b};b.prototype._getThreadPostId=function(a){var b=$($(a).parents("tr").get(0)).attr("d:forid");return b};b.prototype._getThreadPostUrl=function(b){var a=this.threadUrl+"/"+b;return a};b.REPLY_WITH_QUOTE_MARKDOWN_TEMPLATE="**[$AUTHOR$] wrote:**\n[$CONTENT$]\n";b.MarkPostAsAnswerPart="MarkPostAsAnswerLink_";b.UnmarkPostAsAnswerPart="UnmarkPostAsAnswerLink_";b.MarkPostAsAnswerClass="MarkPostAsAnswerLink";b.UnmarkPostAsAnswerClass="UnmarkPostAsAnswerLink";b.WhiteBackground="rgb(255, 255, 255)";b.AnswerBackground="#ccffcc";b.MarkAsAnswerLabel="Mark as answer";b.UnmarkAsAnswerLabel="Unmark as answer";b.AnswerCheckmarkClass="answerCheck";return b}(b.BaseEnhancement);c.PostList=d})(c.discussions||(c.discussions={}));var d=c.discussions})(b.views||(b.views={}));var c=b.views})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.discussionsPostList",new codeplex.ui.views.discussions.PostList);$(function(){$("#discussionsPostList").discussionsPostList()});var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(b){(function(c){(function(c){var d=function(c){__extends(b,c);function b(){c.apply(this,arguments)}b.prototype._create=function(){var c=this,b=a.ui.BaseEnhancement.getOptions(this.element);this.options=$.extend({},b,this.options);this.threadUrl=this.options.threadUrl;this.checkImageUrl=this.options.checkImageUrl;this.$editor=$("#Editor",this.element);this.$markdownEditor=$(".MarkdownEditor",this.$editor);this.$cancelButton=$("#CancelButton",this.element);this.$saveButton=$("#SaveButton",this.element);this.$replyButton=$("#ReplyButton",this.element);this._bindEvents();setupUnsavedData();this.options.showEditor&&setTimeout(function(){c.$replyButton.trigger("click")},200)};b.prototype._bindEvents=function(){var b=this,a=this,c=$("#MarkdownEditor").text();$("#ReplyButton").click(function(){b._prepareForReply(c)});$(".ReplyLink").click(function(){b._prepareForReply(c)});$(".ReplyWithQuoteLink").click(function(){var b=a._getThreadPostId(this);a._replyWithQuote(b)});$(".DeletePostLink").click(function(){var b=a._getThreadPostId(this);a._deletePost(b)});$(".EditPostLink").click(function(){var b=a._getThreadPostId(this);a.prepareForEditPost(b)});a._bindAnswerClickHandlers()};b.prototype._resetEditor=function(){if(this.$editor.is(":visible")){disableUnsavedData();this.$editor.detach();this.$cancelButton.trigger("click");this.$markdownEditor.enhancedMarkdownBox("content","");this.$markdownEditor.find(".ErrorMessage").empty();this.$markdownEditor.enhancedMarkdownBox("displayComposeTab");this.$markdownEditor.enhancedMarkdownBox("toggleGuide",false,true);this.$saveButton.attr("disabled",false);this.$saveButton.unbind("click");this.$cancelButton.unbind("click");MvcValidation_ClearErrors()}};b.prototype._prepareForReply=function(b){var a=this;if(msccHadCookieBannerAtPageStart){mscc.setConsent();window.location.reload(true);return}this._resetEditor();this.$markdownEditor.enhancedMarkdownBox("content",b);setupUnsavedData();this.$saveButton.click(function(){if($isFormValid(true)&&a.$markdownEditor.enhancedMarkdownBox("validate")){a.$saveButton.attr("disabled",true);disableUnsavedData();a.$saveButton.get(0).form.submit()}});this.$cancelButton.click(function(){a._resetEditor();a.$replyButton.show()});this.$editor.appendTo("#PostEditorContainer");this.$editor.show();this.$replyButton.hide();setTimeout(function(){$("textarea",this.$editor).focus().val("").val(b)},50)};b.prototype.prepareForEditPost=function(f){var b=this;if(msccHadCookieBannerAtPageStart){mscc.setConsent();window.location.reload(true);return}var a=$("#PostContent_"+f),g=$("#Editor",a).length==1,e,d,c=a.hasClass("markDownOutput");if(g)return;this._resetEditor();setupUnsavedData();e=a.html();d=a.data("markdown");this._displayPostEditor(a,d);$("textarea",this.$editor).focus();this.$saveButton.click(function(){if($isFormValid(true)&&b.$markdownEditor.enhancedMarkdownBox("validate")){b.$saveButton.attr("disabled",true);var d=b.$markdownEditor.enhancedMarkdownBox("content");$.ajax({url:b._getThreadPostUrl(f),data:{content:d},type:"PUT",success:function(e){!e.IsError&&b._updatePost(a,e.Message,c,d)}})}});this.$cancelButton.click(function(){b._updatePost(a,e,c);disableUnsavedData()});this.$replyButton.hide()};b.prototype._displayPostEditor=function(a,b){a.html("");a.removeClass("markDownOutput");this.$editor.appendTo(a);this.$editor.show();this.$markdownEditor.enhancedMarkdownBox("content",b)};b.prototype._updatePost=function(b,f,d,c){this._resetEditor();this.$replyButton.show();var e=new a.ui.WorkItemMention;b.html(e.replaceTextWithLinks(f));if(c!==undefined||d){b.addClass("markDownOutput");if($.browser.mozilla||$.browser.msie)$("iframe",b).bind("load.initial",function(){$(this).unbind("load.initial");$(this).enhancedMarkdownOutput()});else setTimeout(function(){$("iframe",b).enhancedMarkdownOutput()},50)}c!==undefined&&b.data("markdown",c)};b.prototype._replyWithQuote=function(a){var d=this._blockQuote($("#PostContent_"+a).data("markdown")),e=$(".UserProfileLink","#PostDetailsCell_"+a).text(),c=b.REPLY_WITH_QUOTE_MARKDOWN_TEMPLATE.replace("[$AUTHOR$]",e).replace("[$CONTENT$]",d);this._prepareForReply(c)};b.prototype._deletePost=function(a){var b=this._getThreadPostUrl(a);OpenDialog("#DeletePostPanel",true,"41em");$("#DeletePostPanel #ClosePostOk").unbind("click.ajax").bind("click.ajax",function(){$.ajax({url:b,type:"DELETE",success:function(a){location.href=a.RedirectUrl}})})};b.prototype._changePostMetadata=function(a,c){var d=this,e=this;$.ajax({url:this._getThreadPostUrl(a),data:{isAnswer:c},type:"PATCH",success:function(n){if(n.IsError)logError("Couldn't update answer status.");else{var l=$("#Options_"+a),g=l.parent(),m=$("#PostContent_"+a),j="checkmark_"+a,f,h,i;if(c){i="-22px";h=b.AnswerBackground;f=$("#"+b.MarkPostAsAnswerPart+a);f.text(b.UnmarkAsAnswerLabel);g.children("."+b.AnswerCheckmarkClass).remove();var k="Maked as answer by "+$("#userProfileLink").text()+" a few seconds ago";g.prepend('<span class="'+b.AnswerCheckmarkClass+'" id="'+j+'" title="'+k+'"><img src="'+d.options.checkImageUrl+'" alt="'+k+'"></span>');f.attr("id",b.UnmarkPostAsAnswerPart+a);f.removeClass(b.MarkPostAsAnswerClass);f.addClass(b.UnmarkPostAsAnswerClass)}else{h=b.WhiteBackground;i="";f=$("#"+b.UnmarkPostAsAnswerPart+a);f.text(b.MarkAsAnswerLabel);g.children("#"+j).remove();f.attr("id",b.MarkPostAsAnswerPart+a);f.addClass(b.MarkPostAsAnswerClass);f.removeClass(b.UnmarkPostAsAnswerClass)}m.animate({backgroundColor:h},"fast");g.animate({backgroundColor:h},"fast");l.css("margin-top",i);$("."+b.MarkPostAsAnswerClass).unbind("click");$("."+b.UnmarkPostAsAnswerClass).unbind("click");e._bindAnswerClickHandlers()}}})};b.prototype._bindAnswerClickHandlers=function(){var a=this;$("."+b.MarkPostAsAnswerClass).click(function(){var b=a._getThreadPostId(this);a._changePostMetadata(b,true)});$("."+b.UnmarkPostAsAnswerClass).click(function(){var b=a._getThreadPostId(this);a._changePostMetadata(b,false)})};b.prototype._blockQuote=function(e){var a,d,c=$normalizeText(e).split("\n"),b="";for(a=0,d=c.length;a<d;a++)b+="> "+c[a]+"\n";return b};b.prototype._getThreadPostId=function(a){var b=$($(a).parents("tr").get(0)).attr("d:forid");return b};b.prototype._getThreadPostUrl=function(b){var a=this.threadUrl+"/"+b;return a};b.REPLY_WITH_QUOTE_MARKDOWN_TEMPLATE="**[$AUTHOR$] wrote:**\n[$CONTENT$]\n";b.MarkPostAsAnswerPart="MarkPostAsAnswerLink_";b.UnmarkPostAsAnswerPart="UnmarkPostAsAnswerLink_";b.MarkPostAsAnswerClass="MarkPostAsAnswerLink";b.UnmarkPostAsAnswerClass="UnmarkPostAsAnswerLink";b.WhiteBackground="rgb(255, 255, 255)";b.AnswerBackground="#ccffcc";b.MarkAsAnswerLabel="Mark as answer";b.UnmarkAsAnswerLabel="Unmark as answer";b.AnswerCheckmarkClass="answerCheck";return b}(b.BaseEnhancement);c.PostList=d})(c.discussions||(c.discussions={}));var d=c.discussions})(b.views||(b.views={}));var c=b.views})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.discussionsPostList",new codeplex.ui.views.discussions.PostList);$(function(){$("#discussionsPostList").discussionsPostList()});var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(b){(function(c){(function(c){var e=function(){function a(b,a){this.format=b;this.message=a}return a}();c.ValidationElement=e;var o=function(){function a(a){this.id=ko.observable(a.Id);this.name=ko.observable(a.Name);this.description=ko.observable(a.Description);this.totalSubscriptions=ko.observable(a.TotalSubscriptions);this.modificationSource=ko.observable(a.ModificationSource.toLowerCase());this.events=ko.observableArray($.map(a.Events,function(a){return new m(a)}));this.properties=ko.observableArray($.map(a.Properties,function(a){return new h(a)}));this.selected=ko.observable(false);this.isWebHooks=ko.observable(a.Id==1)}return a}();c.Consumer=o;var f=function(){function a(b,c){var a=this;this.id=ko.observable(c==null?0:c.Id);this.isTemplate=ko.observable(c==null);this._modificationSource=b.modificationSource();if(c!=null){this.events=ko.observableArray($.map(c.Events,function(c){return new g(b,a,c)}));this.properties=ko.observableArray($.map(c.Properties,function(a){return new d(b.properties(),a)}))}else{this.events=ko.observableArray($.map(b.events(),function(c){return new g(b,a,{Name:c.name(),Enabled:false})}));this.properties=ko.observableArray($.map(b.properties(),function(a){return new d(b.properties(),{Name:a.name(),Value:a.defaultValue()})}))}this.displayedProperties=ko.computed(function(){return ko.utils.arrayFilter(a.properties(),function(b){if(a._modificationSource!="oauth")return true;return b.name()!="token"&&b.name()!="token secret"})});this.isConnected=ko.computed(function(){var b=a._isConnected(a.properties());if(!b)for(var d=a.events(),c=0;c<d.length;c++){var e=d[c];b=a._isConnected(e.properties());if(b)break}return b})}a.prototype._isConnected=function(a){var b=this;return ko.utils.arrayFilter(a,function(a){return b._modificationSource=="oauth"&&(a.name()==="token"||a.name()==="token secret")&&a.value().length>0}).length>0};a.prototype.disconnectAccount=function(){var a=this;if(this._modificationSource!="oauth")return;this._wipeTokens(this.properties());ko.utils.arrayForEach(this.events(),function(b){a._wipeTokens(b.properties())})};a.prototype._wipeTokens=function(a){ko.utils.arrayForEach(a,function(a){(a.name()==="token"||a.name()==="token secret")&&a.value("")})};return a}();c.Subscription=f;var m=function(){function a(a){this.name=ko.observable(a.Name);this.description=ko.observable(a.Description);this.properties=ko.observableArray($.map(a.Properties,function(a){return new h(a)}))}return a}();c.ConsumerEvent=m;var g=function(){function a(c,e,a){var b=ko.utils.arrayFirst(c.events(),function(b){return b.name()===a.Name});this.name=ko.observable(a.Name);this.description=ko.observable(b.description());this.enabled=ko.observable(c.isWebHooks()&&e.isTemplate()||a.Enabled).extend({trackChange:true});if(a.Properties!=null)this.properties=ko.observableArray($.map(a.Properties,function(a){return new d(b.properties(),a)}));else this.properties=ko.observableArray($.map(b.properties(),function(a){return new d(b.properties(),{Name:a.name(),Value:a.defaultValue()})}))}return a}();c.SubscriptionEvent=g;var h=function(){function a(a){this.name=ko.observable(a.Name);this.required=ko.observable(a.Required);this.description=ko.observable(a.Description);this.type=ko.observable(a.PropertyType);this.defaultValue=ko.observable(a.DefaultValue)}return a}();c.ConsumerProperty=h;var d=function(){function a(c,b){var a=ko.utils.arrayFirst(c,function(a){return a.name()===b.Name});this.name=ko.observable(b.Name);this.value=ko.observable(a.type()==="Boolean"?b.Value.parseBool():b.Value).extend({trackChange:true});this.required=ko.observable(a.required());this.description=ko.observable(a.description());this.type=ko.observable(a.type())}return a}();c.SubscriptionProperty=d;var n=function(){function a(a){var b=this;this.id=ko.observable(a.Id);this.status=ko.observable(a.Status);this.eventType=ko.observable(a.EventType);this.createdDate=ko.observable(a.CreatedDate);this.imageUrl=ko.observable(a.ImageUrl);this.imageTooltip=ko.observable(a.ImageTooltip);this.events=ko.observableArray([]);this.eventsDisplayed=ko.observable(false);this.detailsText=ko.computed(function(){return b.eventsDisplayed()?"collapse":"expand"})}return a}();c.Notification=n;var l=function(){function a(a){this.imageUrl=ko.observable(a.ImageUrl);this.imageTooltip=ko.observable(a.ImageTooltip);this.status=ko.observable(a.Status);this.message=ko.observable(a.Message);this.createdDate=ko.observable(a.CreatedDate);this.request=ko.observable(a.Request?new j(a.Request):null);this.response=ko.observable(a.Response?new i(a.Response):null)}return a}();c.NotificationEvent=l;var j=function(){function a(a){this.uri=ko.observable(a.Uri);this.method=ko.observable(a.Method);this.headers=ko.observable(a.Headers);this.body=ko.observable(a.Body)}return a}();c.NotificationEventRequest=j;var i=function(){function a(a){this.statusCode=ko.observable(a.StatusCode);this.headers=ko.observable(a.Headers);this.content=ko.observable(a.Content)}return a}();c.NotificationEventResponse=i;var k=function(){function a(){var a=this;this.consumers=ko.observableArray([]);this.subscriptions=ko.observableArray([]);this.notifications=ko.observableArray([]);this.selectedEntry=ko.observable(null);this.errorSaving=ko.observable(null);this.isDirty=ko.observable(false);this.selectedConsumer=ko.computed(function(){return ko.utils.arrayFirst(a.consumers(),function(a){return a.selected()})});this.activeServices=ko.computed(function(){return ko.utils.arrayFilter(a.consumers(),function(a){return a.totalSubscriptions()>0})});this.availableServices=ko.computed(function(){return ko.utils.arrayFilter(a.consumers(),function(a){return a.totalSubscriptions()==0})});this.removeAllowed=ko.computed(function(){var b=a.selectedConsumer();if(b==null)return false;if(!b.isWebHooks())return a.subscriptions()[0].id()>0;var c=ko.utils.arrayFilter(a.subscriptions(),function(a){return!a._destroy&&!a.isTemplate()}),d=ko.utils.arrayFilter(a.subscriptions(),function(a){return a.isTemplate()});return c.length>0||d.length>1});this.editAllowed=ko.computed(function(){if(a.selectedConsumer()==null)return false;return a.selectedConsumer().modificationSource()!="oauth"||a.subscriptions()[0].isConnected()});ko.extenders.trackChange=function(b,c){if(!c)return b;b._originalValue=b();b.subscribe(function(c){if(a.isDirty())return;a.isDirty(c!=b._originalValue)});return b};ko.bindingHandlers.slideVisible={init:function(b,a,d,f,e){var c=a();$(b).toggle(ko.utils.unwrapObservable(c))},update:function(a,b,d,f,e){var c=b();ko.utils.unwrapObservable(c)?$(a).slideDown("fast"):$(a).slideUp("fast");$(document).checkContent()}};ko.bindingHandlers.templateWithContext={init:function(e,c,a,d,b){return ko.bindingHandlers.template.init.apply(this,arguments)},update:function(f,b,c,e,d){var a=ko.utils.unwrapObservable(b());if(a.context){a.context.data=a.data;a.data=a.context;delete a.context}ko.bindingHandlers.template.update.apply(this,arguments)}}}a.prototype.selectConsumer=function(a){ko.utils.arrayForEach(this.consumers(),function(a){a.selected(false)});a.selected(true)};return a}();c.ServiceHooksViewModel=k;var p=function(c){__extends(b,c);function b(){c.call(this);this.options={}}b.prototype.viewModel=function(){return this.model};b.prototype._create=function(){this.model=new k;this.consumerData=$("#consumerData",this.element);this._bindEvents()};b.prototype._init=function(){this._setConsumers($.parseJSON(this.consumerData.html()));ko.applyBindings(this.model);this._enableBrowsingHistory()};b.prototype._enableBrowsingHistory=function(){var c=this,a={root:true},b=location.pathname;if(location.hash.length>0){a={hash:location.hash};b=location.pathname+location.hash}this.element.browsingHistory({defaultState:a,defaultUrl:b,popped:function(a){if(a&&a.hash!=null&&a.hash.length>0){var b=a.hash;if(b.indexOf("#")==0)b=b.substring(1);var e=parseInt(b),d=ko.utils.arrayFirst(c.model.consumers(),function(a){return a.id()==e});d!=null&&c._selectConsumer(d);window.location.hash=""}}})};b.prototype._bindEvents=function(){var a=this;this.element.delegate(".consumers a","click",function(){a._selectConsumer(ko.dataFor(this));return false});this.element.delegate("a.add","click",function(){a._addBlankSubscription();a._setupValidation(a.model.selectedConsumer());return false});this.element.delegate("a.remove","click",function(){var b=ko.dataFor(this);a._removeSubscription(b)});this.element.delegate("input[type=button].save","click",function(){if(a.model.isDirty()&&!$(this).attr("disabled")){$(this).attr("disabled","disabled");a._saveSubscriptions(true)}});this.element.delegate("input[type=button].remove","click",function(){OpenDialog("#deleteSubscription",true,"30em")});this.element.delegate("a.disconnect","click",function(){var b=a.model.subscriptions()[0];b.disconnectAccount();a._saveSubscriptions(true);return false});$("#deleteSubscription").delegate("input[type=button].confirm","click",function(){a._deleteSubscription()});this.element.delegate("a.connect","click",function(){a._connectAccount();return false});this.element.delegate("#notifications li a.view","click",function(){a._loadEvents(ko.dataFor(this));return false});this.element.delegate("#notifications li a.view_event","click",function(){a._displayRequest(ko.dataFor(this));return false});this.model.isDirty.subscribe(function(a){if(a)appendUnsavedDataPrompt();else disableUnsavedData()})};b.prototype._selectConsumer=function(a){if(promptUnsavedData()){this._getSubscriptions(a);this.model.isDirty(false)}};b.prototype._setConsumers=function(e,d){var a=$.map(e,function(a){return new o(a)}),c=this.model.selectedConsumer(),b=ko.utils.arrayFirst(a,function(a){return c!=null&&c.id()==a.id()});this.model.consumers(a);if(d&&b!=null)this.model.selectConsumer(b);else this.model.subscriptions.removeAll()};b.prototype._setSubscriptions=function(a,c){var b=$.map(c,function(b){return new f(a,b)});b.length===0&&b.push(new f(a,null));this.model.subscriptions(b);this._loadNotifications(a);this._setupValidation(a)};b.prototype._setupValidation=function(d){var a=this;MvcValidation_ClearErrors();MvcValidation_ValidationElements=[];MvcValidation_ValidationFunctions=[];var c=d.isWebHooks()?this.model.subscriptions():[this.model.subscriptions()[0]],b=0;$.each(c,function(e,d){if(d._destroy)return;var c=d;$.each(c.displayedProperties(),function(f,e){var c="subscriptionProperty_root_"+b;if(!a._usesValidation(e))return;var d=a._getValidationElement(e);MvcValidation_ValidationElements.push(c);e.required()&&MvcValidation_ValidationFunctions.push({clientId:c,validationFunction:function(){return MvcValidation_Required(c,"This value is required.")},validatorName:"required",group:""});d.format.length>0&&MvcValidation_ValidationFunctions.push({clientId:c,validationFunction:function(){return MvcValidation_RequiresFormat(c,d.format,false,d.message)},validatorName:"format",group:""});b++});$.each(c.events(),function(b,d){var c="subscriptionEvent_"+b;$.each(d.properties(),function(g,f){var e="subscriptionProperty_event_"+b+"_"+g;if(!a._usesValidation(f))return;var d=a._getValidationElement(f);MvcValidation_ValidationElements.push(e);if(f.required())MvcValidation_ValidationFunctions.push({clientId:e,validationFunction:function(){return MvcValidation_Conditional(c,e,d.format,"This value is required.",d.message)},validatorName:"required",group:""});else d.format.length>0&&MvcValidation_ValidationFunctions.push({clientId:e,validationFunction:function(){return MvcValidation_RequiresFormat(e,d.format,false,d.message)},validatorName:"format",group:""})})})});MvcValidation_HookupEvents()};b.prototype._usesValidation=function(a){return a.required()||a.type()==="Number"||a.type()==="Url"};b.prototype._getValidationElement=function(a){if(a.type()==="Number")return new e(this.options.numberFormat,"This is not a valid number.");else if(a.type()==="Url")return new e(this.options.urlFormat,"This is not a valid url.");return new e("",null)};b.prototype._getSubscriptions=function(a){var b=this,c=a.id(),d=this.options.dataUrl+"/"+c;if(a.selected())return;CodePlex.UpdateProgress.delayShow(500);this.model.notifications([]);$.ajax({url:d,type:"GET",dataType:"json",success:function(c){CodePlex.UpdateProgress.hide();b.model.errorSaving(false);if(c.IsError){b.model.subscriptions.removeAll();$("input[type=button].save").removeAttr("disabled")}else{b._setSubscriptions(a,c);b.model.selectConsumer(a)}}})};b.prototype._saveSubscriptions=function(c){var f=this,a=this,b=this.model.selectedConsumer(),e=!b.isWebHooks()?this.model.subscriptions():ko.utils.arrayFilter(this.model.subscriptions(),function(a){return!a.isTemplate()||a.isTemplate()&&a.properties()[0].value().length>0}),g=this.options.dataUrl+"/"+b.id();if(c&&!MvcValidation_Validate()){$("input[type=button].save").removeAttr("disabled");return}var d=$.map(e,function(a){var b={id:a.id(),events:a.events(),properties:a.properties()};try{b._destroy=a._destroy}catch(c){}return b});CodePlex.UpdateProgress.delayShow(500);$.ajax({url:g,type:"POST",dataType:"json",contentType:"application/json",data:ko.toJSON(d),success:function(d){CodePlex.UpdateProgress.hide();if(d.IsError)a.model.errorSaving(true);else{a._setConsumers(d.Consumers,c);c&&a._setSubscriptions(b,d.Subscriptions);a.model.errorSaving(false);$(".success",f.element).show().fadeOut(5e3);a.model.isDirty(false);OpenDialog("#deleteSubscription",false)}}})};b.prototype._removeSubscription=function(a){if(a.id()>0)this.model.subscriptions.destroy(a);else this.model.subscriptions.remove(a);var b=ko.utils.arrayFilter(this.model.subscriptions(),function(a){return!a._destroy});b.length==0&&this._addBlankSubscription(false);this.model.isDirty(true);this._setupValidation(this.model.selectedConsumer())};b.prototype._deleteSubscription=function(){this.model.subscriptions.destroyAll();this._saveSubscriptions(false)};b.prototype._addBlankSubscription=function(a){if(typeof a==="undefined")a=true;var c=this;a&&ko.utils.arrayForEach(this.model.subscriptions(),function(a){a.properties()[0].required(true)});var b=new f(this.model.selectedConsumer(),null);this._setRequiredState(b.properties(),a);ko.utils.arrayForEach(b.events(),function(b){c._setRequiredState(b.properties(),a)});this.model.subscriptions.push(b)};b.prototype._setRequiredState=function(a,b){ko.utils.arrayForEach(a,function(a){a.required(b)})};b.prototype._connectAccount=function(){var e=this,b=this.model.selectedConsumer(),c=this.model.subscriptions()[0],d=this.options.dataUrl+"/"+b.id()+"/codes";CodePlex.UpdateProgress.delayShow(500);$.ajax({url:d,type:"POST",dataType:"json",contentType:"application/json",async:false,data:ko.toJSON({subscriptionId:c.id()>0?c.id():null}),success:function(e){CodePlex.UpdateProgress.hide();var c=window.location.href;if(c.indexOf(window.location.hash)>0)c=c.substring(0,c.length-window.location.hash.length);if(c.lastIndexOf("#")==c.length-1)c=c.substring(0,c.length-1);var d=e.ConfigurationUrl+"?redirect="+encodeURIComponent(c+"#"+b.id());if(b.modificationSource()=="external")a.ui.UrlHelper.openWindow(d);else a.ui.UrlHelper.redirect(d)}})};b.prototype._loadNotifications=function(b){var a=this,c=this.options.dataUrl+"/"+b.id()+"/notifications";$.ajax({url:c,type:"GET",dataType:"json",success:function(b){if(b.IsError)a.model.notifications([]);else{var c=$.map(b,function(a){return new n(a)});a.model.notifications(c)}},error:function(){a.model.notifications([])}})};b.prototype._loadEvents=function(a){var b=this,e=this,c=this.model.selectedConsumer(),d=this.options.dataUrl+"/"+c.id()+"/notifications/"+a.id();if(a.events().length>0)this._toggleLogDisplay(a);else{CodePlex.UpdateProgress.delayShow(500);$.ajax({url:d,type:"GET",dataType:"json",success:function(c){CodePlex.UpdateProgress.hide();if(c.IsError){a.events([]);b._toggleLogDisplay(a)}else{var d=$.map(c,function(a){return new l(a)});a.events(d);b._toggleLogDisplay(a)}},error:function(){CodePlex.UpdateProgress.hide();a.events([]);b._toggleLogDisplay(a)}})}};b.prototype._toggleLogDisplay=function(a){var b=!a.eventsDisplayed();ko.utils.arrayForEach(this.model.notifications(),function(a){a.eventsDisplayed(false)});b&&a.eventsDisplayed(true)};b.prototype._displayRequest=function(a){this.model.selectedEntry(a);OpenDialog("#notificationEntryDetails",true,"60em")};return b}(b.BaseEnhancement);c.EditServiceHooks=p})(c.editproject||(c.editproject={}));var d=c.editproject})(b.views||(b.views={}));var c=b.views})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.editServiceHooks",new codeplex.ui.views.editproject.EditServiceHooks);var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},codeplex;(function(a){(function(b){(function(c){(function(c){var e=function(){function a(b,a){this.format=b;this.message=a}return a}();c.ValidationElement=e;var o=function(){function a(a){this.id=ko.observable(a.Id);this.name=ko.observable(a.Name);this.description=ko.observable(a.Description);this.totalSubscriptions=ko.observable(a.TotalSubscriptions);this.modificationSource=ko.observable(a.ModificationSource.toLowerCase());this.events=ko.observableArray($.map(a.Events,function(a){return new m(a)}));this.properties=ko.observableArray($.map(a.Properties,function(a){return new h(a)}));this.selected=ko.observable(false);this.isWebHooks=ko.observable(a.Id==1)}return a}();c.Consumer=o;var f=function(){function a(b,c){var a=this;this.id=ko.observable(c==null?0:c.Id);this.isTemplate=ko.observable(c==null);this._modificationSource=b.modificationSource();if(c!=null){this.events=ko.observableArray($.map(c.Events,function(c){return new g(b,a,c)}));this.properties=ko.observableArray($.map(c.Properties,function(a){return new d(b.properties(),a)}))}else{this.events=ko.observableArray($.map(b.events(),function(c){return new g(b,a,{Name:c.name(),Enabled:false})}));this.properties=ko.observableArray($.map(b.properties(),function(a){return new d(b.properties(),{Name:a.name(),Value:a.defaultValue()})}))}this.displayedProperties=ko.computed(function(){return ko.utils.arrayFilter(a.properties(),function(b){if(a._modificationSource!="oauth")return true;return b.name()!="token"&&b.name()!="token secret"})});this.isConnected=ko.computed(function(){var b=a._isConnected(a.properties());if(!b)for(var d=a.events(),c=0;c<d.length;c++){var e=d[c];b=a._isConnected(e.properties());if(b)break}return b})}a.prototype._isConnected=function(a){var b=this;return ko.utils.arrayFilter(a,function(a){return b._modificationSource=="oauth"&&(a.name()==="token"||a.name()==="token secret")&&a.value().length>0}).length>0};a.prototype.disconnectAccount=function(){var a=this;if(this._modificationSource!="oauth")return;this._wipeTokens(this.properties());ko.utils.arrayForEach(this.events(),function(b){a._wipeTokens(b.properties())})};a.prototype._wipeTokens=function(a){ko.utils.arrayForEach(a,function(a){(a.name()==="token"||a.name()==="token secret")&&a.value("")})};return a}();c.Subscription=f;var m=function(){function a(a){this.name=ko.observable(a.Name);this.description=ko.observable(a.Description);this.properties=ko.observableArray($.map(a.Properties,function(a){return new h(a)}))}return a}();c.ConsumerEvent=m;var g=function(){function a(c,e,a){var b=ko.utils.arrayFirst(c.events(),function(b){return b.name()===a.Name});this.name=ko.observable(a.Name);this.description=ko.observable(b.description());this.enabled=ko.observable(c.isWebHooks()&&e.isTemplate()||a.Enabled).extend({trackChange:true});if(a.Properties!=null)this.properties=ko.observableArray($.map(a.Properties,function(a){return new d(b.properties(),a)}));else this.properties=ko.observableArray($.map(b.properties(),function(a){return new d(b.properties(),{Name:a.name(),Value:a.defaultValue()})}))}return a}();c.SubscriptionEvent=g;var h=function(){function a(a){this.name=ko.observable(a.Name);this.required=ko.observable(a.Required);this.description=ko.observable(a.Description);this.type=ko.observable(a.PropertyType);this.defaultValue=ko.observable(a.DefaultValue)}return a}();c.ConsumerProperty=h;var d=function(){function a(c,b){var a=ko.utils.arrayFirst(c,function(a){return a.name()===b.Name});this.name=ko.observable(b.Name);this.value=ko.observable(a.type()==="Boolean"?b.Value.parseBool():b.Value).extend({trackChange:true});this.required=ko.observable(a.required());this.description=ko.observable(a.description());this.type=ko.observable(a.type())}return a}();c.SubscriptionProperty=d;var n=function(){function a(a){var b=this;this.id=ko.observable(a.Id);this.status=ko.observable(a.Status);this.eventType=ko.observable(a.EventType);this.createdDate=ko.observable(a.CreatedDate);this.imageUrl=ko.observable(a.ImageUrl);this.imageTooltip=ko.observable(a.ImageTooltip);this.events=ko.observableArray([]);this.eventsDisplayed=ko.observable(false);this.detailsText=ko.computed(function(){return b.eventsDisplayed()?"collapse":"expand"})}return a}();c.Notification=n;var l=function(){function a(a){this.imageUrl=ko.observable(a.ImageUrl);this.imageTooltip=ko.observable(a.ImageTooltip);this.status=ko.observable(a.Status);this.message=ko.observable(a.Message);this.createdDate=ko.observable(a.CreatedDate);this.request=ko.observable(a.Request?new j(a.Request):null);this.response=ko.observable(a.Response?new i(a.Response):null)}return a}();c.NotificationEvent=l;var j=function(){function a(a){this.uri=ko.observable(a.Uri);this.method=ko.observable(a.Method);this.headers=ko.observable(a.Headers);this.body=ko.observable(a.Body)}return a}();c.NotificationEventRequest=j;var i=function(){function a(a){this.statusCode=ko.observable(a.StatusCode);this.headers=ko.observable(a.Headers);this.content=ko.observable(a.Content)}return a}();c.NotificationEventResponse=i;var k=function(){function a(){var a=this;this.consumers=ko.observableArray([]);this.subscriptions=ko.observableArray([]);this.notifications=ko.observableArray([]);this.selectedEntry=ko.observable(null);this.errorSaving=ko.observable(null);this.isDirty=ko.observable(false);this.selectedConsumer=ko.computed(function(){return ko.utils.arrayFirst(a.consumers(),function(a){return a.selected()})});this.activeServices=ko.computed(function(){return ko.utils.arrayFilter(a.consumers(),function(a){return a.totalSubscriptions()>0})});this.availableServices=ko.computed(function(){return ko.utils.arrayFilter(a.consumers(),function(a){return a.totalSubscriptions()==0})});this.removeAllowed=ko.computed(function(){var b=a.selectedConsumer();if(b==null)return false;if(!b.isWebHooks())return a.subscriptions()[0].id()>0;var c=ko.utils.arrayFilter(a.subscriptions(),function(a){return!a._destroy&&!a.isTemplate()}),d=ko.utils.arrayFilter(a.subscriptions(),function(a){return a.isTemplate()});return c.length>0||d.length>1});this.editAllowed=ko.computed(function(){if(a.selectedConsumer()==null)return false;return a.selectedConsumer().modificationSource()!="oauth"||a.subscriptions()[0].isConnected()});ko.extenders.trackChange=function(b,c){if(!c)return b;b._originalValue=b();b.subscribe(function(c){if(a.isDirty())return;a.isDirty(c!=b._originalValue)});return b};ko.bindingHandlers.slideVisible={init:function(b,a,d,f,e){var c=a();$(b).toggle(ko.utils.unwrapObservable(c))},update:function(a,b,d,f,e){var c=b();ko.utils.unwrapObservable(c)?$(a).slideDown("fast"):$(a).slideUp("fast");$(document).checkContent()}};ko.bindingHandlers.templateWithContext={init:function(e,c,a,d,b){return ko.bindingHandlers.template.init.apply(this,arguments)},update:function(f,b,c,e,d){var a=ko.utils.unwrapObservable(b());if(a.context){a.context.data=a.data;a.data=a.context;delete a.context}ko.bindingHandlers.template.update.apply(this,arguments)}}}a.prototype.selectConsumer=function(a){ko.utils.arrayForEach(this.consumers(),function(a){a.selected(false)});a.selected(true)};return a}();c.ServiceHooksViewModel=k;var p=function(c){__extends(b,c);function b(){c.call(this);this.options={}}b.prototype.viewModel=function(){return this.model};b.prototype._create=function(){this.model=new k;this.consumerData=$("#consumerData",this.element);this._bindEvents()};b.prototype._init=function(){this._setConsumers($.parseJSON(this.consumerData.html()));ko.applyBindings(this.model);this._enableBrowsingHistory()};b.prototype._enableBrowsingHistory=function(){var c=this,a={root:true},b=location.pathname;if(location.hash.length>0){a={hash:location.hash};b=location.pathname+location.hash}this.element.browsingHistory({defaultState:a,defaultUrl:b,popped:function(a){if(a&&a.hash!=null&&a.hash.length>0){var b=a.hash;if(b.indexOf("#")==0)b=b.substring(1);var e=parseInt(b),d=ko.utils.arrayFirst(c.model.consumers(),function(a){return a.id()==e});d!=null&&c._selectConsumer(d);window.location.hash=""}}})};b.prototype._bindEvents=function(){var a=this;this.element.delegate(".consumers a","click",function(){a._selectConsumer(ko.dataFor(this));return false});this.element.delegate("a.add","click",function(){a._addBlankSubscription();a._setupValidation(a.model.selectedConsumer());return false});this.element.delegate("a.remove","click",function(){var b=ko.dataFor(this);a._removeSubscription(b)});this.element.delegate("input[type=button].save","click",function(){if(a.model.isDirty()&&!$(this).attr("disabled")){$(this).attr("disabled","disabled");a._saveSubscriptions(true)}});this.element.delegate("input[type=button].remove","click",function(){OpenDialog("#deleteSubscription",true,"30em")});this.element.delegate("a.disconnect","click",function(){var b=a.model.subscriptions()[0];b.disconnectAccount();a._saveSubscriptions(true);return false});$("#deleteSubscription").delegate("input[type=button].confirm","click",function(){a._deleteSubscription()});this.element.delegate("a.connect","click",function(){a._connectAccount();return false});this.element.delegate("#notifications li a.view","click",function(){a._loadEvents(ko.dataFor(this));return false});this.element.delegate("#notifications li a.view_event","click",function(){a._displayRequest(ko.dataFor(this));return false});this.model.isDirty.subscribe(function(a){if(a)appendUnsavedDataPrompt();else disableUnsavedData()})};b.prototype._selectConsumer=function(a){if(promptUnsavedData()){this._getSubscriptions(a);this.model.isDirty(false)}};b.prototype._setConsumers=function(e,d){var a=$.map(e,function(a){return new o(a)}),c=this.model.selectedConsumer(),b=ko.utils.arrayFirst(a,function(a){return c!=null&&c.id()==a.id()});this.model.consumers(a);if(d&&b!=null)this.model.selectConsumer(b);else this.model.subscriptions.removeAll()};b.prototype._setSubscriptions=function(a,c){var b=$.map(c,function(b){return new f(a,b)});b.length===0&&b.push(new f(a,null));this.model.subscriptions(b);this._loadNotifications(a);this._setupValidation(a)};b.prototype._setupValidation=function(d){var a=this;MvcValidation_ClearErrors();MvcValidation_ValidationElements=[];MvcValidation_ValidationFunctions=[];var c=d.isWebHooks()?this.model.subscriptions():[this.model.subscriptions()[0]],b=0;$.each(c,function(e,d){if(d._destroy)return;var c=d;$.each(c.displayedProperties(),function(f,e){var c="subscriptionProperty_root_"+b;if(!a._usesValidation(e))return;var d=a._getValidationElement(e);MvcValidation_ValidationElements.push(c);e.required()&&MvcValidation_ValidationFunctions.push({clientId:c,validationFunction:function(){return MvcValidation_Required(c,"This value is required.")},validatorName:"required",group:""});d.format.length>0&&MvcValidation_ValidationFunctions.push({clientId:c,validationFunction:function(){return MvcValidation_RequiresFormat(c,d.format,false,d.message)},validatorName:"format",group:""});b++});$.each(c.events(),function(b,d){var c="subscriptionEvent_"+b;$.each(d.properties(),function(g,f){var e="subscriptionProperty_event_"+b+"_"+g;if(!a._usesValidation(f))return;var d=a._getValidationElement(f);MvcValidation_ValidationElements.push(e);if(f.required())MvcValidation_ValidationFunctions.push({clientId:e,validationFunction:function(){return MvcValidation_Conditional(c,e,d.format,"This value is required.",d.message)},validatorName:"required",group:""});else d.format.length>0&&MvcValidation_ValidationFunctions.push({clientId:e,validationFunction:function(){return MvcValidation_RequiresFormat(e,d.format,false,d.message)},validatorName:"format",group:""})})})});MvcValidation_HookupEvents()};b.prototype._usesValidation=function(a){return a.required()||a.type()==="Number"||a.type()==="Url"};b.prototype._getValidationElement=function(a){if(a.type()==="Number")return new e(this.options.numberFormat,"This is not a valid number.");else if(a.type()==="Url")return new e(this.options.urlFormat,"This is not a valid url.");return new e("",null)};b.prototype._getSubscriptions=function(a){var b=this,c=a.id(),d=this.options.dataUrl+"/"+c;if(a.selected())return;CodePlex.UpdateProgress.delayShow(500);this.model.notifications([]);$.ajax({url:d,type:"GET",dataType:"json",success:function(c){CodePlex.UpdateProgress.hide();b.model.errorSaving(false);if(c.IsError){b.model.subscriptions.removeAll();$("input[type=button].save").removeAttr("disabled")}else{b._setSubscriptions(a,c);b.model.selectConsumer(a)}}})};b.prototype._saveSubscriptions=function(c){var f=this,a=this,b=this.model.selectedConsumer(),e=!b.isWebHooks()?this.model.subscriptions():ko.utils.arrayFilter(this.model.subscriptions(),function(a){return!a.isTemplate()||a.isTemplate()&&a.properties()[0].value().length>0}),g=this.options.dataUrl+"/"+b.id();if(c&&!MvcValidation_Validate()){$("input[type=button].save").removeAttr("disabled");return}var d=$.map(e,function(a){var b={id:a.id(),events:a.events(),properties:a.properties()};try{b._destroy=a._destroy}catch(c){}return b});CodePlex.UpdateProgress.delayShow(500);$.ajax({url:g,type:"POST",dataType:"json",contentType:"application/json",data:ko.toJSON(d),success:function(d){CodePlex.UpdateProgress.hide();if(d.IsError)a.model.errorSaving(true);else{a._setConsumers(d.Consumers,c);c&&a._setSubscriptions(b,d.Subscriptions);a.model.errorSaving(false);$(".success",f.element).show().fadeOut(5e3);a.model.isDirty(false);OpenDialog("#deleteSubscription",false)}}})};b.prototype._removeSubscription=function(a){if(a.id()>0)this.model.subscriptions.destroy(a);else this.model.subscriptions.remove(a);var b=ko.utils.arrayFilter(this.model.subscriptions(),function(a){return!a._destroy});b.length==0&&this._addBlankSubscription(false);this.model.isDirty(true);this._setupValidation(this.model.selectedConsumer())};b.prototype._deleteSubscription=function(){this.model.subscriptions.destroyAll();this._saveSubscriptions(false)};b.prototype._addBlankSubscription=function(a){if(typeof a==="undefined")a=true;var c=this;a&&ko.utils.arrayForEach(this.model.subscriptions(),function(a){a.properties()[0].required(true)});var b=new f(this.model.selectedConsumer(),null);this._setRequiredState(b.properties(),a);ko.utils.arrayForEach(b.events(),function(b){c._setRequiredState(b.properties(),a)});this.model.subscriptions.push(b)};b.prototype._setRequiredState=function(a,b){ko.utils.arrayForEach(a,function(a){a.required(b)})};b.prototype._connectAccount=function(){var e=this,b=this.model.selectedConsumer(),c=this.model.subscriptions()[0],d=this.options.dataUrl+"/"+b.id()+"/codes";CodePlex.UpdateProgress.delayShow(500);$.ajax({url:d,type:"POST",dataType:"json",contentType:"application/json",async:false,data:ko.toJSON({subscriptionId:c.id()>0?c.id():null}),success:function(e){CodePlex.UpdateProgress.hide();var c=window.location.href;if(c.indexOf(window.location.hash)>0)c=c.substring(0,c.length-window.location.hash.length);if(c.lastIndexOf("#")==c.length-1)c=c.substring(0,c.length-1);var d=e.ConfigurationUrl+"?redirect="+encodeURIComponent(c+"#"+b.id());if(b.modificationSource()=="external")a.ui.UrlHelper.openWindow(d);else a.ui.UrlHelper.redirect(d)}})};b.prototype._loadNotifications=function(b){var a=this,c=this.options.dataUrl+"/"+b.id()+"/notifications";$.ajax({url:c,type:"GET",dataType:"json",success:function(b){if(b.IsError)a.model.notifications([]);else{var c=$.map(b,function(a){return new n(a)});a.model.notifications(c)}},error:function(){a.model.notifications([])}})};b.prototype._loadEvents=function(a){var b=this,e=this,c=this.model.selectedConsumer(),d=this.options.dataUrl+"/"+c.id()+"/notifications/"+a.id();if(a.events().length>0)this._toggleLogDisplay(a);else{CodePlex.UpdateProgress.delayShow(500);$.ajax({url:d,type:"GET",dataType:"json",success:function(c){CodePlex.UpdateProgress.hide();if(c.IsError){a.events([]);b._toggleLogDisplay(a)}else{var d=$.map(c,function(a){return new l(a)});a.events(d);b._toggleLogDisplay(a)}},error:function(){CodePlex.UpdateProgress.hide();a.events([]);b._toggleLogDisplay(a)}})}};b.prototype._toggleLogDisplay=function(a){var b=!a.eventsDisplayed();ko.utils.arrayForEach(this.model.notifications(),function(a){a.eventsDisplayed(false)});b&&a.eventsDisplayed(true)};b.prototype._displayRequest=function(a){this.model.selectedEntry(a);OpenDialog("#notificationEntryDetails",true,"60em")};return b}(b.BaseEnhancement);c.EditServiceHooks=p})(c.editproject||(c.editproject={}));var d=c.editproject})(b.views||(b.views={}));var c=b.views})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.editServiceHooks",new codeplex.ui.views.editproject.EditServiceHooks);